Problem:    gF test still fails on MS-Windows.
Solution:   Use : before the line number and remove it from 'isfname'.
Files:      src/testdir/test_gf.vim

Patch 8.0.0605
Problem:    The buffer that quickfix caches for performance may become
            invalid. (Daniel Hahler)
Solution:   Reset qf_last_bufref in qf_init_ext(). (Daniel Hahler,
            closes #1728, closes #1676)
Files:      src/quickfix.c

Patch 8.0.0606
Problem:    Cannot set the context for a specified quickfix list.
Solution:   Use the list index instead of the current list. (Yegappan
            Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0607
Problem:    When creating a bufref, then using :bwipe and :new it might get
            the same memory and bufref_valid() returns true.
Solution:   Add br_fnum to check the buffer number didn't change.
Files:      src/structs.h, src/buffer.c, src/globals.h, src/if_py_both.h,
            src/quickfix.c

Patch 8.0.0608
Problem:    Cannot manipulate other than the current quickfix list.
Solution:   Pass the list index to quickfix functions. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.0609
Problem:    For some people the hint about quitting is not sufficient.
Solution:   Put <Enter> separately.  Also use ":qa!" to get out even when
            there are changes.
Files:      src/normal.c

Patch 8.0.0610
Problem:    The screen is redrawn when t_BG is set and used to detect the
            value for 'background'.
Solution:   Don't redraw when the value of 'background' didn't change.
Files:      src/term.c

Patch 8.0.0611
Problem:    When t_u7 is sent a few characters in the second screen line are
            overwritten and not redrawn later. (Rastislav Barlik)
Solution:   Move redrawing the screen to after overwriting the characters.
Files:      src/main.c, src/term.c

Patch 8.0.0612
Problem:    Package directories are added to 'runtimepath' only after loading
            non-package plugins.
Solution:   Split off the code to add package directories to 'runtimepath'.
            (Ingo Karkat, closes #1680)
Files:      src/ex_cmds2.c, src/globals.h, src/main.c, src/proto/ex_cmds2.pro,
            src/testdir/test_startup.vim

Patch 8.0.0613
Problem:    The conf filetype detection is done before ftdetect scripts from
            packages that are added later.
Solution:   Add the FALLBACK argument to :setfiletype. (closes #1679,
            closes #1693)
Files:      src/ex_docmd.c, runtime/filetype.vim, src/Makefile,
            src/testdir/test_filetype.vim, src/testdir/test_alot.vim

Patch 8.0.0614
Problem:    float2nr() is not exactly right.
Solution:   Make float2nr() more accurate.  Turn test65 into a new style test.
            (Hirohito Higashi, closes #1688)
Files:      src/Makefile, src/evalfunc.c, src/testdir/Make_all.mak,
            src/testdir/Make_vms.mms, src/testdir/test65.in,
            src/testdir/test65.ok, src/testdir/test_float_func.vim,
            src/testdir/test_vimscript.vim, src/macros.h

Patch 8.0.0615
Problem:    Using % with :hardcopy wrongly escapes spaces. (Alexey Muranov)
Solution:   Expand % differently. (Christian Brabandt, closes #1682)
Files:      src/ex_docmd.c, src/testdir/test_hardcopy.vim


Patch 8.0.0616
Problem:    When setting the cterm background with ":hi Normal" the value of
            'background' may be set wrongly.
Solution:   Check that the color is less than 16.  Don't set 'background' when
            it was set explicitly. (LemonBoy, closes #1710)
Files:      src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0617 (after 8.0.0615)
Problem:    Hardcopy test hangs on MS-Windows.
Solution:   Check the postscript feature is supported.
Files:      src/testdir/test_hardcopy.vim

Patch 8.0.0618
Problem:    NFA regex engine handles [0-z] incorrectly.
Solution:   Return at the right point. (James McCoy, closes #1703)
Files:      src/regexp_nfa.c, src/testdir/test36.in, src/testdir/test36.ok

Patch 8.0.0619
Problem:    In the GUI, when a timer uses feedkeys(), it still waits for an
            event. (Raymond Ko)
Solution:   Check tb_change_cnt in one more place.
Files:      src/gui.c

Patch 8.0.0620
Problem:    Since we only support GTK versions that have it, the check for
            HAVE_GTK_MULTIHEAD is no longer needed.
Solution:   Remove HAVE_GTK_MULTIHEAD. (Kazunobu Kuriyama)
Files:      src/config.h.in, src/configure.ac, src/auto/configure,
            src/gui_beval.c, src/gui_gtk_x11.c, src/mbyte.c

Patch 8.0.0621
Problem:    The ":stag" command does not respect 'switchbuf'.
Solution:   Check 'switchbuf' for tag commands that may open a new window.
            (Ingo Karkat, closes #1681)  Define macros for the return values
            of getfile().
Files:      src/tag.c, src/testdir/test_tagjump.vim, src/vim.h, src/buffer.c,
            src/ex_cmds.c, src/search.c,

Patch 8.0.0622
Problem:    Using a text object to select quoted text fails when 'selection'
            is set to "exclusive". (Guraga)
Solution:   Swap cursor and visual start position. (Christian Brabandt,
            closes #1687)
Files:      src/search.c, src/testdir/test_textobjects.vim

Patch 8.0.0623
Problem:    The message "Invalid range" is used for multiple errors.
Solution:   Add two more specific error messages. (Itchyny, Ken Hamada)
Files:      src/regexp.c, src/regexp_nfa.c, src/testdir/test_regexp_utf8.vim

Patch 8.0.0624 (after 8.0.0623)
Problem:    Warning for unused variable in tiny build. (Tony Mechelynck)
Solution:   Add an #ifdef.
Files:      src/regexp.c

Patch 8.0.0625
Problem:    shellescape() always escapes a newline, which does not work with
            some shells. (Harm te Hennepe)
Solution:   Only escape a newline when the "special" argument is non-zero.
            (Christian Brabandt, closes #1590)
Files:      src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.0.0626
Problem:    In the GUI the cursor may flicker.
Solution:   Check the cmd_silent flag before updating the cursor shape.
            (Hirohito Higashi, closes #1637)
Files:      src/getchar.c

Patch 8.0.0627
Problem:    When 'wrapscan' is off "gn" does not select the whole pattern when
            it's the last one in the text. (KeyboardFire)
Solution:   Check if the search fails. (Christian Brabandt, closes #1683)
Files:      src/search.c, src/testdir/test_gn.vim

Patch 8.0.0628 (after 8.0.0626)
Problem:    Cursor disappears after silent mapping. (Ramel Eshed)
Solution:   Do restore the cursor when it was changed, but don't change it in
            the first place for a silent mapping.
Files:      src/getchar.c


Patch 8.0.0629 (after 8.0.0611)
Problem:    Checking for ambiguous width is not working. (Hirohito Higashi)
Solution:   Reset "starting" earlier.
Files:      src/main.c

Patch 8.0.0630
Problem:    The :global command does not work recursively, which makes it
            difficult to execute a command on a line where one pattern matches
            and another does not match. (Miles Cranmer)
Solution:   Allow for recursion if it is for only one line. (closes #1760)
Files:      src/ex_cmds.c, src/testdir/test_global.vim, runtime/doc/repeat.txt

Patch 8.0.0631
Problem:    Perl 5.26 also needs S_TOPMARK and S_POPMARK defined.
Solution:   Define the functions when needed. (Jesin, closes #1748)
Files:      src/if_perl.xs

Patch 8.0.0632
Problem:    The quotestar test is still a bit flaky.
Solution:   Kill any existing server to make the retry work.  Wait for the
            register to be filled.
Files:      src/testdir/test_quotestar.vim

Patch 8.0.0633
Problem:    The client-server test is still a bit flaky.
Solution:   Wait a bit for the GUI to start.  Check that the version number
            can be obtained.
Files:      src/testdir/test_clientserver.vim

Patch 8.0.0634
Problem:    Cannot easily get to the last quickfix list.
Solution:   Add "$" as a value for the "nr" argument of getqflist() and
            setqflist(). (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0635
Problem:    When 'ignorecase' is set script detection is inaccurate.
Solution:   Enforce matching case for text. (closes #1753)
Files:      runtime/scripts.vim

Patch 8.0.0636
Problem:    When reading the undo file fails may use uninitialized data.
Solution:   Always clear the buffer on failure.
Files:      src/undo.c

Patch 8.0.0637
Problem:    Crash when using some version of GTK 3.
Solution:   Add #ifdefs around incrementing the menu index. (Kazunobu
            Kuriyama)
Files:      src/gui_gtk.c

Patch 8.0.0638
Problem:    Cannot build with new MSVC version VS2017.
Solution:   Change the compiler arguments. (Leonardo Valeri Manera,
	    closes #1731, closes #1747)
Files:      src/GvimExt/Makefile, src/Make_mvc.mak

Patch 8.0.0639
Problem:    The cursor position is set to the last position in a new commit
            message.
Solution:   Don't set the position if the filetype matches "commit".
            (Christian Brabandt)
Files:      runtime/defaults.vim

Patch 8.0.0640
Problem:    Mismatch between help and actual message for ":syn conceal".
Solution:   Change the message to match the help. (Ken Takata)
Files:      src/syntax.c

Patch 8.0.0641
Problem:    Cannot set a separate highlighting for the current line in the
            quickfix window.
Solution:   Add QuickFixLine. (anishsane, closes #1755)
Files:      src/option.c, src/quickfix.c, src/screen.c, src/syntax.c,
            src/vim.h, runtime/doc/options.txt, runtime/doc/quickfix.txt

Patch 8.0.0642
Problem:    writefile() continues after detecting an error.
Solution:   Bail out as soon as an error is detected. (suggestions by Nikolai
            Pavlov, closes #1476)
Files:      src/evalfunc.c, src/testdir/test_writefile.vim

Patch 8.0.0643
Problem:    When 'hlsearch' is set and matching with the last search pattern
            is very slow, Vim becomes unusable.  Cannot quit search by
            pressing CTRL-C.
Solution:   When the search times out set a flag and don't try again.  Check
            for timeout and CTRL-C in NFA loop that adds states.
Files:      src/screen.c, src/ex_cmds.c, src/quickfix.c, src/regexp.c,
            src/proto/regexp.pro, src/regexp.h, src/search.c,
            src/proto/search.pro, src/syntax.c, src/regexp_nfa.c, src/spell.c,
            src/tag.c, src/gui.c, src/edit.c, src/evalfunc.c, src/ex_docmd.c,
            src/ex_getln.c, src/normal.c

Patch 8.0.0644
Problem:    There is no test for 'hlsearch' timing out.
Solution:   Add a test.
Files:      src/testdir/test_hlsearch.vim

Patch 8.0.0645
Problem:    The new regexp engine does not give an error for using a back
            reference where it is not allowed. (Dominique Pelle)
Solution:   Check the back reference like the old engine. (closes #1774)
Files:      src/regexp.c, src/regexp_nfa.c, src/testdir/test_hlsearch.vim,
            src/testdir/test_statusline.vim,
            src/testdir/test_regexp_latin1.vim

Patch 8.0.0646
Problem:    The hlsearch test fails on fast systems.
Solution:   Make the search pattern slower.  Fix that the old regexp engine
            doesn't timeout properly.
Files:      src/regexp.c, src/testdir/test_hlsearch.vim

Patch 8.0.0647
Problem:    Syntax highlighting can cause a freeze.
Solution:   Apply 'redrawtime' to syntax highlighting, per window.
Files:      src/structs.h, src/screen.c, src/syntax.c, src/normal.c,
            src/regexp.c, src/proto/syntax.pro, src/testdir/test_syntax.vim,
            runtime/doc/options.txt

Patch 8.0.0648
Problem:    Possible use of NULL pointer if buflist_new() returns NULL.
            (Coverity)
Solution:   Check for NULL pointer in set_bufref().
Files:      src/buffer.c

Patch 8.0.0649
Problem:    When opening a help file the filetype is set several times.
Solution:   When setting the filetype to the same value from a modeline, don't
            trigger FileType autocommands.  Don't set the filetype to "help"
            when it's already set correctly.
Files:      src/ex_cmds.c, src/option.c, runtime/filetype.vim

Patch 8.0.0650
Problem:    For extra help files the filetype is set more than once.
Solution:   In *.txt files check that there is no help file modline.
Files:      runtime/filetype.vim

Patch 8.0.0651 (after 8.0.0649)
Problem:    Build failure without the auto command feature.
Solution:   Add #ifdef. (closes #1782)
Files:      src/ex_cmds.c

Patch 8.0.0652
Problem:    Unicode information is outdated.
Solution:   Update to Unicode 10. (Christian Brabandt)
Files:      runtime/tools/unicode.vim, src/mbyte.c

Patch 8.0.0653
Problem:    The default highlight for QuickFixLine does not work for several
            color schemes. (Manas Thakur)
Solution:   Make the default use the old color. (closes #1780)
Files:      src/syntax.c

Patch 8.0.0654
Problem:    Text found after :endfunction is silently ignored.
Solution:   Give a warning if 'verbose' is set.  When | or \n are used,
            execute the text as a command.
Files:      src/testdir/test_vimscript.vim, src/userfunc.c,
            runtime/doc/eval.txt

Patch 8.0.0655
Problem:    Not easy to make sure a function does not exist.
Solution:   Add ! as an optional argument to :delfunc.
Files:      src/userfunc.c, src/ex_cmds.h, src/testdir/test_vimscript.vim

Patch 8.0.0656
Problem:    Cannot use ! after some user commands.
Solution:   Properly check for existing command. (Hirohito Higashi)
Files:      src/ex_docmd.c, src/testdir/test_vimscript.vim

Patch 8.0.0657
Problem:    Cannot get and set quickfix list items.
Solution:   Add the "items" argument to getqflist() and setqflist(). (Yegappan
            Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0658
Problem:    Spell test is old style.
Solution:   Turn the spell test into a new style test (pschuh, closes #1778)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test58.in, src/testdir/test58.ok,
            src/testdir/test_spell.vim

Patch 8.0.0659
Problem:    No test for conceal mode.
Solution:   Add a conceal mode test. (Dominique Pelle, closes #1783)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_syntax.vim

Patch 8.0.0660
Problem:    Silent install on MS-Windows does show a dialog.
Solution:   Add /SD to the default choice. (allburov, closes #1772)
Files:      nsis/gvim.nsi

Patch 8.0.0661
Problem:    Recognizing urxvt mouse codes does not work well.
Solution:   Recognize "Esc[*M" and "Esc[*m". (Maurice Bos, closes #1486)
Files:      src/keymap.h, src/misc2.c, src/os_unix.c, src/term.c

Patch 8.0.0662 (after 8.0.0659)
Problem:    Stray FIXME for fixed problem.
Solution:   Remove the comment. (Dominique Pelle)
Files:      src/testdir/test_syntax.vim

Patch 8.0.0663
Problem:    Giving an error message only when 'verbose' set is unexpected.
Solution:   Give a warning message instead.
Files:      src/message.c, src/proto/message.pro, src/userfunc.c,
            src/testdir/test_vimscript.vim, runtime/doc/eval.txt

Patch 8.0.0664 (after 8.0.0661)
Problem:    Mouse does not work in tmux. (lilydjwg)
Solution:   Add flag for SGR release being present.
Files:      src/term.c

Patch 8.0.0665 (after 8.0.0661)
Problem:    Warning for uninitialized variable. (Tony Mechelynck)
Solution:   Initialize it.
Files:      src/term.c

Patch 8.0.0666
Problem:    Dead for loop. (Coverity)
Solution:   Remove the for loop.
Files:      src/term.c

Patch 8.0.0667
Problem:    Memory access error when command follows :endfunction. (Nikolai
            Pavlov)
Solution:   Make memory handling in :function straightforward. (closes #1793)
Files:      src/userfunc.c, src/testdir/test_vimscript.vim

Patch 8.0.0668 (after 8.0.0660)
Problem:    Nsis installer script does not work. (Christian Brabandt)
Solution:   Fix the syntax of /SD.
Files:      nsis/gvim.nsi

Patch 8.0.0669
Problem:    In Insert mode, CTRL-N at start of the buffer does not work
            correctly. (zuloloxi)
Solution:   Wrap around the start of the buffer. (Christian Brabandt)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0670
Problem:    Can't use input() in a timer callback. (Cosmin Popescu)
Solution:   Reset vgetc_busy and set timer_busy. (Ozaki Kiichi, closes #1790,
            closes #1129)
Files:      src/evalfunc.c, src/ex_cmds2.c, src/globals.h,
            src/testdir/test_timers.vim

Patch 8.0.0671
Problem:    When a function invoked from a timer calls confirm() and the user
            types CTRL-C then Vim hangs.
Solution:   Reset typebuf_was_filled. (Ozaki Kiichi, closes #1791)
Files:      src/getchar.c

Patch 8.0.0672
Problem:    Third item of synconcealed() changes too often. (Dominique Pelle)
Solution:   Reset the sequence number at the start of each line.
Files:      src/syntax.c, src/testdir/test_syntax.vim, runtime/doc/eval.txt

Patch 8.0.0673 (after 8.0.0673)
Problem:    Build failure without conceal feature.
Solution:   Add #ifdef.
Files:      src/syntax.c

Patch 8.0.0674 (after 8.0.0670)
Problem:    Cannot build with eval but without timers.
Solution:   Add #ifdef (John Marriott)
Files:      src/evalfunc.c

Patch 8.0.0675
Problem:    'colorcolumn' has a higher priority than 'hlsearch', it should be
            the other way around. (Nazri Ramliy)
Solution:   Change the priorities. (LemonBoy, closes #1794)
Files:      src/screen.c, src/testdir/test_listlbr_utf8.vim

Patch 8.0.0676
Problem:    Crash when closing the quickfix window in a FileType autocommand
            that triggers when the quickfix window is opened.
Solution:   Save the new value before triggering the OptionSet autocommand.
            Add the "starting" flag to test_override() to make the text work.
Files:      src/evalfunc.c, src/option.c, runtime/doc/eval.txt

Patch 8.0.0677
Problem:    Setting 'filetype' internally may cause the current buffer and
            window to change unexpectedly.
Solution:   Set curbuf_lock. (closes #1734)
Files:      src/quickfix.c, src/ex_cmds.c, src/ex_getln.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0678
Problem:    When 'equalalways' is set and closing a window in a separate
            frame, not all window sizes are adjusted. (Glacambre)
Solution:   Resize all windows if the new current window is not in the same
            frame as the closed window. (closes #1707)
Files:      src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.0679 (after 8.0.0678)
Problem:    Using freed memory.
Solution:   Get the parent frame pointer earlier.
Files:      src/window.c

Patch 8.0.0680 (after 8.0.0612)
Problem:    Plugins in start packages are sourced twice. (mseplowitz)
Solution:   Use the unmodified runtime path when loading plugins (test by Ingo
            Karkat, closes #1801)
Files:      src/testdir/test_startup.vim, src/main.c, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro

Patch 8.0.0681
Problem:    Unnamed register only contains the last deleted text when
            appending deleted text to a register. (Wolfgang Jeltsch)
Solution:   Only set y_previous when not using y_append. (Christian Brabandt)
Files:      src/ops.c, src/testdir/test_put.vim

Patch 8.0.0682
Problem:    No test for synIDtrans().
Solution:   Add a test. (Dominique Pelle, closes #1796)
Files:      src/testdir/test_syntax.vim

Patch 8.0.0683
Problem:    When using a visual bell there is no delay, causing the flash to
            be very short, possibly unnoticeable.  Also, the flash and the
            beep can lockup the UI when repeated often.
Solution:   Do the delay in Vim or flush the output before the delay. Limit the
            bell to once per half a second. (Ozaki Kiichi, closes #1789)
Files:      src/misc1.c, src/proto/term.pro, src/term.c

Patch 8.0.0684
Problem:    Old style tests are not nice.
Solution:   Turn two tests into new style. (pschuh, closes #1797)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test82.in, src/testdir/test82.ok,
            src/testdir/test90.in, src/testdir/test90.ok,
            src/testdir/test_sha256.vim, src/testdir/test_utf8_comparisons.vim

Patch 8.0.0685
Problem:    When making backups is disabled and conversion with iconv fails
            the written file is truncated. (Luo Chen)
Solution:   First try converting the file and write the file only when it did
            not fail. (partly by Christian Brabandt)
Files:      src/fileio.c, src/testdir/test_writefile.vim

Patch 8.0.0686
Problem:    When typing CTRL-L in a window that's not the first one, another
            redraw will happen later. (Christian Brabandt)
Solution:   Reset must_redraw after calling screenclear().
Files:      src/screen.c

Patch 8.0.0687
Problem:    Minor issues related to quickfix.
Solution:   Set the proper return status for all cases in setqflist() and at
            test cases for this.  Move the "adding" flag outside of
            FEAT_WINDOWS. Minor update to the setqflist() help text. (Yegappan
            Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0688
Problem:    Cannot resize the window in a FileType autocommand. (Ingo Karkat)
Solution:   Add the CMDWIN flag to :resize. (test by Ingo Karkat,
            closes #1804)
Files:      src/ex_cmds.h, src/testdir/test_quickfix.vim

Patch 8.0.0689
Problem:    The ~ character is not escaped when adding to the search pattern
            with CTRL-L. (Ramel Eshed)
Solution:   Escape the character. (Christian Brabandt)
Files:      src/ex_getln.c, src/testdir/test_search.vim

Patch 8.0.0690
Problem:    Compiler warning on non-Unix system.
Solution:   Add #ifdef. (John Marriott)
Files:      src/term.c

Patch 8.0.0691
Problem:    Compiler warning without the linebreak feature.
Solution:   Add #ifdef. (John Marriott)
Files:      src/edit.c

Patch 8.0.0692
Problem:    Using CTRL-G with 'incsearch' and ? goes in the wrong direction.
            (Ramel Eshed)
Solution:   Adjust search_start. (Christian Brabandt)
Files:      src/ex_getln.c, src/testdir/test_search.vim

Patch 8.0.0693
Problem:    No terminal emulator support.  Cannot properly run commands in the
            GUI.  Cannot run a job interactively with an ssh connection.
Solution:   Very early implementation of the :terminal command.  Includes
            libvterm converted to ANSI C.  Many parts still missing.
Files:      src/feature.h, src/Makefile, src/configure.ac, src/auto/configure,
            src/config.mk.in, src/config.h.in, src/terminal.c, src/structs.h,
            src/ex_cmdidxs.h, src/ex_docmd.c,  src/option.c, src/option.h,
            src/evalfunc.c, src/proto/terminal.pro, src/proto.h,
            runtime/doc/terminal.txt, runtime/doc/Makefile, Filelist,
            src/libvterm/.bzrignore, src/libvterm/.gitignore,
            src/libvterm/LICENSE, src/libvterm/README, src/libvterm/Makefile,
            src/libvterm/tbl2inc_c.pl, src/libvterm/vterm.pc.in,
            src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/vterm-dump.c, src/libvterm/doc/URLs,
            src/libvterm/doc/seqs.txt, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/encoding.c,
            src/libvterm/src/encoding/DECdrawing.inc,
            src/libvterm/src/encoding/DECdrawing.tbl,
            src/libvterm/src/encoding/uk.inc,
            src/libvterm/src/encoding/uk.tbl, src/libvterm/src/keyboard.c,
            src/libvterm/src/mouse.c, src/libvterm/src/parser.c,
            src/libvterm/src/pen.c, src/libvterm/src/rect.h,
            src/libvterm/src/screen.c, src/libvterm/src/state.c,
            src/libvterm/src/unicode.c, src/libvterm/src/utf8.h,
            src/libvterm/src/vterm.c, src/libvterm/src/vterm_internal.h,
            src/libvterm/t/02parser.test, src/libvterm/t/03encoding_utf8.test,
            src/libvterm/t/10state_putglyph.test,
            src/libvterm/t/11state_movecursor.test,
            src/libvterm/t/12state_scroll.test,
            src/libvterm/t/13state_edit.test,
            src/libvterm/t/14state_encoding.test,
            src/libvterm/t/15state_mode.test,
            src/libvterm/t/16state_resize.test,
            src/libvterm/t/17state_mouse.test,
            src/libvterm/t/18state_termprops.test,
            src/libvterm/t/20state_wrapping.test,
            src/libvterm/t/21state_tabstops.test,
            src/libvterm/t/22state_save.test,
            src/libvterm/t/25state_input.test,
            src/libvterm/t/26state_query.test,
            src/libvterm/t/27state_reset.test,
            src/libvterm/t/28state_dbl_wh.test,
            src/libvterm/t/29state_fallback.test, src/libvterm/t/30pen.test,
            src/libvterm/t/40screen_ascii.test,
            src/libvterm/t/41screen_unicode.test,
            src/libvterm/t/42screen_damage.test,
            src/libvterm/t/43screen_resize.test,
            src/libvterm/t/44screen_pen.test,
            src/libvterm/t/45screen_protect.test,
            src/libvterm/t/46screen_extent.test,
            src/libvterm/t/47screen_dbl_wh.test,
            src/libvterm/t/48screen_termprops.test,
            src/libvterm/t/90vttest_01-movement-1.test,
            src/libvterm/t/90vttest_01-movement-2.test,
            src/libvterm/t/90vttest_01-movement-3.test,
            src/libvterm/t/90vttest_01-movement-4.test,
            src/libvterm/t/90vttest_02-screen-1.test,
            src/libvterm/t/90vttest_02-screen-2.test,
            src/libvterm/t/90vttest_02-screen-3.test,
            src/libvterm/t/90vttest_02-screen-4.test,
            src/libvterm/t/92lp1640917.test, src/libvterm/t/harness.c,
            src/libvterm/t/run-test.pl

Patch 8.0.0694
Problem:    Building in shadow directory does not work.  Running Vim fails.
Solution:   Add the new libvterm directory.  Add missing change in command
            list.
Files:      src/Makefile, src/ex_cmds.h

Patch 8.0.0695
Problem:    Missing dependencies breaks parallel make.
Solution:   Add dependencies for terminal.o.
Files:      src/Makefile

Patch 8.0.0696
Problem:    The .inc files are missing in git. (Nazri Ramliy)
Solution:   Remove the .inc line from .gitignore.
Files:      src/libvterm/.gitignore

Patch 8.0.0697
Problem:    Recorded key sequences may become invalid.
Solution:   Add back KE_SNIFF removed in 7.4.1433. Use fixed numbers for the
            key_extra enum.
Files:      src/keymap.h

Patch 8.0.0698
Problem:    When a timer uses ":pyeval" or another Python command and it
            happens to be triggered while exiting a Crash may happen.
            (Ricky Zhou)
Solution:   Avoid running a Python command after python_end() was called.
            Do not trigger timers while exiting.  (closes #1824)
Files:      src/if_python.c, src/if_python3.c, src/ex_cmds2.c

Patch 8.0.0699
Problem:    Checksum tests are not actually run.
Solution:   Add the tests to the list. (Dominique Pelle, closes #1819)
Files:      src/testdir/test_alot.vim, src/testdir/test_alot_utf8.vim

Patch 8.0.0700
Problem:    Segfault with QuitPre autocommand closes the window. (Marek)
Solution:   Check that the window pointer is still valid. (Christian Brabandt,
            closes #1817)
Files:      src/testdir/test_tabpage.vim, src/ex_docmd.c

Patch 8.0.0701
Problem:    System test failing when using X11 forwarding.
Solution:   Set $XAUTHORITY before changing $HOME. (closes #1812)
            Also use a better check for the exit value.
Files:      src/testdir/setup.vim, src/testdir/test_system.vim

Patch 8.0.0702
Problem:    An error in a timer can make Vim unusable.
Solution:   Don't set the error flag or exception from a timer.  Stop a timer
            if it causes an error 3 out of 3 times.  Discard an exception
            caused inside a timer.
Files:      src/ex_cmds2.c, src/structs.h, src/testdir/test_timers.vim,
            runtime/doc/eval.txt

Patch 8.0.0703
Problem:    Illegal memory access with empty :doau command.
Solution:   Check the event for being out of range. (James McCoy)
Files:      src/testdir/test_autocmd.vim, src/fileio.c

Patch 8.0.0704
Problem:    Problems with autocommands when opening help.
Solution:   Avoid using invalid "varp" value.  Allow using :wincmd if buffer
            is locked. (closes #1806, closes #1804)
Files:      src/option.c, src/ex_cmds.h

Patch 8.0.0705 (after 8.0.0702)
Problem:    Crash when there is an error in a timer callback. (Aron Griffis,
            Ozaki Kiichi)
Solution:   Check did_throw before discarding an exception.  NULLify
            current_exception when no longer valid.
Files:      src/ex_eval.c, src/ex_cmds2.c

Patch 8.0.0706
Problem:    Crash when cancelling the cmdline window in Ex mode. (James McCoy)
Solution:   Do not set cmdbuff to NULL, make it empty.
Files:      src/ex_getln.c

Patch 8.0.0707
Problem:    Freeing wrong memory when manipulating buffers in autocommands.
            (James McCoy)
Solution:   Also set the w_s pointer if w_buffer was NULL.
Files:      src/ex_cmds.c

Patch 8.0.0708
Problem:    Some tests are old style.
Solution:   Change a few tests from old style to new style. (pschuh,
            closes #1813)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/main.aap,
            src/testdir/test23.in, src/testdir/test23.ok,
            src/testdir/test24.in, src/testdir/test24.ok,
            src/testdir/test26.in, src/testdir/test26.ok,
            src/testdir/test67.in, src/testdir/test67.ok,
            src/testdir/test75.in, src/testdir/test75.ok,
            src/testdir/test97.in, src/testdir/test97.ok,
            src/testdir/test_comparators.in, src/testdir/test_comparators.ok,
            src/testdir/test_comparators.vim,
            src/testdir/test_escaped_glob.vim,
            src/testdir/test_exec_while_if.vim,
            src/testdir/test_exists_autocmd.vim, src/testdir/test_getcwd.in,
            src/testdir/test_getcwd.ok, src/testdir/test_getcwd.vim,
            src/testdir/test_maparg.vim, src/testdir/test_plus_arg_edit.vim,
            src/testdir/test_regex_char_classes.vim

Patch 8.0.0709
Problem:    Libvterm cannot use vsnprintf(), it does not exist in C90.
Solution:   Use vim_vsnprintf() instead.
Files:      src/message.c, src/Makefile, src/proto.h, src/evalfunc.c,
            src/netbeans.c, src/libvterm/src/vterm.c

Patch 8.0.0710
Problem:    A job that writes to a buffer clears command line completion.
            (Ramel Eshed)
Solution:   Do not redraw while showing the completion menu.
Files:      src/screen.c

Patch 8.0.0711 (after 8.0.0710)
Problem:    Cannot build without the wildmenu feature.
Solution:   Add #ifdef
Files:      src/screen.c

Patch 8.0.0712
Problem:    The terminal implementation is incomplete.
Solution:   Add the 'termkey' option.
Files:      src/option.c, src/option.h, src/structs.h

Patch 8.0.0713 (after 8.0.0712)
Problem:    'termkey' option not fully implemented.
Solution:   Add initialisation.
Files:      src/option.c

Patch 8.0.0714
Problem:    When a timer causes a command line redraw the " that is displayed
            for CTRL-R goes missing.
Solution:   Remember an extra character to display.
Files:      src/ex_getln.c

Patch 8.0.0715
Problem:    Writing to the wrong buffer if the buffer that a channel writes to
            was closed.
Solution:   Do not write to a buffer that was unloaded.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_write.py

Patch 8.0.0716
Problem:    Not easy to start Vim cleanly without changing the viminfo file.
            Not possible to know whether the -i command line flag was used.
Solution:   Add the --clean command line argument.  Add the 'viminfofile'
            option.  Add "-u DEFAULTS".
Files:      src/main.c, runtime/doc/starting.txt, src/option.c, src/option.h,
            src/ex_cmds.c, src/globals.h, runtime/doc/options.txt

Patch 8.0.0717
Problem:    Terminal feature not included in :version output.
Solution:   Add +terminal or -terminal.
Files:      src/version.c, src/terminal.c

Patch 8.0.0718
Problem:    Output of job in terminal is not displayed.
Solution:   Connect the job output to the terminal.
Files:      src/channel.c, src/proto/channel.pro, src/terminal.c,
            src/proto/terminal.pro, src/channel.c, src/proto/channel.pro,
            src/evalfunc.c, src/screen.c, src/proto/screen.pro

Patch 8.0.0719
Problem:    Build failure without +terminal feature.
Solution:   Add #ifdefs.
Files:      src/screen.c, src/channel.c

Patch 8.0.0720
Problem:    Unfinished mapping not displayed when running timer.
Solution:   Also use the extra_char while waiting for a mapping and digraph.
            (closes #1844)
Files:      src/ex_getln.c

Patch 8.0.0721
Problem:    :argedit can only have one argument.
Solution:   Allow for multiple arguments. (Christian Brabandt)
Files:      runtime/doc/editing.txt, src/ex_cmds.h, src/ex_cmds2.c,
            src/testdir/test_arglist.vim

Patch 8.0.0722
Problem:    Screen is messed by timer up at inputlist() prompt.
Solution:   Set state to ASKMORE. (closes #1843)
Files:      src/misc1.c

Patch 8.0.0723 (after 8.0.0721)
Problem:    Arglist test fails if file name case is ignored.
Solution:   Wipe existing buffers, check for fname_case property.
Files:      src/testdir/test_arglist.vim

Patch 8.0.0724
Problem:    The message for yanking doesn't indicate the register.
Solution:   Show the register name in the "N lines yanked" message. (LemonBoy,
            closes #1803, closes #1809)
Files:      src/ops.c, src/Makefile, src/testdir/test_registers.vim,
            src/testdir/Make_all.mak

Patch 8.0.0725
Problem:    A terminal window does not handle keyboard input.
Solution:   Add terminal_loop().  ":term bash -i" sort of works now.
Files:      src/main.c, src/terminal.c, src/proto/terminal.pro, src/normal.c

Patch 8.0.0726
Problem:    Translations cleanup script is too conservative.
Solution:   Also delete untranslated messages.
Files:      src/po/cleanup.vim

Patch 8.0.0727
Problem:    Message about what register to yank into is not translated.
            (LemonBoy)
Solution:   Add _().
Files:      src/ops.c

Patch 8.0.0728
Problem:    The terminal structure is never freed.
Solution:   Free the structure and unreference what it contains.
Files:      src/terminal.c, src/buffer.c, src/proto/terminal.pro,
            src/channel.c, src/proto/channel.pro, src/evalfunc.c

Patch 8.0.0729
Problem:    The help for the terminal configure option is wrong.
Solution:   Change "Disable" to "Enable". (E Kawashima, closes #1849)
            Improve alignment.
Files:      src/configure.ac, src/auto/configure

Patch 8.0.0730
Problem:    Terminal feature only supports Unix-like systems.
Solution:   Prepare for adding an MS-Windows implementation.
Files:      src/terminal.c

Patch 8.0.0731
Problem:    Cannot build the terminal feature on MS-Windows.
Solution:   Add the Makefile changes. (Yasuhiro Matsumoto, closes #1851)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.0732
Problem:    When updating a buffer for a callback the modeless selection is
            lost.
Solution:   Do not insert or delete screen lines when redrawing for a callback
            and there is a modeless selection.
Files:      src/screen.c

Patch 8.0.0733
Problem:    Can only add entries to one list in the quickfix stack.
Solution:   Move state variables from qf_list_T to qf_list_T. (Yegappan
            Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.0734
Problem:    The script to check translations can be improved.
Solution:   Restore the view when no errors are found.  Check for matching
            line break at the end of the message. (Christian Brabandt)
Files:      src/po/check.vim

Patch 8.0.0735
Problem:    There is no way to notice that the quickfix window contents has
            changed.
Solution:   Increment b:changedtick when updating the quickfix window.
            (Yegappan Lakshmanan)
Files:      runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0736
Problem:    The OptionSet autocommand event is not triggered when entering
            diff mode.
Solution:   use set_option_value() instead of setting the option directly.
            Change the tests from old to new style. (Christian Brabandt)
Files:      src/diff.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_autocmd.vim, src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok

Patch 8.0.0737
Problem:    Crash when X11 selection is very big.
Solution:   Use static items instead of allocating them.  Add callbacks.
            (Ozaki Kiichi)
Files:      src/testdir/shared.vim, src/testdir/test_quotestar.vim,
            src/ui.c

Patch 8.0.0738
Problem:    Cannot use the mouse to resize window while the focus is in a
            terminal window.
Solution:   Recognize nice mouse events in the terminal window.  A few more
            fixes for the terminal window.
Files:      src/terminal.c

Patch 8.0.0739
Problem:    Terminal resizing doesn't work well.
Solution:   Resize the terminal to the Vim window and the other way around.
            Avoid mapping typed keys.  Set the environment properly.
Files:      src/terminal.c, src/os_unix.c, src/structs.h

Patch 8.0.0740
Problem:    Cannot resize a terminal window by the command running in it.
Solution:   Add support for the window size escape sequence.  Make BS work.
Files:      src/terminal.c, src/libvterm/src/state.c

Patch 8.0.0741
Problem:    Cannot build with HPUX.
Solution:   Rename envbuf_TERM to envbuf_Term. (John Marriott)
Files:      src/os_unix.c

Patch 8.0.0742
Problem:    Terminal feature does not work on MS-Windows.
Solution:   Use libvterm and libwinpty on MS-Windows. (Yasuhiro Matsumoto)
Files:      src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/channel.c,
            src/proto/channel.pro, src/terminal.c

Patch 8.0.0743
Problem:    The 'termsize' option can be set to an invalid value.
Solution:   Check the 'termsize' option to be valid.
Files:      src/option.c, src/testdir/gen_opt_test.vim

Patch 8.0.0744
Problem:    A terminal window uses pipes instead of a pty.
Solution:   Add pty support.
Files:      src/structs.h, src/os_unix.c, src/terminal.c, src/channel.c,
            src/proto/os_unix.pro, src/os_win32.c, src/proto/os_win32.pro

Patch 8.0.0745
Problem:    multibyte characters in a terminal window are not displayed
            properly.
Solution:   Set the unused screen characters. (Yasuhiro Matsumoto, closes
            #1857)
Files:      src/terminal.c

Patch 8.0.0746
Problem:    When :term fails the job is not properly cleaned up.
Solution:   Free the terminal. Handle a job that failed to start. (closes
            #1858)
Files:      src/os_unix.c, src/channel.c, src/terminal.c

Patch 8.0.0747
Problem:    :terminal without an argument doesn't work.
Solution:   Use the 'shell' option. (Yasuhiro Matsumoto, closes #1860)
Files:      src/terminal.c

Patch 8.0.0748
Problem:    When running Vim in a terminal window it does not detect the right
            number of colors available.
Solution:   Detect the version string that libvterm returns.  Pass the number
            of colors in $COLORS.
Files:      src/term.c, src/os_unix.c

Patch 8.0.0749
Problem:    Some unicode digraphs are hard to remember.
Solution:   Add alternatives with a backtick. (Chris Harding, closes #1861)
Files:      src/digraph.c

Patch 8.0.0750
Problem:    OpenPTY missing in non-GUI build.
Solution:   Always include pty.c, add an #ifdef to skip over the contents.
Files:      src/pty.c, src/Makefile

Patch 8.0.0751 (after 8.0.0750)
Problem:    OpenPTY missing with some combination of features. (Kazunobu
            Kuriyama)
Solution:   Adjust #ifdef.  Also include pty.pro when needed.
Files:      src/pty.c, src/misc2.c, src/proto.h

Patch 8.0.0752
Problem:    Build fails on MS-Windows.
Solution:   Change #ifdef for set_color_count().
Files:      src/term.c

Patch 8.0.0753
Problem:    A job running in a terminal does not get notified of changes in
            the terminal size.
Solution:   Use ioctl() and SIGWINCH to report the terminal size.
Files:      src/terminal.c, src/os_unix.c, src/proto/os_unix.pro

Patch 8.0.0754
Problem:    Terminal window does not support colors.
Solution:   Lookup the color attribute.
Files:      src/terminal.c, src/syntax.c, src/proto/syntax.pro

Patch 8.0.0755
Problem:    Terminal window does not have colors in the GUI.
Solution:   Lookup the GUI color.
Files:      src/terminal.c, src/syntax.c, src/proto/syntax.pro, src/term.c,
            src/proto/term.pro, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_x11.c, src/proto/gui_x11.pro, src/gui_mac.c,
            src/proto/gui_mac.pro, src/gui_photon.c, src/proto/gui_photon.pro,
            src/gui_w32.c, src/proto/gui_w32.pro,

Patch 8.0.0756
Problem:    Cannot build libvterm with MSVC.
