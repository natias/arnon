Patch 8.1.2283
Problem:    Missed one use of p_sbr.
Solution:   Add missing p_sbr change.
Files:	    src/indent.c

Patch 8.1.2284
Problem:    Compiler warning for unused variable. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/move.c

Patch 8.1.2285
Problem:    Padding in structures wastes memory.
Solution:   Move fields to avoid padding. (Dominique Pelle, closes #5202)
Files:	    src/structs.h

Patch 8.1.2286
Problem:    Using border highlight in popup window leaks memory.
Solution:   Free memory before overwriting. (Dominique Pelle, closes #5203)
Files:	    src/popupwin.c

Patch 8.1.2287
Problem:    Using EndOfBuffer highlight in popup does not look good.
Solution:   Do not EndOfBuffer highlight. (closes #5204)
Files:	    src/drawscreen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_02.dump,
            src/testdir/dumps/Test_popupwin_04.dump,
            src/testdir/dumps/Test_popupwin_04a.dump,
            src/testdir/dumps/Test_popupwin_05.dump,
            src/testdir/dumps/Test_popupwin_06.dump,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_08.dump

Patch 8.1.2288
Problem:    Not using all space when popup with "topleft" flips to above.
Solution:   Recompute the height when a popup flips from below to above.
            (closes #5151)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_nospace.dump

Patch 8.1.2289
Problem:    After :diffsplit closing the window does not disable diff.
Solution:   Add "closeoff" to 'diffopt' and add it to the default.
Files:	    runtime/doc/options.txt, src/optiondefs.h, src/diff.c,
            src/proto/diff.pro, src/window.c, src/testdir/test_diffmode.vim

Patch 8.1.2290
Problem:    Autocommand test fails.
Solution:   Remove 'closeoff' from 'diffopt'.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2291
Problem:    Memory leak when executing command in a terminal.
Solution:   Free "argv". (Dominique Pelle, closes #5208)
Files:	    src/terminal.c

Patch 8.1.2292
Problem:    v:mouse_winid not set on click in popup window.
Solution:   Set v:mouse_winid. (closes #5171)
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.2293
Problem:    Join adds trailing space when second line is empty. (Brennan
            Vincent)
Solution:   Do not add a trailing space.
Files:	    src/ops.c, src/testdir/test_join.vim

Patch 8.1.2294
Problem:    Cursor position wrong when characters are concealed and a search
            causes a scroll.
Solution:   Fix the cursor column in a concealed line after window scroll.
            (closes #5215, closes #5012)
Files:	    src/drawscreen.c, src/testdir/test_matchadd_conceal.vim

Patch 8.1.2295
Problem:    If buffer of popup is in another window cursorline sign shows.
Solution:   Check the group of the sign.
Files:	    src/option.c, src/proto/option.pro, src/sign.c,
            src/proto/sign.pro, src/screen.c, src/drawline.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_cursorline_8.dump

Patch 8.1.2296
Problem:    Text properties are not combined with syntax by default.
Solution:   Make it work as documented. (closes #5190)
Files:	    src/testprop.c, src/testdir/test_textprop.vim

Patch 8.1.2297
Problem:    The ex_vimgrep() function is too long.
Solution:   Split it in three parts. (Yegappan Lakshmanan, closes #5211)
Files:	    src/quickfix.c

Patch 8.1.2298 (after 8.1.2296)
Problem:    Missing part of 8.1.2296.
Solution:   s/test/text/
Files:	    src/textprop.c

Patch 8.1.2299
Problem:    ConPTY in MS-Windows 1909 is still wrong.
Solution:   Use same solution as for 1903. (Nobuhiro Takasaki, closes #5217)
Files:	    src/misc2.c, src/os_win32.c

Patch 8.1.2300
Problem:    Redraw breaks going through list of popup windows.
Solution:   Use different flags for popup_reset_handled(). (closes #5216)
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/vim.h,
            src/mouse.c, src/testdir/test_popupwin.vim

Patch 8.1.2301
Problem:    MS-Windows GUI: drawing error when background color changes.
Solution:   Implement gui_mch_new_colors(). (Simon Sadler)
Files:	    src/gui_w32.c

Patch 8.1.2302
Problem:    :lockmarks does not work for '[ and '].
Solution:   save and restore '[ and '] marks. (James McCoy, closes #5222)
Files:	    runtime/doc/motion.txt, src/bufwrite.c, src/diff.c, src/ex_cmds.c,
            src/fileio.c, src/indent.c, src/ops.c, src/register.c,
            src/testdir/test_autocmd.vim, src/testdir/test_diffmode.vim

Patch 8.1.2303
Problem:    Cursor in wrong position after horizontal scroll.
Solution:   Set w_valid_leftcol.  (closes #5214, closes #5224)
Files:	    src/move.c, src/testdir/test_matchadd_conceal.vim

Patch 8.1.2304
Problem:    Cannot get the mouse position when getting a mouse click.
Solution:   Add getmousepos().
Files:	    runtime/doc/eval.txt, runtime/doc/popup.txt, src/mouse.c
            src/proto/mouse.pro, src/evalfunc.c, src/popupwin.c,
            src/popupwin.pro, src/testdir/test_popupwin.vim,
            src/testdir/test_functions.vim

Patch 8.1.2305
Problem:    No warning for wrong entry in translations.
Solution:   Check semicolons in keywords entry of desktop file.
Files:	    src/po/check.vim

Patch 8.1.2306
Problem:    Double and triple clicks are not tested.
Solution:   Test mouse clicks to select text. (closes #5226)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2307
Problem:    Positioning popup doesn't work for buffer-local textprop.
Solution:   Make it work. (closes #5225)
Files:	    src/popupwin.c, src/testdir/test_popupwin_textprop.vim

Patch 8.1.2308
Problem:    Deleting text before zero-width textprop removes it.
Solution:   Keep zero-width textprop when deleting text.
Files:	    src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.2309
Problem:    Compiler warning for argument type.
Solution:   Use linenr_T and cast to varnumber_T. (John Marriott)
Files:	    src/mouse.c

Patch 8.1.2310
Problem:    No proper test for directory changes in quickfix.
Solution:   Add a test that uses multiple directories. (Yegappan Lakshmanan,
            closes #5230)
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.2311
Problem:    Warning for missing function prototype.
Solution:   Add the proto. (Dominique Pelle, closes #5233)
Files:	    src/proto/popupwin.pro

Patch 8.1.2312
Problem:    "line:" field in tags file not used.
Solution:   Recognize the field and use the value. (Andy Massimino, Daniel
            Hahler, closes #5232, closes #2546, closes #1057)
Files:	    src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.2313
Problem:    Debugging where a delay comes from is not easy.
Solution:   Use different values when calling ui_delay().
Files:	    src/buffer.c, src/change.c, src/fileio.c, src/gui.c,
            src/if_xcmdsrv.c, src/insexpand.c, src/main.c, src/normal.c,
            src/screen.c, src/search.c, src/tag.c, src/term.c, src/ui.c

Patch 8.1.2314
Problem:    vi' sometimes does not select anything.
Solution:   Recognize an empty selection. (Christian Brabandt, closes #5183)
Files:	    src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.2315
Problem:    Not always using the right window when jumping to an error.
Solution:   Add the "uselast" flag in 'switchbuf'. (closes #1652)
Files:	    runtime/doc/options.txt, src/option.h, src/optionstr.c,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2316
Problem:    FORTIFY_SOURCE can also be present in CPPFLAGS.
Solution:   Remove it in configure. (Benedikt Morbach, closes #2786)
Files:	    src/configure.ac, src/auto/configure

Patch 8.1.2317
Problem:    No test for spell affix file with flag on suffix.
Solution:   Add a test case.
Files:	    src/testdir/test_spell.vim

Patch 8.1.2318 (after 8.1.2301)
Problem:    MS-Windows GUI: main background shows in toolbar.
Solution:   Remove transparency from the toolbar. (Simon Sadler)
Files:	    src/gui_w32.c

Patch 8.1.2319
Problem:    Compiler warning for int size.
Solution:   Add typecast. (Mike Williams)
Files:	    src/mouse.c

Patch 8.1.2320
Problem:    Insufficient test coverage for quickfix.
Solution:   Add more tests.  Fix uncovered problem. (Yegappan Lakshmanan,
            closes #5238)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2321
Problem:    Cannot select all text with the mouse. (John Marriott)
Solution:   Move limiting the mouse column to f_getmousepos(). (closes #5242)
Files:	    src/mouse.c

Patch 8.1.2322 (after 8.1.2320)
Problem:    Quickfix test fails in very big terminal.
Solution:   Adjust the expected result for the width. (Masato Nishihata,
            closes #5244)
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.2323
Problem:    Old MSVC version no longer tested.
Solution:   Drop support for MSVC 2008 and older. (Ken Takata, closes #5248)
Files:	    src/INSTALLpc.txt, src/Make_mvc.mak, src/gui_w32.c, src/os_win32.c

Patch 8.1.2324
Problem:    Width of scrollbar in popup menu not taken into account.
Solution:   Add the width of the scrollbar.
Files:	    src/popupmenu.c, src/testdir/dumps/Test_popupwin_infopopup_6.dump,
            src/testdir/test_popupwin.vim

Patch 8.1.2325
Problem:    Crash when using balloon with empty line.
Solution:   Handle empty lines. (Markus Braun)
Files:	    src/popupmenu.c, src/testdir/test_popup.vim

Patch 8.1.2326
Problem:    Cannot parse a date/time string.
Solution:   Add strptime(). (Stephen Wall, closes #5250)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/auto/configure,
            src/config.h.in, src/configure.ac, src/evalfunc.c, src/os_unix.h,
            src/testdir/test_functions.vim

Patch 8.1.2327
Problem:    Cannot build with Hangul input.
Solution:   Remove Hangul input support.
Files:	    Filelist, src/Makefile, runtime/doc/hangulin.txt, src/feature.h,
            src/gui_gtk_x11.c, src/gui_x11.c, src/gui.c, src/edit.c,
            src/mbyte.c, src/screen.c, src/ui.c, src/hangulin.c,
            src/globals.h, src/proto/hangulin.pro, src/proto.h,
            src/evalfunc.c, src/version.c, src/configure.ac,
            src/auto/configure, src/config.h.in, src/config.mk.in

Patch 8.1.2328
Problem:    A few hangul input pieces remain.
Solution:   Update VMS makefile.
Files:	    src/Make_vms.mms

Patch 8.1.2329
Problem:    Mouse multiple click test is a bit flaky.
Solution:   Add it to the list of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.2330 (after 8.1.2314)
Problem:    vi' does not always work when 'selection' is exclusive.
Solution:   Adjust start position.
Files:	    src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.2331
Problem:    The option.c file is still very big.
Solution:   Move a few functions to where they fit better. (Yegappan
            Lakshmanan, closes #4895)
Files:	    src/option.c, src/proto/option.pro, src/change.c,
            src/proto/change.pro, src/ex_getln.c, src/proto/ex_getln.pro,
            src/globals.h, src/gui.c, src/proto/gui.pro, src/ui.c,
            src/proto/ui.pro, src/term.c, src/proto/term.pro, src/indent.c,
            src/proto/indent.pro

Patch 8.1.2332 (after 8.1.2331)
Problem:    Missing file in refactoring.
Solution:   Update missing file.
Files:	    src/search.c

Patch 8.1.2333
Problem:    With modifyOtherKeys CTRL-^ doesn't work.
Solution:   Handle the exception.
Files:	    src/getchar.c, src/testdir/test_termcodes.vim

Patch 8.1.2334
Problem:    Possible NULL pointer dereference in popup_locate(). (Coverity)
Solution:   Check for NULL pointer.
Files:	    src/popupwin.c

Patch 8.1.2335
Problem:    Error message for function arguments may use NULL pointer.
            (Coverity)
Solution:   Use the original function name.
Files:	    src/evalfunc.c

Patch 8.1.2336
Problem:    When an expr mapping moves the cursor it is not restored.
Solution:   Position the cursor after an expr mapping. (closes #5256)
Files:	    src/getchar.c, src/testdir/test_mapping.vim,
            src/testdir/dumps/Test_map_expr_1.dump

Patch 8.1.2337
Problem:    Double-click time sometimes miscomputed.
Solution:   Correct time computation. (Dominique Pelle, closes #5259)
Files:	    src/mouse.c, src/testdir/runtest.vim

Patch 8.1.2338
Problem:    Using Visual mark with :s gives E20 if not set.
Solution:   Ignore errors when handling 'incsearch'. (closes #3837)
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_14.dump

Patch 8.1.2339
Problem:    Insufficient testing for quickfix.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #5261)
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.2340
Problem:    Quickfix test fails under valgrind and asan.
Solution:   Make sure long line does not overflow IObuff. (Dominique Pelle,
            closes #5263)  Put back fix for large terminals. (Yegappan
            Lakshmanan, closes #5264)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2341
Problem:    Not so easy to interrupt a script programmatically.
Solution:   Add the interrupt() function. (Yasuhiro Matsumoto, closes #2834)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/ex_eval.c,
            src/testdir/Make_all.mak, src/testdir/test_interrupt.vim

Patch 8.1.2342
Problem:    Random number generator in Vim script is slow.
Solution:   Add rand() and srand(). (Yasuhiro Matsumoto, closes #1277)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/Make_all.mak,
            src/testdir/test_random.vim

Patch 8.1.2343
Problem:    Using time() for srand() is not very random.
Solution:   use /dev/urandom if available
Files:	    src/evalfunc.c, src/testdir/test_random.vim

Patch 8.1.2344
Problem:    Cygwin: warning for using strptime().
Solution:   Move defining _XOPEN_SOURCE and __USE_XOPEN to vim.h. (Ken Takata,
            closes #5265)  Use 700 for _XOPEN_SOURCE for mkdtemp().
Files:	    src/os_unix.h, src/vim.h

Patch 8.1.2345
Problem:    .cjs files are not recognized as Javascript.
Solution:   Add the *.cjs pattern. (closes #5268)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.2346
Problem:    CTRL-R CTRL-R doesn't work with modifyOtherKeys.
Solution:   Allow key codes when fetching argument for CTRL-R. (closes #5266)
            Also fix CTRL-G in Insert mode.
Files:	    src/edit.c, src/ex_getln.c, src/testdir/test_termcodes.vim

Patch 8.1.2347 (after 8.1.2344)
Problem:    macOS: build fails.
Solution:   Don't define _XOPEN_SOURCE for Mac.
Files:	    src/vim.h

Patch 8.1.2348
Problem:    :const cannot be followed by "| endif".
Solution:   Check following command for :const. (closes #5269)
            Also fix completion after :const.
Files:	    src/testdir/test_let.vim, src/testdir/test_const.vim,
            src/ex_docmd.c, src/cmdexpand.c, src/eval.c,
            src/testdir/test_cmdline.vim

Patch 8.1.2349
Problem:    :lockvar and :unlockvar cannot be followed by "| endif".
Solution:   Check for following commands. (closes #5269)
Files:	    src/testdir/test_const.vim, src/ex_docmd.c

Patch 8.1.2350
Problem:    Other text for CTRL-V in Insert mode with modifyOtherKeys.
Solution:   Convert the Escape sequence back to key as if modifyOtherKeys is
            not set, and use CTRL-SHIFT-V to get the Escape sequence itself.
            (closes #5254)
Files:	    runtime/doc/insert.txt, runtime/doc/cmdline.txt, src/edit.c,
            src/proto/edit.pro, src/term.c, src/proto/term.pro, src/getchar.c,
            src/proto/getchar.pro, src/testdir/test_termcodes.vim,
            src/ex_getln.c

Patch 8.1.2351
Problem:    'wincolor' not used for > for not fitting double width char.
            Also: popup drawn on right half of double width character looks
            wrong.
Solution:   Adjust color for > character.  Clear left half of double width
            character if right half is being overwritten.
Files:	    src/drawline.c, src/screen.c,
            src/testdir/dumps/Test_popupwin_doublewidth_1.dump

Patch 8.1.2352
Problem:    CI doesn't cover FreeBSD.
Solution:   Configure Cirrus-CI. (Christian Brabandt, closes #5273)
Files:	    .cirrus.yml, README.md

Patch 8.1.2353
Problem:    Build failure on FreeBSD.
Solution:   Change #ifdef to only check for Linux-like systems.
Files:	    src/vim.h

Patch 8.1.2354
Problem:    Cirrus CI runs on another repository.
Solution:   Run Cirrus CI on vim/vim.
Files:	    .cirrus.yml, README.md

Patch 8.1.2355
Problem:    Test with "man" fails on FreeBSD.
Solution:   Use "-P" instead of "--pager".
Files:	    src/testdir/test_normal.vim

Patch 8.1.2356
Problem:    rand() does not use the best algorithm.
Solution:   use xoshiro128** instead of xorshift. (Kaito Udagawa,
            closes #5279)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_random.vim

Patch 8.1.2357
Problem:    No test with wrong argument for rand().
Solution:   Add a test case.
Files:	    src/testdir/test_random.vim

Patch 8.1.2358
Problem:    Tests fail on Cirrus CI for FreeBSD.
Solution:   Fix a test and skip some. (Christian Brabandt, closes #5281)
Files:	    Filelist, .cirrus.yml, src/testdir/check.vim,
            src/testdir/test_normal.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_source_utf8.vim, src/testdir/test_terminal.vim,
            src/testdir/test_utf8_comparisons.vim

Patch 8.1.2359
Problem:    Cannot build without FEAT_FLOAT. (John Marriott)
Solution:   Fix #ifdefs around f_srand().
Files:	    src/evalfunc.c

Patch 8.1.2360
Problem:    Quickfix test coverage can still be improved.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #5276)
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.2361
Problem:    MS-Windows: test failures related to VIMDLL.
Solution:   Adjust code and tests. (Ken Takata, closes #5283)
Files:	    src/evalfunc.c, src/ex_cmds.c, src/gui_w32.c, src/mbyte.c,
            src/menu.c, src/proto.h, src/testdir/test_highlight.vim

Patch 8.1.2362
Problem:    Cannot place signs in a popup window. (Maxim Kim)
Solution:   Use the group prefix "PopUp" to specify which signs should show up
            in a popup window. (closes #5277)
Files:	    runtime/doc/sign.txt, src/popupwin.c, src/sign.c,
            src/testdir/dumps/Test_popupwin_sign_1.dump

Patch 8.1.2363
Problem:    ml_get error when accessing Visual area in 'statusline'.
Solution:   Disable Visual mode when using another window. (closes #5278)
Files:	    src/testdir/test_statusline.vim, src/buffer.c

Patch 8.1.2364
Problem:    Termwinscroll test is flaky on FreeBSD.
Solution:   Add to list of flaky tests.  Rename function.
Files:	    src/testdir/runtest.vim, src/testdir/test_terminal.vim

Patch 8.1.2365
Problem:    Missing tests for recent popupwin changes.
Solution:   Add test cases.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.2366
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/ascii.h, src/beval.h, src/dosinst.h, src/feature.h,
            src/glbl_ime.h, src/globals.h, src/gui_at_sb.h, src/gui_gtk_f.h,
            src/gui_gtk_vms.h, src/gui.h, src/gui_x11_pm.h, src/gui_xmebwp.h,
            src/if_cscope.h, src/if_mzsch.h, src/if_ole.h, src/if_py_both.h,
            src/iscygpty.h, src/keymap.h, src/macros.h, src/nbdebug.h,
            src/option.h, src/os_amiga.h, src/os_beos.h, src/os_dos.h,
            src/os_mac.h, src/os_qnx.h, src/os_unix.h, src/os_unixx.h,
            src/os_vms_conf.h, src/os_win32.h, src/proto.h, src/regexp.h,
            src/spell.h, src/structs.h, src/term.h, src/version.h, src/vimio.h

Patch 8.1.2367
Problem:    Registers are not sufficiently tested.
Solution:   Add a few more test cases. (Yegappan Lakshmanan, closes #5288)
Files:	    src/testdir/test_registers.vim

Patch 8.1.2368
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/autocmd.c, src/beval.c, src/blob.c, src/blowfish.c,
            src/buffer.c, src/change.c, src/channel.c, src/charset.c,
            src/cindent.c, src/crypt.c, src/crypt_zip.c

Patch 8.1.2369
Problem:    Cannot build with quickfix and without text properties.
Solution:   Fix typo. (Naruhiko Nishino)
Files:	    src/popupmenu.c

Patch 8.1.2370
Problem:    Build problems on VMS.
Solution:   Adjust the build file. (Zoltan Arpadffy)
Files:	    src/Make_vms.mms, src/os_unix.c, src/os_vms.c

Patch 8.1.2371
Problem:    FEAT_TEXT_PROP is a confusing name.
Solution:   Use FEAT_PROP_POPUP. (Naruhiko Nishino, closes #5291)
Files:	    runtime/doc/popup.txt, src/beval.c, src/buffer.c, src/change.c,
            src/drawline.c, src/drawscreen.c, src/edit.c, src/eval.c,
            src/evalbuffer.c, src/evalfunc.c, src/evalwindow.c, src/ex_cmds.c,
            src/ex_docmd.c, src/feature.h, src/fileio.c, src/getchar.c,
            src/globals.h, src/gui.c, src/gui_w32.c, src/indent.c,
            src/insexpand.c, src/macros.h, src/main.c, src/memline.c,
            src/misc2.c, src/mouse.c, src/move.c, src/ops.c, src/option.h,
            src/optiondefs.h, src/optionstr.c, src/popupmenu.c,
            src/popupwin.c, src/proto.h, src/screen.c, src/search.c,
            src/sign.c, src/structs.h, src/tag.c, src/testdir/runtest.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_popupwin_textprop.vim, src/textprop.c, src/ui.c,
            src/version.c, src/vim.h, src/window.c

Patch 8.1.2372
Problem:    VMS: failing realloc leaks memory. (Chakshu Gupta)
Solution:   Free the memory. (partly fixes #5292)
Files:	    src/os_vms.c

Patch 8.1.2373
Problem:    Cannot build with +popupwin but without +quickfix. (John Marriott)
Solution:   Adjust #ifdefs.
Files:	    src/ex_cmds.c, src/popupmenu.c, src/popupwin.c, src/fileio.c,
            src/testdir/test_compiler.vim, src/testdir/test_tagjump.vim,
            src/testdir/test86.in, src/testdir/test87.in,
            src/testdir/test_autocmd.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_channel.vim, src/testdir/test_edit.vim,
            src/testdir/test_execute_func.vim,
            src/testdir/test_filter_cmd.vim, src/testdir/test_gui.vim,
            src/testdir/test_makeencoding.vim, src/testdir/test_mksession.vim,
            src/testdir/test_normal.vim, src/testdir/test_popup.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_preview.vim,
            src/testdir/test_startup.vim, src/testdir/test_statusline.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_window_cmd.vim,
            src/testdir/test_window_id.vim

Patch 8.1.2374
Problem:    Unused parts of libvterm are included.
Solution:   Delete the unused files.
Files:	    Filelist, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-dump.c

Patch 8.1.2375
Problem:    No sufficient testing for registers.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #5296)
            Fix that "p" on last virtual column of tab inserts spaces.
Files:	    src/register.c, src/testdir/test_registers.vim,
            src/testdir/test_virtualedit.vim, src/testdir/test_visual.vim

Patch 8.1.2376
Problem:    Preprocessor indents are incorrect.
Solution:   Fix the indents. (Ken Takata, closes #5298)
Files:	    src/drawline.c, src/gui_w32.c, src/os_mswin.c, src/os_win32.c,
	    src/proto.h

Patch 8.1.2377
Problem:    GUI: when losing focus a pending operator is executed.
Solution:   Do not execute an operator when getting K_IGNORE. (closes #5300)
Files:	    src/normal.c

Patch 8.1.2378
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/dict.c, src/diff.c, src/digraph.c, src/dosinst.c, src/edit.c,
            src/eval.c, src/evalbuffer.c, src/evalfunc.c

Patch 8.1.2379
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/ex_getln.c, src/fileio.c, src/filepath.c, src/findfile.c,
            src/fold.c

Patch 8.1.2380
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/getchar.c, src/gui.c, src/gui_at_fs.c, src/gui_at_sb.c,
            src/gui_athena.c, src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_x11.c

Patch 8.1.2381
Problem:    Not all register related code is covered by tests.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #5301)
Files:	    src/testdir/test_marks.vim, src/testdir/test_registers.vim,
            src/testdir/test_virtualedit.vim

Patch 8.1.2382
Problem:    MS-Windows: When using VTP bold+inverse doesn't work.
Solution:   Compare with the default colors. (Nobuhiro Takasaki, closes #5303)
Files:	    src/os_win32.c, src/proto/os_win32.pro, src/screen.c

Patch 8.1.2383
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/gui_mac.c, src/gui_motif.c, src/gui_photon.c, src/gui_w32.c,
            src/gui_x11.c, src/gui_xmdlg.c, src/gui_xmebw.c

Patch 8.1.2384
Problem:    Test 48 is old style.
Solution:   Merge test cases into new style test. (Yegappan Lakshmanan,
            closes #5307)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test48.in, src/testdir/test48.ok,
            src/testdir/test_virtualedit.vim

Patch 8.1.2385
Problem:    Opening cmdline window with feedkeys() does not work. (Yegappan
            Lakshmanan)
Solution:   Recognize K_CMDWIN also when ex_normal_busy is set.
Files:	    src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.1.2386
Problem:    'wincolor' is not used for 'listchars'.
Solution:   Combine the colors. (closes #5308)
Files:	    src/drawline.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_wincolor_lcs.dump

Patch 8.1.2387
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/hardcopy.c, src/hashtab.c, src/if_cscope.c, src/if_lua.c,
            src/if_mzsch.c, src/if_perlsfio.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/if_xcmdsrv.c

Patch 8.1.2388
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/json.c, src/json_test.c, src/kword_test.c, src/list.c,
            src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memfile_test.c, src/memline.c, src/menu.c

Patch 8.1.2389
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/libvterm/src/screen.c, src/libvterm/src/unicode.c,
            src/libvterm/src/vterm.c, src/libvterm/t/harness.c,
            src/libvterm/include/vterm.h, src/xdiff/xdiffi.c,
            src/xdiff/xemit.c, src/xdiff/xhistogram.c, src/xdiff/xpatience.c,
            src/xdiff/xutils.c, src/xdiff/xdiff.h, src/xdiff/xdiffi.h,
            src/xdiff/xemit.h, src/xdiff/xinclude.h, src/xdiff/xmacros.h,
            src/xdiff/xprepare.h, src/xdiff/xtypes.h, src/xdiff/xutils.h

Patch 8.1.2390
Problem:    Test94 is old style, fix 7.4.441 not tested.
Solution:   Turn test94 into a new style test.  Add tests for the fix in patch
            7.4.441. (Yegappan Lakshmanan, closes #5316)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test94.in, src/testdir/test94.ok,
            src/testdir/test_cmdline.vim, src/testdir/test_visual.vim

Patch 8.1.2391
Problem:    Cannot build when __QNXNTO__ is defined. (Ian Wayne Larson)
Solution:   Move the check for "qansi". (Ken Takata, closes #5317)
Files:	    src/highlight.c

Patch 8.1.2392
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/nbdebug.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c

Patch 8.1.2393
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/os_amiga.c, src/os_beos.c, src/os_mac_conv.c, src/os_mswin.c,
            src/os_qnx.c, src/os_unix.c, src/os_vms.c, src/os_win32.c

Patch 8.1.2394
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/popupmenu.c, src/pty.c, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/sha256.c,
            src/sign.c

Patch 8.1.2395
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/spell.c, src/spellfile.c, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/termlib.c, src/testing.c

Patch 8.1.2396
Problem:    Using old C style comments.
Solution:   Use // comments where appropriate.
Files:	    src/ui.c, src/undo.c, src/uninstall.c, src/usercmd.c,
            src/userfunc.c, src/winclip.c, src/window.c, src/xpm_w32.c

Patch 8.1.2397
Problem:    Should not define __USE_XOPEN. _XOPEN_SOURCE is not needed for
            Android.
Solution:   Remove __USE_XOPEN and adjust #ifdefs. (Ozaki Kiichi,
            closes #5322)
Files:	    src/vim.h

Patch 8.1.2398
Problem:    strptime() test fails on Japanese Mac.
Solution:   Use %T instead of %X.
Files:	    src/testdir/test_functions.vim

Patch 8.1.2399
Problem:    Info popup on top of cursor if it doesn't fit.
Solution:   Hide the popup if it doesn't fit.
Files:	    src/popupmenu.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_wide_1.dump

Patch 8.1.2400
Problem:    Test39 is old style.
Solution:   Convert the test cases into new style. (Yegappan Lakshmanan,
            closes #5324)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test39.in, src/testdir/test39.ok,
            src/testdir/test_blockedit.vim, src/testdir/test_visual.vim

Patch 8.1.2401
Problem:    :cexpr does not handle | in expression.
Solution:   Remove EX_TRLBAR and set nextcmd pointer.
Files:	    src/testdir/test_quickfix.vim, src/ex_cmds.h, src/quickfix.c

Patch 8.1.2402
Problem:    Typos and other small things.
Solution:   Small fixes.
Files:	    .gitignore, src/testdir/shared.vim, src/testdir/test49.vim,
            src/message.c, src/Makefile

Patch 8.1.2403
Problem:    Autocmd test fails under valgrind.
Solution:   Wait a bit longer.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2404
Problem:    Channel test fails under valgrind.
Solution:   Sleep a bit longer.
Files:	    src/testdir/test_channel.vim

Patch 8.1.2405
Problem:    matchadd_conceal test fails under valgrind.
Solution:   Use WaitForAssert() and wait a bit longer.
Files:	    src/testdir/test_matchadd_conceal.vim

Patch 8.1.2406
Problem:    Leaking memory in test_paste and test_registers.
Solution:   Free the old title.  Don't copy expr_line.
Files:	    src/term.c, src/os_unix.c, src/register.c

Patch 8.1.2407
Problem:    proto file and dependencies outdated.
Solution:   Update proto files and dependencies.
Files:	    src/Makefile, src/proto/bufwrite.pro, src/proto/cmdhist.pro,
            src/proto/optionstr.pro, src/proto/popupwin.pro,
            src/proto/viminfo.pro, src/proto/if_cscope.pro

Patch 8.1.2408
Problem:    Syntax menu and build instructions outdated.
Solution:   Update build instructions and syntax menu.
Files:	    Makefile, runtime/makemenu.vim, runtime/synmenu.vim

Patch 8.1.2409
Problem:    Creating the distribution doesn't work as documented.
Solution:   Adjust name of uninstall binary. Create src/auto directory if
            needed.
Files:	    tools/rename.bat, src/Make_mvc.mak

Patch 8.1.2410
Problem:    MS-Windows: test_iminsert fails without IME support.
Solution:   Skip the test when imgetstatus() doesn't work.
Files:	    src/testdir/test_iminsert.vim

Patch 8.1.2411
Problem:    Function argument copied unnecessarily.
Solution:   Use the argument directly.
Files:	    src/ex_docmd.c

Patch 8.1.2412
Problem:    Crash when evaluating expression with error. (Dhiraj Mishra)
Solution:   Check parsing failed. (closes #5329)
Files:	    src/eval.c, src/testdir/test_lambda.vim

Patch 8.1.2413
Problem:    Cannot update ex_cmdidxs.h on MS-Windows.
Solution:   Add build rules and dependencies. (Ken Takata, closes #5337)
Files:	    src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Make_vms.mms

Patch 8.1.2414
Problem:    MS-Windows: properties dialog box shows wrong character.
Solution:   Explicitly specify encoding. (Ken Takata, closes #5338)
Files:	    src/vim.rc

Patch 8.1.2415
Problem:    Popup menu flickers if an info popup is used. (Nick Jensen)
Solution:   Set the pum_skip_redraw flag.
Files:	    src/popupmenu.c

Patch 8.1.2416
Problem:    Loading menus sets v:errmsg.
Solution:   Avoid setting v:errmsg and add a test for that. (Jason Franklin)
Files:	    runtime/delmenu.vim, runtime/menu.vim, src/testdir/test_menu.vim

Patch 8.1.2417
Problem:    MinGW/Cygwin build does not clean up all files.
Solution:   Delete *.map files. (Michael Soyka)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.2418
Problem:    bufnr('$') is wrong after recycling popup buffer.
Solution:   Sort the buffer list by buffer number. (closes #5335)
Files:	    src/buffer.c, src/testdir/test_popupwin.vim

Patch 8.1.2419
Problem:    With a long file name the hit-enter prompt appears. (J. Lewis
            Muir)
Solution:   When checking for text to wrap don't do this when outputting a CR.
Files:	    src/message.c, src/testdir/test_display.vim,
            src/testdir/dumps/Test_long_file_name_1.dump

Patch 8.1.2420
Problem:    Crash when calling popup_close() in win_execute().
Solution:   Disallow popup_close() in popup window. (Yasuhiro Matsumoto,
            closes #5345)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.2421
Problem:    Test88 is old style.
Solution:   Turn into a new style test. (Yegappan Lakshmanan, closes #5347)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test88.in, src/testdir/test88.ok,
            src/testdir/test_conceal.vim, src/testdir/test_python2.vim
            src/testdir/test_python3.vim

Patch 8.1.2422
Problem:    "make depend" does not work correctly for libvterm.
Solution:   Fix build dependencies. And a few minor improvements.
Files:	    src/Makefile, src/filepath.c, src/insexpand.c, src/main.c

Patch 8.1.2423
Problem:    MS-Windows properties shows version as "8, 1, 0".
Solution:   Use "8.1.0". (Ken Takata, closes #5342)
Files:	    src/vim.rc

Patch 8.1.2424
Problem:    MS-Windows: console buffer is resized unnecessarily.
Solution:   Only call ResizeConBuf() when the size differs. (Nobuhiro
            Takasaki, closes #5343)
Files:	    src/os_win32.c

==============================================================================

Patch 8.2.0001 and later can be found at |patches-after-8.2|.


 vim:tw=78:ts=8:noet:ft=help:norl:
                                                                                                                                                    usr/share/vim/vim90/doc/version9.txt                                                                0000644 0000000 0000000 00004670123 14424703754 016031  0                                                                                                    ustar 00                                                                0000000 0000000                                                                                                                                                                        *version9.txt*  For Vim version 9.0.  Last change: 2022 Nov 23


		  VIM REFERENCE MANUAL    by Bram Moolenaar


				*vim-9.0* *vim-9* *version-9.0* *version9.0*
Welcome to Vim 9!  Several years have passed since the previous release.
A large number of bugs have been fixed, many nice features have been added
and the Vim9 script syntax is here!  This file mentions all the new things and
changes to existing features since Vim 8.2.0. The patches up to Vim 8.2 can be
found here: |vim-8.2|.

Use this command to see the full version and features information of the Vim
program you are using: >
	:version

NEW FEATURES					|new-9|
   Vim script enhancements			|new-vim-script-9|
   Command line completion in a popup menu	|new-popup-compl|
   Updated colorschemes				|new-colorschemes-9|
   Various new items				|new-items-9|

INCOMPATIBLE CHANGES				|incompatible-9|

IMPROVEMENTS					|improvements-9|

COMPILE TIME CHANGES				|compile-changes-9|

PATCHES						|patches-9|


See |vi_diff.txt| for an overview of differences between Vi and Vim 9.0.
See |version4.txt|, |version5.txt|, |version6.txt|, |version7.txt| and
|version8.txt| for differences between Vim versions.

You can find an overview of the most important changes (according to Martin
Tournoij) on this site: https://www.arp242.net/vimlog/

							*Sven-Guckes*
Vim version 9.0 is dedicated to Sven Guckes, who passed away in February 2022
when the release was being prepared.  Sven was a long time supporter of Vim.
He registered the vim.org domain and created the first Vim website.  We will
remember him!

==============================================================================
NEW FEATURES						*new-9*

First an overview of the more interesting new features.  A comprehensive list
is below.


Vim9 script ~
							*new-vim-script-9*
The Vim script language has been changed step by step over many years,
preserving backwards compatibility.  Several choices made in the early days
got in the way of making it work better.  At the same time, Vim script is
being used much more often, since there are so many plugins being used.

Vim9 script provides a syntax that is much more similar to other languages.
In other words: "less weird".  Compiled functions are introduced which allow
for a large speed improvement.  You can expect around ten times faster
execution, or even more.  The price to pay is that Vim9 script is not
backwards compatible.  But don't worry, you can still use your old scripts,
the new script language is added, it does not replace the legacy script.

Information about Vim9 script can be found in the |Vim9| help file.


Command line completion in a popup menu ~
							*new-popup-compl*
Before there was the 'wildmenu' option, which uses the space of one line above
the statusline to show matches.  Only a few matches fit there.

Now a popup menu can be used by setting 'wildoptions' to "pum".  This allows
for showing many more matches.  This requires redrawing more of the display,
but since computers are fast enough that is not a problem.


Updated colorschemes ~
							*new-colorschemes-9*
Colorschemes from https://github.com/vim/colorschemes have been included.
They were made to work consistently across many types of terminals.  Although
generally an improvement, a lot of personal preference is involved.  You can
always get the old version if you prefer it, look here:
https://github.com/vim/colorschemes/blob/master/legacy_colors/


Various new items ~
							*new-items-9*
Options: ~

'autoshelldir'		change directory to the shell's current directory
'cdhome'		change directory to the home directory by ":cd"
'cinscopedecls'		words that are recognized by 'cino-g'
'guiligatures'		GTK GUI: ASCII characters that can form shapes
'mousemoveevent'	report mouse moves with <MouseMove>
'quickfixtextfunc'	function for the text in the quickfix window
'spelloptions'		options for spell checking
'thesaurusfunc'		function to be used for thesaurus completion
'xtermcodes'		request terminal codes from an xterm


Ex commands: ~

|:abstract|		(reserved for future use)
|:argdedupe|		remove duplicates from the argument list
|:balt|			like ":badd" but also set the alternate file
|:class|		(reserved for future use)
|:def|			define a Vim9 user function
|:defcompile|		compile Vim9 user functions in current script
|:disassemble|		disassemble Vim9 user function
|:echoconsole|		like :echomsg but write to stdout
|:endinterface|		(reserved for future use)
|:endclass|		(reserved for future use)
|:enddef|		end of a user function started with :def
|:endenum|		(reserved for future use)
|:enum|			(reserved for future use)
|:eval|			evaluate an expression and discard the result
|:export|		Vim9: export an item from a script
|:final|		declare an immutable variable in Vim9
|:import|		Vim9: import an item from another script
|:interface|		(reserved for future use)
|:static|		(reserved for future use)
|:type|			(reserved for future use)
|:var|			variable declaration in Vim9
|:vim9script|		indicates Vim9 script file
