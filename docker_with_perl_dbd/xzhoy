Patch 8.1.1212
Problem:    Signal PWR is not tested.
Solution:   Test that PWR updates the swap file. (Dominique Pelle,
            closes #4312)
Files:	    src/testdir/test_signals.vim

Patch 8.1.1213
Problem:    "make clean" in top dir does not cleanup indent test output.
Solution:   Clean the indent test output.  Do not rely on the vim executable
            for that. (closes #4307)
Files:	    Makefile, runtime/indent/Makefile,
            runtime/indent/testdir/cleantest.vim

Patch 8.1.1214
Problem:    Old style tests.
Solution:   Move tests from test14 to new style test files. (Yegappan
            Lakshmanan, closes #4308)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test14.in, src/testdir/test14.ok,
            src/testdir/test_edit.vim, src/testdir/test_normal.vim,
            src/testdir/test_search.vim, src/testdir/test_substitute.vim,
            src/testdir/test_visual.vim

Patch 8.1.1215
Problem:    "make clean" does not remove generated src/po files.
Solution:   Remove the files for "make clean". (Christian Brabandt)
Files:	    src/po/Makefile

Patch 8.1.1216
Problem:    Mouse middle click is not tested.
Solution:   Add a test. (Dominique Pelle, closes #4310)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1217
Problem:    MS-Windows: no space reserved for font quality name.
Solution:   Add quality_name length if present. (Ken Takata, closes #4311)
Files:	    src/gui_w32.c

Patch 8.1.1218
Problem:    Cannot set a directory for a tab page.
Solution:   Add the tab-local directory. (Yegappan Lakshmanan, closes #4212)
Files:	    runtime/doc/autocmd.txt, runtime/doc/editing.txt,
            runtime/doc/eval.txt, runtime/doc/index.txt,
            runtime/doc/options.txt, runtime/doc/usr_22.txt,
            runtime/doc/usr_41.txt, src/eval.c, src/evalfunc.c,
            src/ex_cmdidxs.h, src/ex_cmds.h, src/ex_docmd.c, src/if_py_both.h,
            src/proto/eval.pro, src/proto/ex_docmd.pro, src/structs.h,
            src/testdir/test_getcwd.vim, src/testdir/test_mksession.vim,
            src/window.c

Patch 8.1.1219
Problem:    Not checking for NULL return from alloc().
Solution:   Add checks. (Martin Kunev, closes #4303, closes #4174)
Files:	    src/beval.c, src/blowfish.c, src/crypt.c, src/crypt_zip.c,
            src/ops.c, src/option.c, src/popupmnu.c, src/proto/blowfish.pro,
            src/proto/crypt_zip.pro, src/gui_gtk_f.c, src/gui_gtk_x11.c,
            src/libvterm/src/state.c, src/libvterm/src/termscreen.c

Patch 8.1.1220 (after 8.1.1219)
Problem:    Build fails on MS-Windows.
Solution:   Move declaration to start of block.
Files:	    src/libvterm/src/state.c

Patch 8.1.1221
Problem:    Filtering does not work when listing marks.
Solution:   Implement filtering marks. (Marcin Szamotulski, closes #3895)
Files:	    runtime/doc/various.txt, src/mark.c,
            src/testdir/test_filter_cmd.vim

Patch 8.1.1222 (after 8.1.1219)
Problem:    Build still fails on MS-Windows.
Solution:   Move another declaration to start of block.
Files:	    src/libvterm/src/state.c

Patch 8.1.1223
Problem:    Middle mouse click test fails without a clipboard.
Solution:   Check if the clipboard can be used. (Dominique Pelle, Christian
            Brabandt)  Also use WorkingClipboard() instead of checking for the
            "clipboard" feature.
Files:	    src/testdir/test_termcodes.vim, src/testdir/test_quotestar.vim

Patch 8.1.1224
Problem:    MS-Windows: cannot specify font weight.
Solution:   Add the "W" option to 'guifont'. (closes #4309)  Move GUI font
            explanation out of options.txt.
Files:	    runtime/doc/options.txt, runtime/doc/gui.txt,
            runtime/doc/mbyte.txt, src/gui_w32.c, src/os_mswin.c

Patch 8.1.1225
Problem:    Cannot create a pty to use with :terminal on FreeBSD.
Solution:   Add support for posix_openpt(). (Ozaki Kiichi, closes #4306,
            closes #4289)
Files:	    src/configure.ac, src/config.h.in, src/auto/configure, src/pty.c

Patch 8.1.1226
Problem:    {not in Vi} remarks get in the way of useful help text.
Solution:   Make a list of all Vi options, instead of mentioning what Vi does
            not have.  Update the help text for options.
Files:	    runtime/doc/vi_diff.txt, runtime/doc/options.txt

Patch 8.1.1227
Problem:    Duplicate entries in the generated .desktop files. (Ralf Schandl)
Solution:   Remove translated entries from the .in files. (closes #4313)
Files:	    src/po/gvim.desktop.in, src/po/vim.desktop.in

Patch 8.1.1228
Problem:    Not possible to process tags with a function.
Solution:   Add tagfunc() (Christian Brabandt, Andy Massimino, closes #4010)
Files:	    runtime/doc/options.txt, runtime/doc/tagsrch.txt,
            runtime/optwin.vim, src/buffer.c, src/dict.c, src/ex_cmds.c,
            src/globals.h, src/insexpand.c, src/normal.c, src/option.c,
            src/option.h, src/proto/dict.pro, src/structs.h, src/tag.c,
            src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_tagfunc.vim, src/vim.h, src/window.c

Patch 8.1.1229
Problem:    Warning for posix_openpt() not declared. (Tony Mechelynck)
Solution:   Add declaration.
Files:	    src/pty.c

Patch 8.1.1230
Problem:    A lot of code is shared between vim.exe and gvim.exe.
Solution:   Optionally put the shared code in vim.dll. (Ken Takata,
            closes #4287)
Files:	    Filelist, nsis/gvim.nsi, runtime/doc/gui_w32.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/channel.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_docmd.c, src/feature.h,
            src/fileio.c, src/getchar.c, src/globals.h, src/gui.c, src/gui.h,
            src/gui_gtk_x11.c, src/gui_w32.c, src/if_mzsch.c, src/main.c,
            src/mbyte.c, src/memline.c, src/message.c, src/misc2.c,
            src/normal.c, src/option.c, src/os_mswin.c, src/os_w32dll.c,
            src/os_w32exe.c, src/os_win32.c, src/os_win32.h,
            src/proto/gui.pro, src/proto/gui_w32.pro, src/proto/misc2.pro,
            src/proto/os_mswin.pro, src/proto/os_win32.pro, src/syntax.c,
            src/term.c, src/terminal.c, src/ui.c, src/version.c, src/vim.rc

Patch 8.1.1231
Problem:    Asking about existing swap file unnecessarily.
Solution:   When it is safe, delete the swap file.  Remove
            HAS_SWAP_EXISTS_ACTION, it is always defined. (closes #1237)
Files:	    src/memline.c, src/globals.h, src/buffer.c, src/ex_cmds.c,
            src/fileio.c, src/main.c, src/testdir/test_swap.vim,
            runtime/doc/usr_11.txt, src/os_win32.c, src/proto/os_win32.pro,
            src/os_unix.c, src/proto/os_unix.pro

Patch 8.1.1232
Problem:    Can't build on MS-Windows.
Solution:   Define process_still_running.
Files:	    src/memline.c, src/os_win32.c, src/proto/os_win32.pro,
            src/os_unix.c, src/proto/os_unix.pro

Patch 8.1.1233
Problem:    Cannot build tiny version.
Solution:   Remove #ifdef for verb_msg().
Files:	    src/message.c

Patch 8.1.1234
Problem:    Swap file test fails on MS-Windows.
Solution:   Only compare the tail of the file names.
Files:	    src/testdir/test_swap.vim

Patch 8.1.1235
Problem:    Compiler warnings for using STRLEN() value.
Solution:   Cast to int. (Christian Brabandt, Mike Williams)
Files:	    src/tag.c

Patch 8.1.1236
Problem:    sjiscorr.c not found in shadow directory. (Tony Mechelynck)
Solution:   Link po/*.c files with "make shadow".
Files:	    src/Makefile

Patch 8.1.1237
Problem:    Error for using "compl", reserved word in C++.
Solution:   Rename to "complp". (suggestion by Ken Takata)
Files:	    src/usercmd.c, src/proto/usercmd.pro

Patch 8.1.1238
Problem:    MS-Windows: compiler warning for sprintf() format.
Solution:   Change %d to %ld. (Ken Takata)
Files:	    src/gui_w32.c

Patch 8.1.1239
Problem:    Key with byte sequence containing CSI does not work.
Solution:   Do not recognize CSI as special unless the GUI is active. (Ken
            Takata, closes #4318)
Files:	    src/getchar.c

Patch 8.1.1240
Problem:    Runtime desktop files are overwritten by build. (Tony Mechelynck)
Solution:   Instead of copying the files find them with "make install".
Files:	    src/Makefile, src/po/Makefile

Patch 8.1.1241
Problem:    Ex command info contains confusing information.
Solution:   When using the NOTADR flag use ADDR_OTHER for the address type.
            Cleanup code using NOTADR.  Check for errors in
            create_cmdidxs.vim.  Adjust Makefile to see the errors.
Files:	    src/ex_cmds.h, src/ex_docmd.c, src/Makefile,
            src/create_cmdidxs.vim, src/usercmd.c, src/ex_cmds.c,
            src/window.c, src/testdir/test_usercommands.vim

Patch 8.1.1242
Problem:    No cmdline redraw when tabpages have different 'cmdheight'.
Solution:   redraw the command line when 'cmdheight' changes when switching
            tabpages. (closes #4321)
Files:	    src/testdir/test_tabpage.vim, src/window.c,
            src/testdir/dumps/Test_tabpage_cmdheight.dump,
            src/testdir/screendump.vim

Patch 8.1.1243 (after 8.1.1241)
Problem:    Compiler warnings for incomplete switch statement. (Tony
            Mechelynck)
Solution:   Add ADDR_QUICKFIX to the list.
Files:	    src/ex_docmd.c

Patch 8.1.1244
Problem:    No tests for CTRL-mouse-click.
Solution:   Add a few tests. (Dominique Pelle, closes #4323)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1245
Problem:    ":copen 10" sets height in full-height window. (Daniel Hahler)
Solution:   Don't set the height if the quickfix window is full height.
            (closes #4325)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1246
Problem:    Cannot handle negative mouse coordinate from urxvt.
Solution:   Accept '-' where a digit is expected. (Vincent Vinel,
            closes #4326)
Files:	    src/term.c

Patch 8.1.1247
Problem:    Urxvt mouse codes are not tested.
Solution:   Also set 'ttymouse' to "urxvt" in the termcodes test.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1248
Problem:    No test for dec mouse.
Solution:   Add some tests for dec mouse.  Add "no_query_mouse".
Files:	    src/evalfunc.c, src/globals.h, src/os_unix.c,
            src/testdir/test_termcodes.vim, runtime/doc/eval.txt

Patch 8.1.1249
Problem:    Compiler warning for uninitialized variable.
Solution:   Initialize it. (Christian Brabandt)
Files:	    src/regexp_nfa.c

Patch 8.1.1250
Problem:    No test for netterm mouse.
Solution:   Add some tests for netterm mouse.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1251
Problem:    No test for completion of mapping keys.
Solution:   Add a test.  Also clean up the code.
Files:	    src/getchar.c, src/term.c, src/proto/term.pro,
            src/testdir/test_cmdline.vim

Patch 8.1.1252
Problem:    Not all mapping completion is tested.
Solution:   Add a few more mapping completion tests.
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.1253 (after 8.1.1252)
Problem:    Mapping completion test fails.
Solution:   Fix expected output.
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.1254
Problem:    Mapping completion contains dead code.
Solution:   Remove the code.
Files:	    src/term.c, src/testdir/test_cmdline.vim

Patch 8.1.1255
Problem:    Building desktop files fails on FreeBSD. (Adam Weinberger)
Solution:   Avoid using non-portable construct in Makefile. (closes #4332)
Files:	    src/po/Makefile

Patch 8.1.1256
Problem:    Cannot navigate through errors relative to the cursor.
Solution:   Add :cabove, :cbelow, :labove and :lbelow. (Yegappan Lakshmanan,
            closes #4316)
Files:	    runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/ex_docmd.c, src/proto/quickfix.pro,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1257
Problem:    MSVC: name of object directory not always right.
Solution:   Adjust comment.  Don't use different directory for DIRECTX.  Do
            use different directory for USE_MSVCRT. (Ken Takata, closes #4333)
Files:	    src/Make_mvc.mak

Patch 8.1.1258
Problem:    The "N files to edit" message can not be suppressed.
Solution:   Suppress the message with --not-a-term. (closes #4320)
Files:	    src/main.c

Patch 8.1.1259
Problem:    Crash when exiting early. (Ralf Schandl)
Solution:   Only pop/push the title when it was set. (closes #4334)
Files:	    src/os_unix.c, src/misc2.c, src/usercmd.c, src/tag.c

Patch 8.1.1260
Problem:    Comparing with pointer instead of value.
Solution:   Add a "*". (Ken Takata, closes #4336)
Files:	    src/usercmd.c

Patch 8.1.1261
Problem:    No error for quickfix commands with negative range.
Solution:   Add ADDR_UNSIGNED and use it for quickfix commands.  Make
            assert_fails() show the command if the error doesn't match.
Files:	    src/ex_cmds.h, src/ex_docmd.c, src/testdir/test_quickfix.vim,
            runtime/doc/quickfix.txt, src/eval.c, src/quickfix.c,
            src/proto/quickfix.pro, src/ex_cmds2.c

Patch 8.1.1262
Problem:    Cannot simulate a mouse click in a test.
Solution:   Add test_setmouse().
Files:	    src/evalfunc.c, runtime/doc/eval.txt, runtime/doc/usr_41.txt

Patch 8.1.1263
Problem:    Mouse clicks in WinBar not tested.
Solution:   Add a test for clicking on the WinBar entries.
Files:	    src/testdir/test_winbar.vim

Patch 8.1.1264
Problem:    Crash when closing window from WinBar click. (Ben Jackson)
Solution:   Check that window pointer is still valid. (closes #4337)
Files:	    src/menu.c

Patch 8.1.1265
Problem:    When GPM mouse support is enabled double clicks in xterm do not
            work.
Solution:   Use KS_GPM_MOUSE for GPM mouse events.
Files:	    src/term.c, src/os_unix.c, src/keymap.h

Patch 8.1.1266
Problem:    Winbar test doesn't test enough.
Solution:   Check that the WinBar actually shows up.  Correct check for clicks
            with no effect. (Ben Jackson, closes #4338)
Files:	    src/testdir/test_winbar.vim

Patch 8.1.1267
Problem:    Cannot check if GPM mouse support is working.
Solution:   Add the "mouse_gpm_enable" feature.
Files:	    src/evalfunc.c, src/os_unix.c, src/proto/os_unix.pro,
            runtime/doc/eval.txt

Patch 8.1.1268
Problem:    Map completion test fails in GUI.
Solution:   Skip the test that fails.
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.1269
Problem:    MS-Windows GUI: multibyte chars with a 0x80 byte do not work when
            compiled with VIMDLL.
Solution:   Adjust the condition for fixing the input buffer. (Ken Takata,
            closes #4330)
Files:	    src/getchar.c

Patch 8.1.1270
Problem:    Cannot see current match position.
Solution:   Show "3/44" when using the "n" command and "S" is not in
            'shortmess'. (Christian Brabandt, closes #4317)
Files:	    runtime/doc/options.txt, runtime/doc/pattern.txt, src/option.c,
            src/option.h, src/search.c, src/testdir/Make_all.mak,
            src/testdir/test_search_stat.vim

Patch 8.1.1271 (after 8.1.1270)
Problem:    Compiler warnings for use of STRNCPY(). (John Marriott)
Solution:   Use mch_memmove() instead of STRNCPY().
Files:	    src/search.c

Patch 8.1.1272
Problem:    Click on WinBar of other window not tested.
Solution:   Add a test case.
Files:	    src/testdir/test_winbar.vim

Patch 8.1.1273
Problem:    Compiler warning in direct write code.
Solution:   Add a type cast.
Files:	    src/gui_dwrite.cpp

Patch 8.1.1274
Problem:    After :unmenu can still execute the menu with :emenu.
Solution:   Do not execute a menu that was disabled for the specified mode.
Files:	    src/menu.c, src/testdir/test_menu.vim

Patch 8.1.1275
Problem:    Cannot navigate to errors before/after the cursor.
Solution:   Add the :cbefore and :cafter commands. (Yegappan Lakshmanan,
            closes #4340)
Files:	    runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1276
Problem:    Cannot combine text properties with syntax highlighting.
Solution:   Add the "combine" field to prop_type_add(). (closes #4343)
Files:	    runtime/doc/eval.txt, runtime/doc/textprop.txt, src/screen.c,
            src/structs.h, src/testdir/test_textprop.vim

Patch 8.1.1277 (after 8.1.1276)
Problem:    Missing screenshot update.
Solution:   Update the screenshot.
Files:	    src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1278 (after 8.1.1276)
Problem:    Missing change for "combine" field.
Solution:   Also change the textprop implementation.
Files:	    src/textprop.c

Patch 8.1.1279
Problem:    Cannot set 'spelllang' to "sr@latin". (Bojan Stipic)
Solution:   Allow using '@' in 'spelllang'. (closes #4342)
Files:	    src/option.c, src/testdir/gen_opt_test.vim

Patch 8.1.1280
Problem:    Remarks about functionality not in Vi clutters the help.
Solution:   Move all info about what is new in Vim or already existed in Vi to
            vi_diff.txt.  Remove {not in Vi} remarks. (closes #4268) Add
            "noet" to the help files modeline.  Also include many other help
            file improvements.
Files:	    runtime/doc/vi_diff.txt, runtime/doc/arabic.txt,
            runtime/doc/autocmd.txt, runtime/doc/change.txt,
            runtime/doc/channel.txt, runtime/doc/cmdline.txt,
            runtime/doc/debugger.txt, runtime/doc/debug.txt,
            runtime/doc/develop.txt, runtime/doc/diff.txt,
            runtime/doc/digraph.txt, runtime/doc/editing.txt,
            runtime/doc/eval.txt, runtime/doc/farsi.txt,
            runtime/doc/filetype.txt, runtime/doc/fold.txt,
            runtime/doc/ft_ada.txt, runtime/doc/ft_rust.txt,
            runtime/doc/ft_sql.txt, runtime/doc/gui.txt,
            runtime/doc/gui_w32.txt, runtime/doc/gui_x11.txt,
            runtime/doc/hangulin.txt, runtime/doc/hebrew.txt,
            runtime/doc/helphelp.txt, runtime/doc/help.txt,
            runtime/doc/howto.txt, runtime/doc/if_cscop.txt,
            runtime/doc/if_lua.txt, runtime/doc/if_mzsch.txt,
            runtime/doc/if_ole.txt, runtime/doc/if_perl.txt,
            runtime/doc/if_pyth.txt, runtime/doc/if_ruby.txt,
            runtime/doc/if_sniff.txt, runtime/doc/if_tcl.txt,
            runtime/doc/indent.txt, runtime/doc/index.txt,
            runtime/doc/insert.txt, runtime/doc/intro.txt,
            runtime/doc/map.txt, runtime/doc/mbyte.txt,
            runtime/doc/message.txt, runtime/doc/mlang.txt,
            runtime/doc/motion.txt, runtime/doc/netbeans.txt,
            runtime/doc/options.txt, runtime/doc/os_390.txt,
            runtime/doc/os_amiga.txt, runtime/doc/os_beos.txt,
            runtime/doc/os_dos.txt, runtime/doc/os_mac.txt,
            runtime/doc/os_mint.txt, runtime/doc/os_msdos.txt,
            runtime/doc/os_os2.txt, runtime/doc/os_qnx.txt,
            runtime/doc/os_risc.txt, runtime/doc/os_unix.txt,
            runtime/doc/os_vms.txt, runtime/doc/os_win32.txt,
            runtime/doc/pattern.txt, runtime/doc/pi_getscript.txt,
            runtime/doc/pi_gzip.txt, runtime/doc/pi_logipat.txt,
            runtime/doc/pi_netrw.txt, runtime/doc/pi_paren.txt,
            runtime/doc/pi_spec.txt, runtime/doc/pi_tar.txt,
            runtime/doc/pi_vimball.txt, runtime/doc/pi_zip.txt,
            runtime/doc/print.txt, runtime/doc/quickfix.txt,
            runtime/doc/quickref.txt, runtime/doc/quotes.txt,
            runtime/doc/recover.txt, runtime/doc/remote.txt,
            runtime/doc/repeat.txt, runtime/doc/rileft.txt,
            runtime/doc/russian.txt, runtime/doc/scroll.txt,
            runtime/doc/sign.txt, runtime/doc/spell.txt,
            runtime/doc/sponsor.txt, runtime/doc/starting.txt,
            runtime/doc/syntax.txt, runtime/doc/tabpage.txt,
            runtime/doc/tagsrch.txt, runtime/doc/terminal.txt,
            runtime/doc/term.txt, runtime/doc/textprop.txt,
            runtime/doc/tips.txt, runtime/doc/todo.txt,
            runtime/doc/uganda.txt, runtime/doc/undo.txt,
            runtime/doc/usr_01.txt, runtime/doc/usr_02.txt,
            runtime/doc/usr_03.txt, runtime/doc/usr_04.txt,
            runtime/doc/usr_05.txt, runtime/doc/usr_06.txt,
            runtime/doc/usr_07.txt, runtime/doc/usr_08.txt,
            runtime/doc/usr_09.txt, runtime/doc/usr_10.txt,
            runtime/doc/usr_11.txt, runtime/doc/usr_12.txt,
            runtime/doc/usr_20.txt, runtime/doc/usr_21.txt,
            runtime/doc/usr_22.txt, runtime/doc/usr_23.txt,
            runtime/doc/usr_24.txt, runtime/doc/usr_25.txt,
            runtime/doc/usr_26.txt, runtime/doc/usr_27.txt,
            runtime/doc/usr_28.txt, runtime/doc/usr_29.txt,
            runtime/doc/usr_30.txt, runtime/doc/usr_31.txt,
            runtime/doc/usr_32.txt, runtime/doc/usr_40.txt,
            runtime/doc/usr_41.txt, runtime/doc/usr_43.txt,
            runtime/doc/usr_44.txt, runtime/doc/usr_45.txt,
            runtime/doc/usr_90.txt, runtime/doc/usr_toc.txt,
            runtime/doc/various.txt, runtime/doc/version4.txt,
            runtime/doc/version5.txt, runtime/doc/version6.txt,
            runtime/doc/version7.txt, runtime/doc/version8.txt,
            runtime/doc/visual.txt, runtime/doc/windows.txt, runtime/doc/tags

Patch 8.1.1281
Problem:    Cannot specify a count with :chistory.
Solution:   Add a count to :chistory and :lhistory. (Yegappan Lakshmanan,
            closes #4344)
Files:	    runtime/doc/quickfix.txt,  src/ex_cmds.h,  src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.1282
Problem:    Running make in src/po leaves LINGUAS file behind. (Ken Takata)
Solution:   Delete LINGUAS after running msgfmt.
Files:	    src/po/Makefile

Patch 8.1.1283
Problem:    Delaying half a second after the top-bot message.
Solution:   Instead of the delay add "W" to the search count.
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1284
Problem:    Detecting *.tmpl as htmlcheetah is outdated.
Solution:   Use the generic name "template". (closes #4348)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1285
Problem:    Test17 is old style.
Solution:   Turn into new style test. (Yegappan Lakshmanan, closes #4347)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test17.in, src/testdir/test17.ok,
            src/testdir/test17a.in, src/testdir/test_checkpath.vim,
            src/testdir/test_gf.vim

Patch 8.1.1286
Problem:    Running tests leaves XTest_tabpage_cmdheight file behind.
Solution:   Delete the right file. (closes #4350)
Files:	    src/testdir/test_tabpage.vim

Patch 8.1.1287
Problem:    Cannot build with +eval but without +mouse.
Solution:   Add #ifdefs around f_test_setmouse(). (John Marriott)
Files:	    src/evalfunc.c

Patch 8.1.1288
Problem:    Search stats don't show for mapped command.
Solution:   Remove SEARCH_PEEK from searchit flags.  Add a test. (Christian
            Brabandt)
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1289
Problem:    May not have enough space to add "W" to search stats.
Solution:   Reserve a bit more space. (Christian Brabandt)
Files:	    src/search.c

Patch 8.1.1290
Problem:    .hgignore and .gitignore are either distributed or in git, not
            both.
Solution:   Add .gitignore to the distribution and .hgignore to git.  Update
            the entries. (Christian Brabandt, Ken Takata)
Files:	    .gitignore, .hgignore, Filelist

Patch 8.1.1291
Problem:    Not easy to change directory and restore.
Solution:   Add the chdir() function. (Yegappan Lakshmanan, closes #4358)
Files:	    runtime/doc/eval.txt, runtime/doc/todo.txt,
            runtime/doc/usr_41.txt, src/evalfunc.c, src/ex_docmd.c,
            src/if_py_both.h, src/proto/ex_docmd.pro, src/structs.h,
            src/testdir/test_cd.vim

Patch 8.1.1292
Problem:    Invalid command line arguments not tested.
Solution:   Add a test. (Dominique Pelle, closes #4346)
Files:	    src/testdir/test_startup.vim

Patch 8.1.1293
Problem:    MSVC files are no longer useful for debugging.  Newer Visual
            Studio versions cannot read them.
Solution:   Delete the files. (Ken Takata, closes #4357)
Files:	    Filelist, src/Make_dvc.mak, src/Make_ivc.mak,
            runtime/doc/debug.txt, src/INSTALLpc.txt, src/Make_mvc.mak

Patch 8.1.1294
Problem:    MS-Windows: Some fonts return wrong average char width.
Solution:   Compute the average ourselves. (Ken Takata, closes #4356)
Files:	    src/gui_w32.c

Patch 8.1.1295
Problem:    When vimrun.exe does not exist external command may fail.
Solution:   Use "cmd /c" twice to get the same behavior. (Ken Takata,
            closes #4355)
Files:	    src/os_win32.c

Patch 8.1.1296
Problem:    Crash when using invalid command line argument.
Solution:   Check for options not being initialized.
Files:	    src/term.c, src/testdir/test_startup.vim

Patch 8.1.1297
Problem:    Invalid argument test fails without GTK.
Solution:   Test -display and --display separately.
Files:	    src/testdir/test_startup.vim

Patch 8.1.1298
Problem:    Invalid argument test fails without X clipboard.
Solution:   Test -display only with the +xterm_clipboard feature.
Files:	    src/testdir/test_startup.vim

Patch 8.1.1299
Problem:    "extends" from 'listchars' is used when 'list' is off. (Hiroyuki
            Yoshinaga)
Solution:   Only use the "extends" character when 'list' is on. (Hirohito
            Higashi, closes #4360)
Files:	    src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1300
Problem:    In a terminal 'ballooneval' does not work right away.
Solution:   Flush output after drawing the balloon.  Add the <Ignore> key
            code.  Add a test.
Files:	    src/ex_cmds2.c, src/testdir/test_balloon.vim, src/misc2.c,
            src/testdir/Make_all.mak,
            src/testdir/dumps/Test_balloon_eval_term_01.dump

Patch 8.1.1301
Problem:    When compiled with VIMDLL some messages are not shown.
Solution:   Set/reset gui.in_use and gui.starting as needed. (Ken Takata,
            closes #4361)
Files:	    src/gui_w32.c, src/main.c, src/message.c

Patch 8.1.1302
Problem:    v:beval_text is not tested in Visual mode.
Solution:   Add a screenshot of the balloon in Visual mode.
Files:	    src/testdir/test_balloon.vim, src/normal.c,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_02.dump

Patch 8.1.1303
Problem:    Not possible to hide a balloon.
Solution:   Hide the balloon when balloon_show() is called with an empty
            string or list.  Add balloon_gettext().
Files:	    src/evalfunc.c, src/popupmnu.c, src/gui_beval.c, src/gui_w32.c,
            src/beval.h, src/testdir/test_balloon.vim, runtime/doc/eval.txt

Patch 8.1.1304
Problem:    MS-Windows: compiler warning for unused value.
Solution:   Adjust #ifdefs. (Ken Takata, closes #4363)
Files:	    src/gui.c

Patch 8.1.1305
Problem:    There is no easy way to manipulate environment variables.
Solution:   Add environ(), getenv() and setenv(). (Yasuhiro Matsumoto,
            closes #2875)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/Make_all.mak, src/testdir/test_environ.vim

Patch 8.1.1306
Problem:    Borland support is outdated and doesn't work.
Solution:   Remove Borland support, there are other (free) compilers
            available. (Thomas Dziedzic, Ken Takata, closes #4364)
Files:	    .gitignore, .hgignore, Filelist, runtime/doc/debug.txt,
            runtime/doc/develop.txt, runtime/doc/usr_90.txt,
            src/GvimExt/Make_bc5.mak, src/GvimExt/gvimext.cpp,
            src/GvimExt/gvimext.rc, src/INSTALLpc.txt, src/Make_bc5.mak,
            src/dosinst.c, src/dosinst.h, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/gui_w32.c, src/if_ole.cpp, src/if_py_both.h,
            src/main.c, src/mark.c, src/message.c, src/misc1.c, src/misc2.c,
            src/normal.c, src/option.c, src/os_mswin.c, src/os_w32exe.c,
            src/os_win32.c, src/os_win32.h, src/proto.h, src/screen.c,
            src/spell.c, src/spellfile.c, src/syntax.c, src/userfunc.c,
            src/vim.h, src/vim.rc, src/vimrun.c, src/xxd/Make_bc5.mak,
            src/xxd/xxd.c

Patch 8.1.1307
Problem:    Cannot reconnect to the X server after it restarted.
Solution:   Add the :xrestore command. (Adrian Kocis, closes #844)
Files:	    runtime/doc/index.txt, runtime/doc/various.txt, src/os_unix.c,
            src/proto/os_unix.pro, src/globals.h, src/ex_cmds.h,
            src/ex_cmdidxs.h, src/ex_docmd.c, src/testdir/test_paste.vim

Patch 8.1.1308
Problem:    The Normal highlight is not defined when compiled with GUI.
Solution:   Always define Normal. (Christian Brabandt, closes #4072)
Files:	    runtime/doc/syntax.txt, src/syntax.c,
            src/testdir/test_highlight.vim

Patch 8.1.1309 (after 8.1.1308)
Problem:    Test for Normal highlight fails on MS-Windows GUI.
Solution:   Skip the test for MS-Windows GUI.
Files:	    src/testdir/test_highlight.vim

Patch 8.1.1310
Problem:    Named function arguments are never optional.
Solution:   Support optional function arguments with a default value. (Andy
            Massimino, closes #3952)
Files:	    runtime/doc/eval.txt, src/structs.h,
            src/testdir/test_user_func.vim, src/userfunc.c

Patch 8.1.1311
Problem:    Aborting an autocmd with an exception is not tested.
Solution:   Add a test.  Also shows how to abort a command by throwing an
            exception.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.1312
Problem:    Coverity warning for using uninitialized variable.
Solution:   Clear exarg_T.
Files:	    src/quickfix.c, src/channel.c, src/ex_cmds2.c

Patch 8.1.1313
Problem:    Warnings for using localtime() and ctime().
Solution:   Use localtime_r() if available.  Avoid using ctime().
Files:	    src/configure.ac, src/auto/configure, src/config.h.in,
            src/evalfunc.c, src/nbdebug.c, src/undo.c, src/memline.c,
            src/proto/memline.pro, src/hardcopy.c

Patch 8.1.1314
Problem:    MSVC makefile is not nicely indented.
Solution:   Adjust spaces in preprocessor directives. (Ken Takata)
Files:	    src/Make_mvc.mak

Patch 8.1.1315
Problem:    There is always a delay if a termrequest is never answered.
Solution:   When the response is not received within two seconds consider the
            request to have failed.
Files:	    src/term.c

Patch 8.1.1316
Problem:    Duplicated localtime() call.
Solution:   Delete one.
Files:	    src/undo.c

Patch 8.1.1317
Problem:    Output from Travis can be improved.
Solution:   Add section headers.  Handle errors better. (Ozaki Kiichi,
            closes #4098)
Files:	    .travis.yml, configure

Patch 8.1.1318
Problem:    Code for text changes is in a "misc" file.
Solution:   Move the code to change.c.
Files:	    src/misc1.c, src/proto/misc1.pro, src/change.c,
            src/proto/change.pro, src/proto.h, src/memline.c, Filelist,
            src/Make_cyg_ming.mak, src/Make_dice.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.md

Patch 8.1.1319
Problem:    Computing function length name in many places.
Solution:   compute name length in call_func().
Files:	    src/eval.c, src/userfunc.c, src/channel.c, src/evalfunc.c,
            src/ex_cmds2.c, src/regexp.c, src/terminal.c

Patch 8.1.1320
Problem:    It is not possible to track changes to a buffer.
Solution:   Add listener_add() and listener_remove(). No docs or tests yet.
Files:	    src/structs.h, src/change.c, src/proto/change.pro

Patch 8.1.1321
Problem:    No docs or tests for listener functions.
Solution:   Add help and tests for listener_add() and listener_remove().
            Invoke the callbacks before redrawing.
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt,
            src/testdir/test_listener.vim, src/testdir/Make_all.mak,
            src/change.c, src/screen.c, src/evalfunc.c, src/proto/evalfunc.pro

Patch 8.1.1322
Problem:    Cygwin makefile is not nicely indented.
Solution:   Adjust spaces in preprocessor directives. (Ken Takata)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.1323
Problem:    'mouse' option is reset when using GPM mouse.
Solution:   Add flag for GPM mouse.
Files:	    src/term.c

Patch 8.1.1324
Problem:    Stray comma in VMS makefile.
Solution:   Remove the comma. (Naruhiko Nishino, closes #4368)
Files:	    src/Make_vms.mms

Patch 8.1.1325
Problem:    Cannot build with +eval but without +channel and +timers. (John
            Marriott)
Solution:   Adjust #ifdef for get_callback().
Files:	    src/evalfunc.c, src/testdir/test_autocmd.vim

Patch 8.1.1326
Problem:    No test for listener with partial.
Solution:   Add a test.  Add example to help.
Files:	    src/testdir/test_listener.vim, runtime/doc/eval.txt

Patch 8.1.1327
Problem:    Unnecessary scroll after horizontal split.
Solution:   Don't adjust to fraction if all the text fits in the window.
            (Martin Kunev, closes #4367)
Files:	    src/testdir/test_window_cmd.vim, src/window.c

Patch 8.1.1328
Problem:    No test for listener with undo operation.
Solution:   Add a test.
Files:	    src/testdir/test_listener.vim

Patch 8.1.1329
Problem:    Plans for popup window support are spread out.
Solution:   Add a first version of the popup window help.
Files:	    runtime/doc/popup.txt, runtime/doc/Makefile, runtime/doc/help.txt

Patch 8.1.1330
Problem:    Using bold attribute in terminal changes the color. (Jason
            Franklin)
Solution:   Don't set the "bold-highbright" flag in vterm unless the terminal
            supports less than 16 colors.
Files:	    src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1331
Problem:    Test 29 is old style.
Solution:   Turn it into a new style test. (Yegappan Lakshmanan, closes #4370)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test29.in, src/testdir/test29.ok,
            src/testdir/test_backspace_opt.vim, src/testdir/test_join.vim

Patch 8.1.1332
Problem:    Cannot flush change listeners without also redrawing.  The line
            numbers in the list of changes may become invalid.
Solution:   Add listener_flush().  Invoke listeners before adding a change
            that makes line numbers invalid.
Files:	    src/evalfunc.c, src/change.c, src/proto/change.pro,
            src/screen.c, runtime/doc/eval.txt, src/testdir/test_listener.vim

Patch 8.1.1333
Problem:    Text properties don't always move after changes.
Solution:   Update properties before reporting changes to listeners. Move text
            property when splitting a line.
Files:	    src/change.c, src/ex_cmds.c, src/textprop.c,
            src/proto/textprop.pro, src/testdir/test_textprop.vim

Patch 8.1.1334
Problem:    When buffer is hidden "F" in 'shortmess' is not used.
Solution:   Check the "F" flag in 'shortmess' when the buffer is already
            loaded. (Jason Franklin)  Add test_getvalue() to be able to test
            this.
Files:	    src/buffer.c, src/evalfunc.c, src/testdir/test_options.vim,
            runtime/doc/eval.txt

Patch 8.1.1335
Problem:    Listener callback is called after inserting text.
Solution:   Flush the changes before inserting or deleting a line.  Store
            changes per buffer.
Files:	    src/change.c, src/proto/change.pro, src/memline.c,
            src/structs.h, src/testdir/test_listener.vim

Patch 8.1.1336
Problem:    Some eval functionality is not covered by tests.
Solution:   Add a few more test cases. (Masato Nishihata, closes #4374)
Files:	    src/testdir/test_bufline.vim, src/testdir/test_cindent.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_delete.vim,
            src/testdir/test_expand_func.vim, src/testdir/test_float_func.vim,
            src/testdir/test_fnamemodify.vim, src/testdir/test_functions.vim

Patch 8.1.1337
Problem:    Get empty text prop when splitting line just after text prop.
Solution:   Do not create an empty text prop at the start of the line.
Files:	    src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.1338
Problem:    Hang when concealing the '>' shown for a wide char that doesn't
            fit in the last cell.
Solution:   Put back the pointer when the '>' is not going to be displayed.
            (closes #4377)
Files:	    src/screen.c

Patch 8.1.1339
Problem:    Installer needs to product name et al.
Solution:   Add a few lines to the NSIS installer script. (Ken Takata)
Files:	    nsis/gvim.nsi

Patch 8.1.1340
Problem:    Attributes from 'cursorline' overwrite textprop.
Solution:   Combine the attributes. (closes #3912)
Files:	    src/screen.c, src/textprop.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1341
Problem:    Text properties are lost when joining lines.
Solution:   Move the text properties to the joined line.
Files:	    src/ops.c, src/textprop.c, src/proto/textprop.pro,
            src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1342
Problem:    Using freed memory when joining line with text property.
Solution:   Use already computed length.
Files:	    src/ops.c

Patch 8.1.1343
Problem:    Text properties not adjusted for Visual block mode delete.
Solution:   Call adjust_prop_columns(). (closes #4384)
Files:	    src/ops.c, src/textprop.c, src/testdir/test_textprop.vim,
            src/misc1.c, src/testdir/dumps/Test_textprop_vis_01.dump,
            src/testdir/dumps/Test_textprop_vis_02.dump

Patch 8.1.1344
Problem:    Coverity complains about possibly using a NULL pointer and copying
            a string into a fixed size buffer.
Solution:   Check for NULL, even though it should not happen.  Use
            vim_strncpy() instead of strcpy().
Files:	    src/change.c, src/memline.c

Patch 8.1.1345
Problem:    Stuck in sandbox with ":s/../\=Function/gn".
Solution:   Don't skip over code to restore sandbox. (Christian Brabandt)
Files:	    src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.1346
Problem:    Error for Python exception does not show useful info.
Solution:   Show the last line instead of the first one. (Ben Jackson,
            closes #4381)
Files:	    src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok,
            src/testdir/test_python2.vim, src/testdir/test_python3.vim,
            src/testdir/test_pyx2.vim, src/testdir/test_pyx3.vim

Patch 8.1.1347 (after 8.1.1327)
Problem:    Fractional scroll position not restored after closing window.
Solution:   Do restore fraction if topline is not one.
Files:	    src/window.c, src/testdir/test_window_cmd.vim

Patch 8.1.1348
Problem:    Running tests may cause the window to move.
Solution:   Correct the reported window position for the offset with the
            position after ":winpos".  Works around an xterm bug.
Files:	    src/testdir/test_edit.vim

Patch 8.1.1349
Problem:    If writing runs into a conversion error the backup file is
            deleted. (Arseny Nasokin)
Solution:   Don't delete the backup file is the file was overwritten and a
            conversion error occurred. (Christian Brabandt, closes #4387)
Files:	    src/fileio.c, src/testdir/test_writefile.vim

Patch 8.1.1350
Problem:    "W" for wrapping not shown when more than 99 matches.
Solution:   Adjust check for length. (Masato Nishihata, closes #4388)
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1351
Problem:    Text property wrong after :substitute.
Solution:   Save for undo before changing any text properties.
Files:	    src/testdir/test_textprop.vim, src/ex_cmds.c, src/textprop.c,
            src/proto/textprop.pro, src/change.c, src/edit.c, src/misc1.c,
            src/ops.c

Patch 8.1.1352
Problem:    Undofile() reports wrong name. (Francisco Giordano)
Solution:   Clean up the name before changing path separators. (closes #4392,
            closes #4394)
Files:	    src/evalfunc.c, src/testdir/test_undo.vim

Patch 8.1.1353 (after 8.1.1352)
Problem:    Undo test fails on Mac.
Solution:   Expect "private" on the Mac.
Files:	    src/testdir/test_undo.vim

Patch 8.1.1354
Problem:    Getting a list of text lines is clumsy.
Solution:   Add the =<< assignment. (Yegappan Lakshmanan, closes #4386)
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_let.vim

Patch 8.1.1355
Problem:    Obvious mistakes are accepted as valid expressions.
Solution:   Be more strict about parsing numbers. (Yasuhiro Matsumoto,
            closes #3981)
Files:	    src/charset.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/json.c, src/misc2.c, src/ops.c, src/option.c,
            src/proto/charset.pro, src/testdir/test_expr.vim,
            src/testdir/test_json.vim

Patch 8.1.1356
Problem:    Some text in heredoc assignment ends the text. (Ozaki Kiichi)
Solution:   Recognize "let v =<<" and skip until the end.
Files:	    src/userfunc.c, src/testdir/test_let.vim

Patch 8.1.1357
Problem:    Test 37 is old style.
Solution:   Turn it into a new style test. (Yegappan Lakshmanan, closes #4398)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test37.in, src/testdir/test37.ok,
            src/testdir/test_scrollbind.vim

Patch 8.1.1358
Problem:    Cannot enter character with a CSI byte.
Solution:   Only check "gui.in_use" when VIMDLL is defined. (Ken Takata,
            closes #4396)
Files:	    src/getchar.c

Patch 8.1.1359
Problem:    Text property wrong after :substitute with backslash.
Solution:   Adjust text property columns when removing backslashes.
            (closes #4397)
Files:	    src/ex_cmds.c, src/testdir/test_textprop.vim, src/vim.h,
            src/textprop.c, src/proto/textprop.pro, src/change.c, src/edit.c,
            src/misc1.c, src/ops.c

Patch 8.1.1360 (after Patch 8.1.1345)
Problem:    Buffer left 'nomodifiable' after :substitute. (Ingo Karkat)
Solution:   Save the value of 'modifiable' earlier. (Christian Brabandt,
            closes #4403)
Files:	    src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.1361
Problem:    Python setuptools don't work with Python 3.
Solution:   Add dummy implementation for find_module. (Joel Frederico,
            closes #4402, closes #3984)
