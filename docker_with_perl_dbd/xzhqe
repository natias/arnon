
Patch 8.2.3939
Problem:    MS-Windows: fnamemodify('', ':p') does not work.
Solution:   Do not consider an empty string a full path. (Yegappan Lakshmanan,
            closes #9428, closes #9427)
Files:      src/os_mswin.c, src/testdir/test_fnamemodify.vim

Patch 8.2.3940
Problem:    Match highlight disappears when doing incsearch for ":s/pat".
Solution:   Only use line limit for incsearch highlighting. (closes #9425)
Files:      src/match.c, src/testdir/test_match.vim,
            src/testdir/dumps/Test_match_with_incsearch_1.dump,
            src/testdir/dumps/Test_match_with_incsearch_2.dump

Patch 8.2.3941
Problem:    SIGTSTP is not handled.
Solution:   Handle SIGTSTP like pressing CTRL-Z. (closes #9422)
Files:      runtime/doc/autocmd.txt, src/ex_docmd.c, src/os_unix.c,
            src/proto/ex_docmd.pro, src/testdir/test_signals.vim

Patch 8.2.3942
Problem:    Coverity reports a possible memory leak.
Solution:   Free the array if allocation fails.
Files:      src/insexpand.c

Patch 8.2.3943
Problem:    Compiler warning from gcc for uninitialized variable.
Solution:   Initialize variable. (closes #9429)
Files:      src/diff.c

Patch 8.2.3944
Problem:    Insert mode completion functions are too long.
Solution:   Split up into multiple functions. (Yegappan Lakshmanan,
            closes #9431)
Files:      src/insexpand.c, src/testdir/test_ins_complete.vim

Patch 8.2.3945
Problem:    Vim9: partial variable argument types are wrong, leading to a
            crash.
Solution:   When adjusting the argument count also adjust the argument types.
            (closes #9433)
Files:      src/vim9type.c, src/userfunc.c, src/testdir/test_vim9_assign.vim

Patch 8.2.3946
Problem:    When an internal error makes Vim exit the error is not seen.
Solution:   Add the error to the test output.
Files:      src/message.c, src/testdir/runtest.vim

Patch 8.2.3947
Problem:    Unnecessary check for NULL pointer.
Solution:   Remove the check. (closes #9434)
Files:      src/ex_docmd.c

Patch 8.2.3948
Problem:    Vim9: failure with partial with unknown argument count.
Solution:   Do not copy argument types if there aren't any.
Files:      src/vim9type.c

Patch 8.2.3949
Problem:    Using freed memory with /\%V.
Solution:   Get the line again after getvvcol().
Files:      src/regexp.c, src/testdir/test_regexp_latin.vim

Patch 8.2.3950
Problem:    Going beyond the end of the line with /\%V.
Solution:   Check for valid column in getvcol().
Files:      src/charset.c, src/testdir/test_regexp_latin.vim

Patch 8.2.3951
Problem:    Vim9: memory leak when text after a nested function.
Solution:   Free the function if text is found after "enddef".
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.3952
Problem:    First line not redrawn when adding lines to an empty buffer.
Solution:   Adjust the argument to appended_lines(). (closes #9439,
            closes #9438)
Files:      src/ex_cmds.c, src/testdir/test_excmd.vim

Patch 8.2.3953
Problem:    Insert completion code is too complicated.
Solution:   More refactoring.  Move function arguments into a struct.
            (Yegappan Lakshmanan, closes #9437)
Files:      src/insexpand.c

Patch 8.2.3954
Problem:    Vim9: no error for shadowing if script var is declared later.
Solution:   Check argument names when compiling a function.
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_assign.vim

Patch 8.2.3955
Problem:    Error messages are spread out.
Solution:   Move more errors to errors.h.
Files:      src/errors.h, src/globals.h, src/debugger.c, src/ex_cmds.c,
            src/help.c, src/sign.c, src/spellfile.c

Patch 8.2.3956
Problem:    Duplicate assignment.
Solution:   Remove the second assignment. (closes #9442)
Files:      src/evalfunc.c

Patch 8.2.3957
Problem:    Error messages are spread out.
Solution:   Move more errors to errors.h.
Files:      src/errors.h, src/globals.h, src/arglist.c, src/bufwrite.c,
            src/evalvars.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/help.c, src/scriptfile.c, src/usercmd.c, src/userfunc.c,
            src/vim9cmds.c, src/vim9compile.c

Patch 8.2.3958
Problem:    Build failure compiling xxd with "-std=c2x".
Solution:   define _XOPEN_SOURCE. (Yegappan Lakshmanan, closes #9444)
Files:      src/xxd/xxd.c

Patch 8.2.3959
Problem:    Error messages are spread out.
Solution:   Move more errors to errors.h.
Files:      src/errors.h, src/autocmd.c, src/bufwrite.c, src/evalvars.c,
            src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c, src/fileio.c,
            src/getchar.c, src/gui.c, src/locale.c, src/map.c

Patch 8.2.3960
Problem:    Error messages are spread out.
Solution:   Move more errors to errors.h.
Files:      src/errors.h, src/alloc.c, src/arglist.c, src/autocmd.c,
            src/blob.c, src/blowfish.c, src/buffer.c, src/bufwrite.c

Patch 8.2.3961
Problem:    Error messages are spread out.
Solution:   Move more errors to errors.h.
Files:      src/errors.h, src/globals.h, src/arglist.c, src/autocmd.c,
            src/blob.c, src/bufwrite.c, src/channel.c, src/clipboard.c,
            src/cmdexpand.c, src/debugger.c, src/dict.c, src/eval.c,
            src/evalfunc.c, src/evalvars.c, src/evalwindow.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c, src/fileio.c,
            src/filepath.c, src/gui_gtk_x11.c, src/gui_haiku.cc,
            src/gui_photon.c, src/gui_w32.c, src/gui_x11.c, src/highlight.c,
            src/indent.c, src/insexpand.c, src/job.c, src/json.c, src/list.c,
            src/map.c, src/mark.c, src/match.c, src/mbyte.c, src/menu.c,
            src/message.c, src/misc2.c, src/ops.c, src/option.c,
            src/optionstr.c, src/popupwin.c, src/quickfix.c, src/screen.c,
            src/scriptfile.c, src/search.c, src/sign.c, src/spell.c,
            src/spellfile.c, src/strings.c, src/syntax.c, src/terminal.c,
            src/testing.c, src/textprop.c, src/time.c, src/userfunc.c,
            src/vim9cmds.c, src/vim9execute.c, src/vim9script.c, src/window.c

Patch 8.2.3962 (after 8.2.3961)
Problem:    Build fails for missing error message.
Solution:   Add changes in missed file.
Files:      src/regexp_bt.c

Patch 8.2.3963
Problem:    Build failure with tiny and small features. (Tony Mechelynck)
Solution:   Adjust #ifdefs.
Files:      src/errors.h, src/message.c

Patch 8.2.3964
Problem:    Some common lisp and scheme files not recognized.
Solution:   Recognize *.asd as lisp and *.sld as scheme. (Alex Vear,
            closes #9447)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3965
Problem:    Vim9: no easy way to check if Vim9 script is supported.
Solution:   Add has('vim9script').
Files:      runtime/doc/vim9.txt, src/evalfunc.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.3966
Problem:    When using feedkeys() abbreviations may be blocked.
Solution:   Reset tb_no_abbr_cnt when running out of characters.
            (closes #9448)
Files:      src/getchar.c, src/testdir/test_feedkeys.vim

Patch 8.2.3967
Problem:    Error messages are spread out.
Solution:   Move more errors to errors.h.
Files:      src/errors.h, src/globals.h, src/feature.h, src/arglist.c,
            src/autocmd.c, src/blob.c, src/bufwrite.c, src/channel.c,
            src/cmdexpand.c, src/dict.c, src/diff.c, src/eval.c,
            src/evalfunc.c, src/evalvars.c, src/ex_cmds.c, src/ex_docmd.c,
            src/fileio.c, src/filepath.c, src/getchar.c, src/gui_gtk_x11.c,
            src/gui_x11.c, src/hardcopy.c, src/help.c, src/highlight.c,
            src/if_cscope.c, src/if_lua.c, src/if_mzsch.c, src/if_perl.xs,
            src/if_python.c, src/if_python3.c, src/if_ruby.c, src/if_tcl.c,
            src/if_xcmdsrv.c, src/indent.c, src/insexpand.c, src/job.c,
            src/list.c, src/main.c, src/map.c, src/match.c, src/mbyte.c,
            src/message.c, src/misc1.c, src/option.c, src/optionstr.c,
            src/os_mswin.c, src/os_unix.c, src/os_win32.c, src/popupwin.c,
            src/profiler.c, src/quickfix.c, src/scriptfile.c, src/search.c,
            src/session.c, src/sign.c, src/spell.c, src/spellfile.c,
            src/spellsuggest.c, src/syntax.c, src/tag.c, src/terminal.c,
            src/testing.c, src/textprop.c, src/typval.c, src/userfunc.c,
            src/vim9execute.c, src/vim9expr.c, src/vim9instr.c,
            src/vim9script.c

Patch 8.2.3968
Problem:    Build failure.
Solution:   Add missing changes.
Files:      src/strings.c, src/vim9compile.c

Patch 8.2.3969
Problem:    Value of MAXCOL not available in Vim script.
Solution:   Add v:maxcol. (Naohiro Ono, closes #9451)
Files:      runtime/doc/builtin.txt, runtime/doc/eval.txt, src/evalvars.c,
            src/testdir/test_cursor_func.vim, src/testdir/test_normal.vim,
            src/testdir/test_put.vim, src/vim.h

Patch 8.2.3970
Problem:    Error messages are spread out.
Solution:   Move more errors to errors.h.
Files:      src/errors.h, src/globals.h, src/buffer.c, src/bufwrite.c,
            src/clientserver.c, src/cmdhist.c, src/dict.c, src/edit.c,
            src/eval.c, src/evalfunc.c, src/evalvars.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c, src/gui_w32.c,
            src/gui_x11.c, src/if_xcmdsrv.c, src/insexpand.c, src/json.c,
            src/match.c, src/menu.c, src/option.c, src/optionstr.c,
            src/os_mswin.c, src/quickfix.c, src/regexp_bt.c, src/regexp_nfa.c,
            src/scriptfile.c, src/sign.c, src/spellfile.c, src/undo.c,
            src/userfunc.c, src/vim9cmds.c, src/vim9compile.c,
            src/vim9execute.c, src/vim9expr.c, src/window.c

Patch 8.2.3971
Problem:    Build fails.
Solution:   Use the right error message name.
Files:      src/typval.c

Patch 8.2.3972
Problem:    Error messages are spread out.
Solution:   Move the last errors from globals.h to errors.h.
Files:      src/errors.h, src/globals.h, src/eval.c, src/evalfunc.c,
            src/evalvars.c, src/evalwindow.c, src/ex_eval.c, src/list.c,
            src/match.c, src/menu.c, src/popupmenu.c, src/search.c,
            src/vim9cmds.c, src/vim9expr.c

Patch 8.2.3973
Problem:    Tiny build fails.
Solution:   Adjust #ifdefs
Files:      src/errors.h

Patch 8.2.3974
Problem:    Vim9: LISTAPPEND instruction does not check for a locked list.
Solution:   Check whether the list is locked. (closes #9452)
Files:      src/vim9execute.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3975
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/clientserver.c, src/fileio.c, src/gui.c,
            src/gui_beval.c, src/gui_w32.c, src/gui_x11.c, src/if_cscope.c,
            src/if_xcmdsrv.c, src/os_mswin.c, src/sign.c, src/viminfo.c,
            src/window.c

Patch 8.2.3976
Problem:    FEARG_LAST is never used. (Dominique Pellé)
Solution:   Remove FEARG_LAST and the related code.
Files:      src/evalfunc.c

Patch 8.2.3977
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/change.c, src/clientserver.c, src/eval.c,
            src/gui_xim.c, src/if_cscope.c, src/if_py_both.h, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/main.c,
            src/mark.c, src/match.c, src/memfile.c, src/memline.c,
            src/terminal.c, src/textprop.c, src/userfunc.c

Patch 8.2.3978
Problem:    Build error when using dynamically loaded Python 3.
Solution:   Adjust #ifdef.
Files:      src/errors.h

Patch 8.2.3979
Problem:    Vim9: the feature is not mentioned in the right places.
Solution:   Add +vim9script to the help and :version output.
Files:      runtime/doc/builtin.txt, runtime/doc/various.txt, src/version.c

Patch 8.2.3980
Problem:    If 'operatorfunc' invokes an operator the remembered Visual mode
            may be changed. (Naohiro Ono)
Solution:   Save and restore the information for redoing the Visual area.
            (closes #9455)
Files:      src/ops.c, src/testdir/test_normal.vim

Patch 8.2.3981
Problem:    Vim9: debugging a for loop doesn't stop before it starts.
Solution:   Keep the DEBUG instruction before the expression is evaluated.
            (closes #9456)
Files:      src/vim9cmds.c, src/testdir/test_vim9_disassemble.vim

Patch 8.2.3982
Problem:    Some lines of code not covered by tests.
Solution:   Add a few more test cases. (Dominique Pellé, closes #9453)
Files:      src/testdir/test_filter_map.vim, src/testdir/test_highlight.vim,
            src/testdir/test_regexp_latin.vim, src/testdir/test_search.vim,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.3983
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/ex_docmd.c, src/fileio.c, src/filepath.c,
            src/findfile.c, src/hardcopy.c, src/memfile.c, src/memline.c,
            src/menu.c, src/normal.c, src/regexp_bt.c

Patch 8.2.3984 (after 8.2.3981)
Problem:    Debugger test fails.
Solution:   Adjust the test for modified debugging of a for loop.
Files:      src/testdir/test_debugger.vim

Patch 8.2.3985
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/findfile.c, src/fold.c, src/hardcopy.c,
            src/highlight.c, src/map.c, src/message.c, src/normal.c,
            src/option.c, src/os_amiga.c, src/os_unix.c, src/os_win32.c,
            src/quickfix.c, src/regexp.c, src/register.c, src/search.c,
            src/syntax.c, src/tag.c, src/term.c, src/typval.c, src/undo.c,
            src/window.c

Patch 8.2.3986
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/evalvars.c, src/ex_cmds.c, src/ex_docmd.c,
            src/fileio.c, src/fold.c, src/gui_x11.c, src/hardcopy.c,
            src/help.c, src/highlight.c, src/if_cscope.c, src/json.c,
            src/map.c, src/netbeans.c, src/popupwin.c, src/usercmd.c,
            src/userfunc.c

Patch 8.2.3987
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/digraph.c, src/ex_eval.c, src/gui.c,
            src/hardcopy.c, src/if_cscope.c, src/if_tcl.c, src/if_xcmdsrv.c,
            src/mbyte.c, src/misc2.c, src/netbeans.c, src/option.c,
            src/optionstr.c, src/quickfix.c, src/regexp.c, src/tag.c,
            src/term.c, src/viminfo.c

Patch 8.2.3988 (after 8.2.3987)
Problem:    Tiny build fails.
Solution:   Fix misplaced #ifdef.
Files:      src/errors.h

Patch 8.2.3989
Problem:    Some insert completion code is not tested.
Solution:   Add a few tests.  Refactor thesaurus completion. (Yegappan
            Lakshmanan, closes #9460)
Files:      src/insexpand.c, src/testdir/test_edit.vim,
            src/testdir/test_ins_complete.vim

Patch 8.2.3990
Problem:    Testing wrong operator.
Solution:   Test "g@" instead of "r_". (Naohiro Ono, closes #9463)
Files:      src/testdir/test_normal.vim

Patch 8.2.3991
Problem:    Vim9: error when extending dict<any> with another type that it was
            initialized with.
Solution:   Also set the type for dict<any> if the initializer has a more
            specific type. (closes #9461)
Files:      src/vim9compile.c, src/vim9type.c, src/vim9.h, src/eval.c,
            src/list.c, src/vim9script.c, src/testdir/test_vim9_assign.vim,
            src/testdir/test_vim9_builtin.vim, src/testdir/test_vim9_func.vim

Patch 8.2.3992
Problem:    Wrong local-additions in the help with language mix.
Solution:   Adjust how the local additions list is generated. (Hirohito
            Higashi, closes #9464)
Files:      src/help.c, src/testdir/test_help.vim

Patch 8.2.3993
Problem:    When recording a change in Select mode the first typed character
            appears twice.
Solution:   When putting the character back into typeahead remove it from
            recorded characters. (closes #9462)
Files:      src/getchar.c, src/proto/getchar.pro, src/normal.c,
            src/testdir/test_registers.vim

Patch 8.2.3994
Problem:    Vim9: extend() complains about the type even when it was not
            declared.
Solution:   Only check the list or dict type when it was declared.
Files:      src/list.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3995
Problem:    Not all sshconfig files are detected as such.
Solution:   Adjust the patterns used for sshconfig detection. (David Auer,
            closes #9322)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3996
Problem:    Vim9: type checking for list and dict lacks information about
            declared type.
Solution:   Add dv_decl_type and lv_decl_type.  Refactor the type stack to
            store two types in each entry.
Files:      src/structs.h, src/dict.c, src/list.c, src/vim9type.c,
            src/proto/vim9type.pro, src/vim9instr.c, src/proto/vim9instr.pro,
            src/vim9compile.c, src/evalfunc.c, src/proto/evalfunc.pro,
            src/evalbuffer.c, src/proto/evalbuffer.pro, src/vim9expr.c,
            src/vim9cmds.c, src/testdir/test_vim9_assign.vim,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.3997
Problem:    Vim9: not enough testing for extend() and map().
Solution:   Add more test cases.  Fix uncovered problems.  Remove unused type
            fields.
Files:      src/structs.h, src/dict.c, src/list.c, src/vim9compile.c,
            src/testdir/test_vim9_builtin.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.3998
Problem:    Asan error for adding zero to NULL.
Solution:   Do not compute pointer if there are no entries.
Files:      src/vim9type.c

Patch 8.2.3999
Problem:    Redundant check for NUL byte.
Solution:   Remove the check for a NUL byte. (closes #9471)
Files:      src/ex_docmd.c

Patch 8.2.4000
Problem:    Coverity warns for checking for NULL pointer after using it.
Solution:   Remove check for NULL.
Files:      src/help.c

Patch 8.2.4001
Problem:    Insert complete code uses global variables.
Solution:   Make variables local to the file and use accessor functions.
            (Yegappan Lakshmanan, closes #9470)
Files:      src/edit.c, src/getchar.c, src/globals.h, src/insexpand.c,
            src/proto/insexpand.pro, src/search.c

Patch 8.2.4002
Problem:    First char typed in Select mode can be wrong.
Solution:   Escape special bytes in the input buffer. (closes #9469)
Files:      src/getchar.c, src/testdir/test_utf8.vim

Patch 8.2.4003
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/channel.c, src/ex_docmd.c, src/ex_eval.c,
            src/gui_at_fs.c, src/hardcopy.c, src/if_cscope.c, src/menu.c,
            src/netbeans.c, src/optionstr.c, src/os_mswin.c, src/sign.c,
            src/typval.c

Patch 8.2.4004
Problem:    Old compiler complains about struct init with variable.
Solution:   Set the struct member later. (John Marriott)
Files:      src/evalfunc.c

Patch 8.2.4005
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/dict.c, src/eval.c, src/evalfunc.c,
            src/evalvars.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/filepath.c, src/gui.c, src/gui_w32.c, src/hardcopy.c,
            src/help.c, src/highlight.c, src/if_python.c, src/list.c,
            src/misc1.c, src/normal.c, src/quickfix.c, src/regexp.c,
            src/regexp_bt.c, src/regexp_nfa.c, src/typval.c, src/userfunc.c

Patch 8.2.4006
Problem:    Vim9: crash when declaring variable on the command line.
Solution:   Use a temporary type list. (closes #9474)
Files:      src/eval.c, src/testdir/test_vim9_assign.vim

Patch 8.2.4007
Problem:    Session does not restore help buffer properly when "options' is
            missing from 'sessionoptions'.
Solution:   Use a ":help" command to create the help window. (closes #9475,
            closes #9458, closes #9472)
Files:      src/session.c, src/testdir/test_mksession.vim

Patch 8.2.4008
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/diff.c, src/digraph.c, src/evalfunc.c,
            src/evalvars.c, src/ex_cmds.c, src/ex_docmd.c, src/ex_getln.c,
            src/insexpand.c, src/match.c, src/memline.c, src/menu.c,
            src/ops.c, src/profiler.c, src/quickfix.c, src/regexp.c,
            src/regexp_bt.c, src/regexp_nfa.c, src/register.c, src/spell.c,
            src/spell.h, src/spellfile.c, src/strings.c, src/syntax.c,
            src/typval.c, src/undo.c, src/userfunc.c

Patch 8.2.4009
Problem:    Reading one byte beyond the end of the line.
Solution:   Check for NUL byte first.
Files:      src/vim9compile.c, src/ex_docmd.c, src/testdir/test_vim9_func.vim

Patch 8.2.4010
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/errors.h, src/crypt.c, src/diff.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/findfile.c, src/float.c,
            src/gui.c, src/highlight.c, src/if_mzsch.c, src/if_py_both.h,
            src/if_python.c, src/if_python3.c, src/insexpand.c, src/match.c,
            src/memline.c, src/option.c, src/popupwin.c, src/regexp.c,
            src/regexp_nfa.c, src/spellfile.c, src/strings.c, src/syntax.c,
            src/textprop.c, src/typval.c, src/undo.c, src/usercmd.c,
            src/userfunc.c, src/window.c

Patch 8.2.4011
Problem:    Test fails because of changed error number.
Solution:   Restore old duplicate error message.
Files:      src/errors.h, src/match.c

Patch 8.2.4012
Problem:    Error messages are spread out.
Solution:   Move the last error messages to errors.h.
Files:      src/errors.h, src/channel.c, src/clientserver.c, src/diff.c,
            src/evalfunc.c, src/evalvars.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/gui_w32.c, src/help.c, src/if_mzsch.c, src/if_py_both.h,
            src/if_python.c, src/job.c, src/json.c, src/list.c, src/option.c,
            src/optionstr.c, src/quickfix.c, src/regexp.c, src/regexp_nfa.c,
            src/register.c, src/scriptfile.c, src/sign.c, src/syntax.c,
            src/tag.c, src/terminal.c, src/textprop.c, src/typval.c,
            src/undo.c, src/userfunc.c, src/vim9compile.c, src/viminfo.c

Patch 8.2.4013
Problem:    Build failure without the spell feature.
Solution:   Adjust #ifdefs.
Files:      src/errors.h

Patch 8.2.4014
Problem:    Git and gitcommit file types not properly recognized.
Solution:   Adjust filetype detection. (Tim Pope, closes #9477)
Files:      runtime/filetype.vim, runtime/scripts.vim,
            src/testdir/test_filetype.vim

Patch 8.2.4015
Problem:    Build failure with tiny features. (Tony Mechelynck)
Solution:   Adjust #ifdefs.
Files:      src/errors.h

Patch 8.2.4016
Problem:    Vim9: incorrect error for argument that is shadowing var.
Solution:   Ignore variable that is not in block where the function was
            defined.
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.4017
Problem:    Gcc warns for misleading indent in Athena menu code.
Solution:   Add curlies around the two statements. (Dominique Pellé,
            closes #9480)
Files:      src/gui_athena.c

Patch 8.2.4018
Problem:    ml_get error when win_execute redraws with Visual selection.
Solution:   Disable Visual area temporarily. (closes #9479)
Files:      src/evalwindow.c, src/proto/evalwindow.pro, src/structs.h,
            src/evalbuffer.c, src/proto/evalbuffer.pro, src/evalvars.c,
            src/if_py_both.h, src/evalfunc.c,
            src/testdir/test_execute_func.vim

Patch 8.2.4019
Problem:    Vim9: import mechanism is too complicated.
Solution:   Do not use the Javascript mechanism but a much simpler one.
Files:      runtime/doc/vim9.txt, src/vim9script.c, src/proto/vim9script.pro,
            src/errors.h, src/structs.h, src/eval.c, src/proto/eval.pro,
            src/evalvars.c, src/proto/evalvars.pro, src/userfunc.c,
            src/vim9expr.c, src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_assign.vim, src/testdir/test_vim9_script.vim

Patch 8.2.4020 (after 8.2.4019)
Problem:    Debugger test fails.
Solution:   Fix import statement.
Files:      src/testdir/test_debugger.vim

Patch 8.2.4021 (after 8.2.4019)
Problem:    Missing part of the :import changes.
Solution:   Add changes in vim9cmds.c.
Files:      src/vim9cmds.c

Patch 8.2.4022
Problem:    Two error messages in the wrong file.
Solution:   Use the error message from errors.h.
Files:      src/popupwin.c, src/usercmd.c

Patch 8.2.4023
Problem:    Using uninitialized variable.
Solution:   Initialize "ufunc" also when an item is not exported.
Files:      src/vim9script.c

Patch 8.2.4024
Problem:    Confusing error message if imported name is used directly.
Solution:   Give a better error message.
Files:      src/eval.c, src/proto/eval.pro, src/evalvars.c, src/userfunc.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.4025
Problem:    Error for import not ending in .vim does not work for .vimrc.
Solution:   Check that .vim is the end. (closes #9484)
Files:      src/vim9script.c, src/errors.h, src/testdir/test_vim9_script.vim

Patch 8.2.4026
Problem:    ml_get error with specific win_execute() command. (Sean Dewar)
Solution:   Check cursor and Visual area are OK.
Files:      src/evalwindow.c, src/testdir/test_execute_func.vim

Patch 8.2.4027
Problem:    Import test fails on MS-Windows.
Solution:   Use a different directory name.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.4028
Problem:    ml_get error with :doautoall and Visual area. (Sean Dewar)
Solution:   Disable Visual mode while executing autocommands.
Files:      src/structs.h, src/autocmd.c, src/testdir/test_autocmd.vim

Patch 8.2.4029
Problem:    Debugging NFA regexp my crash, cached indent may be wrong.
Solution:   Fix some debug warnings in the NFA regexp code.  Make sure log_fd
            is set when used.  Fix breakindent and indent caching. (Christian
            Brabandt, closes #9482)
Files:      src/indent.c, src/optionstr.c, src/regexp_nfa.c

Patch 8.2.4030
Problem:    A script local funcref is not found from a mapping.
Solution:   When looking for a function, also find a script-local funcref.
            (closes #9485)
Files:      src/evalvars.c, src/proto/evalvars.pro, src/userfunc.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.4031
Problem:    Crash in xterm with only two lines. (Dominique Pellé)
Solution:   Only perform xterm compatibility test if possible. (closes #9488)
Files:      src/term.c, src/testdir/test_startup.vim

Patch 8.2.4032
Problem:    ATTRIBUTE_NORETURN is not needed.
Solution:   Use NORETURN(). (Ozaki Kiichi, closes #9487)
Files:      src/if_ruby.c, src/vim.h

Patch 8.2.4033
Problem:    Running filetype tests leaves directory behind.
Solution:   Delete the top directory. (closes #9483)
Files:      src/testdir/test_filetype.vim

Patch 8.2.4034
Problem:    Coverity warns for possibly using a NULL pointer.
Solution:   Check v_partial is not NULL.
Files:      src/vim9type.c

Patch 8.2.4035
Problem:    Timer triggered at the debug prompt may cause trouble.
Solution:   Do not trigger any timer at the debug prompt. (closes #9481)
Files:      src/time.c

Patch 8.2.4036
Problem:    Vim9: script test file is getting too long.
Solution:   Split the import/export functionality to a separate file.
Files:      src/testdir/test_vim9_script.vim, src/testdir/test_vim9_import.vim,
            src/testdir/Make_all.mak

Patch 8.2.4037
Problem:    Insert mode completion is insufficiently tested.
Solution:   Add more tests.  Fix uncovered memory leak. (Yegappan Lakshmanan,
            closes #9489)
Files:      src/insexpand.c, src/testdir/test_ins_complete.vim

Patch 8.2.4038
Problem:    Various code not used when features are disabled.
Solution:   Add #ifdefs. (Dominique Pellé, closes #9491)
Files:      src/alloc.c, src/buffer.c, src/charset.c, src/clipboard.c,
            src/cmdhist.c, src/crypt.c, src/edit.c, src/eval.c,
            src/evalbuffer.c, src/evalfunc.c, src/ex_docmd.c, src/globals.h,
            src/gui_xim.c, src/hashtab.c, src/highlight.c, src/insexpand.c,
            src/main.c, src/mark.c, src/message.c, src/misc1.c, src/misc2.c,
            src/ops.c, src/option.c, src/option.h, src/optionstr.c,
            src/register.c, src/scriptfile.c, src/tag.c, src/term.c,
            src/typval.c, src/usercmd.c, src/userfunc.c, src/vim9script.c,
            src/vim9type.c

Patch 8.2.4039
Problem:    The xdiff library is linked in even when not used.
Solution:   Use configure to decide whether xdiff object files are included.
Files:      src/Makefile, src/config.mk.in, src/configure.ac,
            src/auto/configure, src/feature.h

Patch 8.2.4040
Problem:    Keeping track of allocated lines in user functions is too
            complicated.
Solution:   Instead of freeing individual lines keep them all until the end.
Files:      src/alloc.c, src/proto/alloc.pro, src/vim9compile.c,
            src/userfunc.c, src/proto/userfunc.pro, src/message.c,
            src/usercmd.c, src/viminfo.c, src/testdir/test_vim9_func.vim

Patch 8.2.4041
Problem:    Using uninitialized pointer.
Solution:   Store "ht" when variable is in another script.
Files:      src/evalvars.c

Patch 8.2.4042
Problem:    Vim9: build error.
Solution:   Use grow array instead of character pointer.
Files:      src/vim9execute.c

Patch 8.2.4043
Problem:    Using int for second argument of ga_init2().
Solution:   Remove unnecessary type cast (int) when using sizeof().
Files:      src/arglist.c, src/channel.c, src/cmdexpand.c, src/dict.c,
            src/digraph.c, src/eval.c, src/evalfunc.c, src/evalvars.c,
            src/evalwindow.c, src/ex_docmd.c, src/fileio.c, src/filepath.c,
            src/findfile.c, src/fold.c, src/hardcopy.c, src/help.c,
            src/job.c, src/list.c, src/menu.c, src/os_win32.c, src/register.c,
            src/scriptfile.c, src/spellfile.c, src/spellsuggest.c,
            src/strings.c, src/syntax.c, src/tag.c, src/terminal.c,
            src/undo.c, src/usercmd.c, src/userfunc.c, src/vim9execute.c,
            src/viminfo.c, src/window.c, src/if_py_both.h

Patch 8.2.4044
Problem:    Vim9: no error when importing the same script twice.
Solution:   Give an error, unless it is a reload.
Files:      src/vim9script.c, src/errors.h, src/testdir/test_vim9_import.vim

Patch 8.2.4045
Problem:    Some global functions are only used in one file.
Solution:   Make the functions static. (Yegappan Lakshmanan, closes #9492)
Files:      src/ex_getln.c, src/highlight.c, src/proto/ex_getln.pro,
            src/proto/highlight.pro, src/proto/vim9compile.pro,
            src/proto/vim9instr.pro, src/proto/window.pro, src/vim9compile.c,
            src/vim9instr.c, src/window.c

Patch 8.2.4046
Problem:    Some error messages not in the right place.
Solution:   Adjust the errors file.  Fix typo.
Files:      src/errors.h, src/regexp_bt.c, src/typval.c,

Patch 8.2.4047
Problem:    Depending on the build features error messages are unused.
Solution:   Add #ifdefs. (Dominique Pellé, closes #9493)
Files:      src/errors.h

Patch 8.2.4048
Problem:    gcc complains about use of "%p" in printf.
Solution:   Add (void *) typecast. (Dominique Pellé, closes #9494)
Files:      src/if_py_both.h

Patch 8.2.4049
Problem:    Vim9: reading before the start of the line with "$" by itself.
Solution:   Do not subtract one when reporting the error.
Files:      src/vim9expr.c, src/testdir/test_vim9_expr.vim

Patch 8.2.4050
Problem:    Vim9: need to prefix every item in an autoload script.
Solution:   First step in supporting "vim9script autoload" and "import
            autoload".
Files:      runtime/doc/repeat.txt, runtime/doc/vim9.txt, src/structs.h,
            src/errors.h, src/vim9script.c, src/scriptfile.c,
            src/proto/scriptfile.pro, src/userfunc.c, src/eval.c,
            src/evalvars.c, src/vim9compile.c, src/proto/vim9compile.pro,
            src/vim9expr.c, src/testdir/test_vim9_script.vim

Patch 8.2.4051
Problem:    Compiler complains about possibly uninitialized variable.
Solution:   Add code to avoid a compiler warning. (John Marriott)
Files:      src/scriptfile.c

Patch 8.2.4052
Problem:    Not easy to resize a window from a plugin.
Solution:   Add win_move_separator() and win_move_statusline() functions.
            (Daniel Steinberg, closes #9486)
Files:      runtime/doc/builtin.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/evalwindow.c, src/proto/evalwindow.pro,
            src/testdir/test_window_cmd.vim

Patch 8.2.4053
Problem:    Vim9: autoload mechanism doesn't fully work yet.
Solution:   Define functions and variables with their autoload name, add the
            prefix when calling a function, find the variable in the table of
            script variables.
Files:      src/structs.h, src/scriptfile.c, src/proto/scriptfile.pro,
            src/vim9script.c, src/proto/vim9script.pro, src/userfunc.c,
            src/evalvars.c, src/testdir/test_vim9_script.vim

Patch 8.2.4054 (after 8.2.4053)
Problem:    Vim9 script test fails.
Solution:   Add missing change.
Files:      src/vim9compile.c

Patch 8.2.4055
Problem:    Vim9: line break in expression causes v:errmsg to be filled.
            (Yegappan Lakshmanan)
Solution:   Do not give an error when skipping over an expression.
Files:      src/userfunc.c, src/testdir/test_vim9_expr.vim

Patch 8.2.4056
Problem:    Vim9: memory leak when exporting function in autoload script.
Solution:   Free the name if replacing it.
Files:      src/scriptfile.c

Patch 8.2.4057
Problem:    Vim9: not fully implementing the autoload mechanism.
Solution:   Allow for exporting a legacy function.  Improve test coverage.
Files:      src/vim9script.c, src/testdir/test_vim9_import.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.4058
Problem:    Vim9: import test failure in wrong line.
Solution:   Adjust line number.
Files:      src/testdir/test_vim9_import.vim

Patch 8.2.4059
Problem:    Vim9: an expression of a map cannot access script-local items.
            (Maxim Kim)
Solution:   Use the script ID of where the map was defined.
Files:      src/getchar.c, src/map.c, src/proto/map.pro,
            src/testdir/test_vim9_import.vim

Patch 8.2.4060
Problem:    win_execute() is slow on systems where getcwd() or chdir() is
            slow. (Rick Howe)
Solution:   Avoid using getcwd() and chdir() if no local directory is used and
            'acd' is not set. (closes #9504)
Files:      src/evalwindow.c

Patch 8.2.4061
Problem:    Codecov bash script is deprecated.
Solution:   Use the codecov action. (Ozaki Kiichi, closes #9505)
Files:      .github/workflows/ci.yml

Patch 8.2.4062
Problem:    Match highlighting of tab too short.
Solution:   Do not stop match highlighting if on a Tab. (Christian Brabandt,
            closes #9507, closes #9500)
Files:      src/drawline.c, src/testdir/test_match.vim,
            src/testdir/dumps/Test_match_tab_linebreak.dump

Patch 8.2.4063
Problem:    Vim9: exported function in autoload script not found. (Yegappan
            Lakshmanan)
Solution:   Use the autoload prefix to search for the function.
Files:      src/userfunc.c, src/testdir/test_vim9_import.vim

Patch 8.2.4064
Problem:    Foam files are not detected.
Solution:   Detect the foam filetype by the path and file contents. (Mohammed
            Elwardi Fadeli, closes #9501)
Files:      runtime/filetype.vim, runtime/autoload/dist/ft.vim,
            src/testdir/test_filetype.vim

Patch 8.2.4065
Problem:    Computation overflow with large count for :yank.
Solution:   Avoid an overflow.
Files:      src/ex_docmd.c, src/testdir/test_excmd.vim

Patch 8.2.4066
Problem:    Vim9: imported autoload script loaded again.
Solution:   Do not create a new imported_T every time.
Files:      src/vim9script.c, src/vim9compile.c,
            src/testdir/test_vim9_import.vim

Patch 8.2.4067
Problem:    Vim9: cannot call imported function with :call. (Drew Vogel)
Solution:   Translate the function name. (closes #9510)
Files:      src/userfunc.c, src/testdir/test_vim9_import.vim

Patch 8.2.4068 (after 8.2.4066)
Problem:    Vim9: import test fails.
Solution:   Add missing change.
Files:      src/scriptfile.c

Patch 8.2.4069
Problem:    Vim9: import test fails on MS-Windows.
Solution:   Ignore case.  Adjust test to avoid name that only differs in case.
Files:      src/eval.c, src/scriptfile.c, src/testdir/test_vim9_import.vim

Patch 8.2.4070
Problem:    Using uninitialized memory when reading empty file.
Solution:   Check for empty file before checking for NL. (Dominique Pellé,
            closes #9511)
Files:      src/filepath.c, src/testdir/test_eval_stuff.vim

Patch 8.2.4071
Problem:    Vim9: no detection of return in try/endtry. (Dominique Pellé)
Solution:   Check if any of the blocks inside try/endtry did not end in
            return.
Files:      src/vim9.h, src/vim9compile.c, src/vim9cmds.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.4072
Problem:    Vim9: compiling function fails when autoload script is not loaded
            yet.
Solution:   Depend on runtime loading.
Files:      src/vim9expr.c, src/vim9script.c, src/vim9instr.c,
            src/vim9execute.c, src/testdir/test_vim9_import.vim

Patch 8.2.4073
Problem:    Coverity warns for using NULL pointer.
Solution:   Bail out when running out of memory. Check for running over end of
            a string.
Files:      src/userfunc.c,

Patch 8.2.4074
Problem:    Going over the end of NameBuff.
Solution:   Check length when appending a space.
Files:      src/drawscreen.c, src/testdir/test_edit.vim

Patch 8.2.4075 (after 8.2.4073)
Problem:    Test failures.
Solution:   Change check for NULL pointer.
Files:      src/userfunc.c

Patch 8.2.4076
Problem:    Memory leak in autoload import.
Solution:   Do not overwrite the autoload prefix.
Files:      src/vim9script.c

Patch 8.2.4077
Problem:    Not all Libsensors files are recognized.
Solution:   Add "sensors.d/*" pattern. (Doug Kearns)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4078
Problem:    Terminal test for current directory not used on FreeBSD.
Solution:   Make it work on FreeBSD. (Ozaki Kiichi, closes #9516) Add
            TermWait() inside Run_shell_in_terminal() as a generic solution.
Files:      src/testdir/test_terminal3.vim, src/testdir/term_util.vim,
            src/testdir/test_terminal.vim, src/testdir/test_terminal2.vim,
            src/testdir/test_mapping.vim

Patch 8.2.4079
Problem:    MS-Windows: "gvim --version" didn't work when build with VIMDLL.
Solution:   Adjust #ifdef. (Ken Takata, closes #9517)
Files:      src/main.c

Patch 8.2.4080
Problem:    Not sufficient test coverage for xxd.
Solution:   Add a few more test cases. (Erki Auerswald, closes #9515)
Files:      src/testdir/test_xxd.vim

Patch 8.2.4081
Problem:    CodeQL reports problem in if_cscope causing it to fail.
Solution:   Use execvp() instead of execl().  Merge the header file into the
            source file. (Ozaki Kiichi, closes #9519)
Files:      Filelist, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/Make_vms.mms, src/Makefile, src/if_cscope.c, src/if_cscope.h,
            src/testdir/test_cscope.vim

Patch 8.2.4082
Problem:    Check for autoload file name and prefix fails. (Christian J.
            Robinson)
Solution:   Only lower case the prefix on systems where the file name is not
            case sensitive.
Files:      src/scriptfile.c, src/testdir/test_vim9_import.vim

Patch 8.2.4083
Problem:    Vim9: no test for "vim9script autoload" and using script variable
            in the same script.
Solution:   Add a simple test.  Fix uncovered problem.
Files:      src/evalvars.c, src/testdir/test_vim9_import.vim

Patch 8.2.4084
Problem:    Memory leak when looking for autoload prefixed variable.
Solution:   Free the concatenated string.
Files:      src/evalvars.c

Patch 8.2.4085
Problem:    Vim9: no test for using import in legacy script.
Solution:   Add a test.
Files:      src/testdir/test_vim9_import.vim

Patch 8.2.4086
Problem:    "cctx" argument of find_func_even_dead() is unused.
Solution:   Remove the argument.
Files:      src/userfunc.c, src/proto/userfunc.pro, src/vim9compile.c,
            src/vim9instr.c, src/evalfunc.c, src/evalvars.c, src/testing.c,
            src/vim9execute.c, src/vim9expr.c, src/vim9script.c,
            src/vim9type.c

Patch 8.2.4087
Problem:    Cannot test items from an autoload script easily.
Solution:   Add the "autoload" value for test_override().
Files:      runtime/doc/testing.txt, src/testing.c, src/globals.h,
            src/vim9script.c, src/testdir/test_vim9_import.vim

Patch 8.2.4088
Problem:    Xxd cannot output everything in one line.
Solution:   Make zero columns mean infinite columns. (Erik Auerswald,
            closes #9524)
Files:      runtime/doc/xxd.1, runtime/doc/xxd.man, src/testdir/test_xxd.vim,
            src/xxd/xxd.c

Patch 8.2.4089 (after 8.2.4078)
Problem:    Terminal test for current directory fails on FreeBSD.
Solution:   Skip the test.
Files:      src/testdir/test_terminal3.vim

Patch 8.2.4090
Problem:    After restoring a session buffer order can be quite different.
Solution:   Create buffers first. (Evgeni Chasnovski, closes #9520)
Files:      src/session.c, src/testdir/test_mksession.vim

Patch 8.2.4091
Problem:    Virtcol is recomputed for statusline unnecessarily.
Solution:   Just use "w_virtcol". (closes #9523)
Files:      src/buffer.c, src/testdir/test_statusline.vim

Patch 8.2.4092
Problem:    macOS CI: unnecessarily doing "Install packages".
Solution:   Only do "Install packages" for huge build.  (Ozaki Kiichi,
