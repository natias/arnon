
Patch 8.2.3776
Problem:    When a tags file line is long a tag may not be found.
Solution:   When increasing the buffer size read the same line again.
Files:      src/tag.c, src/testdir/test_taglist.vim

Patch 8.2.3777
Problem:    Spell file write error not checked.
Solution:   Check writing the prefix conditions. (Bjorn Linse, closes #9323)
Files:      src/spellfile.c

Patch 8.2.3778
Problem:    Lambda debug test fails in some configurations.
Solution:   Check feature in a legacy function.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.3779
Problem:    Using freed memory when defining a user command from a user
            command.
Solution:   Do not use the command pointer after executing the command.
            (closes #9318)
Files:      src/usercmd.c, src/testdir/test_usercommands.vim

Patch 8.2.3780
Problem:    ":cd" works differently on MS-Windows.
Solution:   Add the 'cdhome' option. (closes #9324)
Files:      runtime/doc/editing.txt, runtime/doc/options.txt,
            runtime/doc/quickref.txt, runtime/optwin.vim, src/ex_docmd.c,
            src/option.h, src/optiondefs.h, src/testdir/runtest.vim,
            src/testdir/test_options.vim

Patch 8.2.3781
Problem:    The option window script is outdated.
Solution:   Add several changes.
Files:      runtime/optwin.vim

Patch 8.2.3782
Problem:    Vim9: no error if a function shadows a script variable.
Solution:   Check the function doesn't shadow a variable. (closes #9310)
Files:      src/userfunc.c, src/evalvars.c, src/vim.h,
            src/testdir/test_vim9_script.vim

Patch 8.2.3783
Problem:    Confusing error for using a variable as a function.
Solution:   If a function is not found but there is a variable, give a more
            useful error. (issue #9310)
Files:      src/eval.c, src/userfunc.c, src/proto/userfunc.pro,
            src/structs.h, src/vim9execute.c, src/testdir/test_functions.vim,
            src/testdir/test_vim9_script.vim, src/testdir/test_vim9_func.vim

Patch 8.2.3784
Problem:    The help for options is outdated.
Solution:   Include all the recent changes.
Files:      runtime/doc/options.txt

Patch 8.2.3785
Problem:    Running CI on macOS with gcc is not useful.
Solution:   Only use clang. (Ozaki Kiichi, closes #9326)  Also build with
            normal features.
Files:      .github/workflows/ci.yml

Patch 8.2.3786
Problem:    Test fails because of using Vim9 syntax in legacy function.
Solution:   Add "call".
Files:      src/testdir/test_functions.vim

Patch 8.2.3787
Problem:    No proper formatting of a C line comment after a statement.
Solution:   Find the start of the line comment, insert the comment leader and
            indent the comment properly.
Files:      src/change.c, src/proto/change.pro, src/search.c,
            src/proto/search.pro, src/cindent.c, src/edit.c, src/normal.c,
            src/textformat.c, src/testdir/test_textformat.vim,
            src/testdir/test_cindent.vim

Patch 8.2.3788
Problem:    Lambda for option that is a function may be garbage collected.
Solution:   Set a reference in the funcref. (Yegappan Lakshmanan,
            closes #9330)
Files:      src/eval.c, src/evalbuffer.c, src/evalvars.c, src/gui_xim.c,
            src/insexpand.c, src/ops.c, src/proto/eval.pro,
            src/proto/gui_xim.pro, src/proto/insexpand.pro, src/proto/ops.pro,
            src/proto/tag.pro, src/quickfix.c, src/tag.c,
            src/testdir/test_iminsert.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_normal.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_tagfunc.vim

Patch 8.2.3789
Problem:    Test_window_minimal_size can fail on a slow machine.
Solution:   Do not rely on timers firing at the expected time. (Ozaki Kiichi,
            closes #9335)
Files:      src/testdir/test_window_cmd.vim

Patch 8.2.3790
Problem:    Test for term_gettitle() fails in some environments.
Solution:   Make the digits after "VIM" optional. (Kenta Sato, closes #9334)
Files:      src/testdir/test_terminal2.vim

Patch 8.2.3791
Problem:    Build error with +cindent but without +smartindent.
Solution:   Move declaration of "do_cindent". (John Marriott)
Files:      src/change.c

Patch 8.2.3792
Problem:    Setting *func options insufficiently tested.
Solution:   Improve tests. (Yegappan Lakshmanan, closes #9337)
Files:      src/testdir/test_iminsert.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_normal.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_tagfunc.vim

Patch 8.2.3793
Problem:    Using "g:Func" as a funcref does not work in script context
            because "g:" is dropped.
Solution:   Keep "g:" in the name.  Also add parenthesis to avoid confusing
            operator precedence. (closes #9336)
Files:      src/evalvars.c, src/testdir/test_vim9_func.vim

Patch 8.2.3794
Problem:    Vim9: cannot find script-local func using "s:". (Yegappan
            Lakshmanan)
Solution:   Skip the "s:".
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.3795
Problem:    Too many #ifdefs.
Solution:   Graduate the jumplist feature.
Files:      runtime/doc/various.txt, runtime/doc/motion.txt, src/feature.h,
            src/buffer.c, src/change.c, src/evalfunc.c, src/ex_docmd.c,
            src/mark.c, src/normal.c, src/undo.c, src/version.c,
            src/viminfo.c, src/window.c, src/structs.h,
            src/testdir/test_changelist.vim, src/testdir/test_jumplist.vim,
            src/testdir/test_normal.vim

Patch 8.2.3796
Problem:    The funcexe_T struct members are not named consistently.
Solution:   Prefix "fe_" to all the members.
Files:      src/structs.h, src/eval.c, src/list.c, src/regexp.c,
            src/terminal.c, src/userfunc.c, src/vim9execute.c

Patch 8.2.3797
Problem:    No good reason to limit the message history in the tiny version.
Solution:   Always use 200.
Files:      runtime/doc/message.txt, src/feature.h

Patch 8.2.3798
Problem:    A :def callback function postpones an error message.
Solution:   Display the error after calling the function. (closes #9340)
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim,
            src/testdir/dumps/Test_opfunc_error.dump

Patch 8.2.3799 (after 8.2.3798)
Problem:    Edit test hangs or fails.
Solution:   Do not rethrow an exception when inside try/catch.
Files:      src/userfunc.c

Patch 8.2.3800
Problem:    When cross compiling the output of "uname" cannot be set. (Ben
            Reeves)
Solution:   Use cache variables. (closes #9338)
Files:      src/configure.ac, src/auto/configure

Patch 8.2.3801
Problem:    If a terminal shows in two windows, only one is redrawn.
Solution:   Reset the dirty row range only after redrawing all windows.
            (closes #9341)
Files:      src/terminal.c, src/proto/terminal.pro, src/drawscreen.c,
            src/testdir/test_terminal.vim

Patch 8.2.3802
Problem:    Terminal in two windows test fails on some systems.
Solution:   Wait a bit between commands.
Files:      src/testdir/test_terminal.vim

Patch 8.2.3803
Problem:    Crash when 'writedelay' is set and using a terminal window to
            execute a shell command.
Solution:   Check that "tl_vterm" isn't NULL. (closes #9346)
Files:      src/terminal.c

Patch 8.2.3804
Problem:    Script context not set when copying 'swf' and 'ts'.
Solution:   Use COPY_OPT_SCTX with the right argument. (closes #9347)
Files:      src/option.c

Patch 8.2.3805
Problem:    i3config files are not recognized.
Solution:   Add patterns to match i3config files. (Quentin Hibon,
            closes #7969)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3806
Problem:    Terminal focus test fails sometimes.
Solution:   Run the test function before others.
Files:      src/testdir/test_terminal.vim

Patch 8.2.3807
Problem:    Vim9: can call import with star directly.
Solution:   Check that the import used star.
Files:      src/userfunc.c, src/eval.c, src/testdir/test_vim9_script.vim

Patch 8.2.3808
Problem:    Vim9: obsolete TODO items
Solution:   Remove the comments.
Files:      src/vim9execute.c

Patch 8.2.3809
Problem:    Vim9: crash when garbage collecting a nested partial. (Virginia
            Senioria)
Solution:   Set references in all the funcstacks. (closes #9348)
Files:      src/vim9execute.c, src/proto/vim9execute.pro, src/structs.h,
            src/eval.c, src/testdir/test_vim9_func.vim

Patch 8.2.3810
Problem:    Vim9: expr4 test fails on MS-Windows.
Solution:   Do not give an error for a missing function name when skipping.
Files:      src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.3811
Problem:    The opfunc error test fails on a slow machine.
Solution:   Use WaitForAssert().
Files:      src/testdir/test_vim9_func.vim

Patch 8.2.3812
Problem:    Vim9: leaking memory in numbered function test.
Solution:   Skip "g:" when checking for numbered function.  Clean up after
            errors properly.
Files:      src/userfunc.c

Patch 8.2.3813
Problem:    confusing error when using :cc without error list. (Gary Johnson)
Solution:   Give the "no errors" error.
Files:      src/ex_docmd.c, src/testdir/test_quickfix.vim

Patch 8.2.3814
Problem:    .csx files and .sln files are not recognized.
Solution:   Add filetype patterns. (Doug Kearns)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3815
Problem:    Vim9: cannot have a multi-line dict inside a block.
Solution:   Do not split the command at a line break, handle NL characters
            as white space.
Files:      src/ex_docmd.c, src/charset.c, src/proto/charset.pro,
            src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.3816
Problem:    Compiler warning for possible loss of data on MS-Windows.
Solution:   Add type cast. (Mike Williams, closes #9349)
Files:      src/userfunc.c

Patch 8.2.3817 (after 8.2.3815)
Problem:    Vim9: Not using NL as command end does not work for :autocmd.
Solution:   Only ignore NL for commands with an expression argument.
Files:      src/ex_cmds.h, src/ex_docmd.c, src/testdir/test_usercommands.vim

Patch 8.2.3818
Problem:    Cannot filter or map characters in a string.
Solution:   Make filter() and map() work on a string. (Naruhiko Nishino,
            closes #9327)
Files:      runtime/doc/eval.txt, src/errors.h, src/list.c,
            src/testdir/test_filter_map.vim

Patch 8.2.3819 (after 8.2.3818)
Problem:    Test fails because error message changed.
Solution:   Update screendumps.
Files:      src/testdir/dumps/Test_popupwin_three_errors_1.dump,
            src/testdir/dumps/Test_popupwin_three_errors_2.dump

Patch 8.2.3820
Problem:    "vrc" does not replace composing characters, while "rc" does.
Solution:   Check the byte length including composing characters.
            (closes #9351)
Files:      src/ops.c, src/testdir/test_visual.vim

Patch 8.2.3821
Problem:    ASAN test run fails.
Solution:   Use asan_symbolize-13 instead of asan_symbolize-11.
Files:      .github/workflows/ci.yml

Patch 8.2.3822
Problem:    Leaking memory in map() and filter(), cannot use a string argument
            in Vim9 script.
Solution:   Fix the leak, adjust the argument check, also run the tests as
            Vim9 script. (Yegappan Lakshmanan, closes #9354)
Files:      src/errors.h, src/evalfunc.c, src/list.c, src/proto/typval.pro,
            src/testdir/test_filter_map.vim,
            src/testdir/test_vim9_builtin.vim, src/typval.c

Patch 8.2.3823
Problem:    Test for visual replace is in wrong function.
Solution:   Move it to another function.
Files:      src/testdir/test_visual.vim

Patch 8.2.3824
Problem:    No ASAN support for MSVC.
Solution:   Add ASAN support and fix a couple of uncovered problems. (Yegappan
            Lakshmanan, closes #9357)
Files:      src/Make_mvc.mak, src/findfile.c, src/os_mswin.c,
            src/testdir/test_fnamemodify.vim

Patch 8.2.3825
Problem:    Various comments could be improved.
Solution:   Improve the comments.
Files:      src/getchar.c, src/mbyte.c, src/regexp_nfa.c,
            src/testdir/test_edit.vim, src/gui_motif.c

Patch 8.2.3826
Problem:    Vim9: using "g:Func" as a funcref does not work in a :def
            function.
Solution:   Include "g:" in the function name. (closes #9336)
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.3827
Problem:    Huntr badge does not really fit in the list.
Solution:   Move the link to Huntr to the issue template.
Files:      Filelist, .github/ISSUE_TEMPLATE/bug_report.yml, README.md

Patch 8.2.3828
Problem:    when opening a terminal from a timer the first typed character
            is lost. (Virginia Senioria)
Solution:   When opening a terminal while waiting for a character put K_IGNORE
            in the input buffer.
Files:      src/terminal.c, src/edit.c, src/testdir/test_terminal.vim

Patch 8.2.3829
Problem:    No error when setting a func option to a script-local function.
Solution:   Give an error if the name starts with "s:". (closes #9358)
Files:      src/option.c, src/testdir/test_tagfunc.vim,
            src/testdir/dumps/Test_set_tagfunc_on_cmdline.dump

Patch 8.2.3830
Problem:    Error messages are spread out.
Solution:   Move more error messages to errors.h.
Files:      src/globals.h, src/errors.h, src/buffer.c, src/dict.c, src/diff.c,
            src/digraph.c, src/eval.c, src/evalfunc.c, src/evalvars.c,
            src/misc2.c, src/quickfix.c, src/typval.c, src/ui.c,
            src/userfunc.c, src/vim9compile.c, src/vim9execute.c,
            src/vim9type.c, src/window.c

Patch 8.2.3831
Problem:    Opfunc test fails when missing feature changes function name.
            (Dominique Pellé)
Solution:   Check the relevant screen line instead of using a screendump.
            (closes #9360)
Files:      src/testdir/test_vim9_func.vim,
            src/testdir/dumps/Test_opfunc_error.dump

Patch 8.2.3832 (after 8.2.3830)
Problem:    Test fails because of changed error message.
Solution:   Adjust the expected error message.
Files:      src/testdir/test_vimscript.vim

Patch 8.2.3833
Problem:    Error from term_start() not caught by try/catch.
Solution:   save and restore did_emsg when applying autocommands. (Ozaki
            Kiichi, closes #9361)
Files:      src/autocmd.c, src/testdir/test_terminal3.vim

Patch 8.2.3834
Problem:    Test_out_cb often fails on Mac.
Solution:   Increase the timeout with every retry.
Files:      src/testdir/test_channel.vim

Patch 8.2.3835
Problem:    The inline-function example does not work.
Solution:   Drop ":let".  Add EX_EXPR_ARG to CMD_var. (issue #9352)
Files:      runtime/doc/vim9.txt, src/ex_cmds.h,
            src/testdir/test_vim9_expr.vim

Patch 8.2.3836
Problem:    Vim9: comment after expression not skipped to find NL.
Solution:   After evaluating an expression look for a newline after a #
            comment.
Files:      src/eval.c

Patch 8.2.3837
Problem:    QNX: crash when compiled with GUI but using terminal.
Solution:   Check gui.in_use is set. (Hirohito Higashi, closes #9363)
Files:      src/autocmd.c

Patch 8.2.3838
Problem:    Cannot use script-local function for setting *func options.
Solution:   Use the script context. (Yegappan Lakshmanan, closes #9362)
Files:      src/option.c, src/testdir/dumps/Test_set_tagfunc_on_cmdline.dump,
            src/testdir/test_ins_complete.vim, src/testdir/test_normal.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_tagfunc.vim

Patch 8.2.3839
Problem:    Using \z() with \z1 not tested for syntax highlighting.
Solution:   Add a test. (Dominique Pellé, closes #9365)
Files:      src/testdir/test_syntax.vim

Patch 8.2.3840
Problem:    Useless test for negative index in check functions.
Solution:   Remove the test for negative index. (Naruhiko Nishino,
            closes #9364)
Files:      src/typval.c

Patch 8.2.3841
Problem:    Vim9: outdated TODO items, disabled tests that work.
Solution:   Remove TODO items, run tests that work now.  Check that a dict
            item isn't locked.
Files:      src/vim9execute.c, src/evalvars.c, src/errors.h, src/globals.h,
            src/testdir/test_listdict.vim, src/testdir/test_vim9_assign.vim

Patch 8.2.3842
Problem:    Vim9: can change locked list and list items.
Solution:   Check that a list and list item isn't locked.
Files:      src/vim9execute.c, src/testdir/test_listdict.vim

Patch 8.2.3843
Problem:    Dep3patch files are not recognized.
Solution:   Recognize dep3patch files by their location and content. (James
            McCoy, closes #9367)
Files:      runtime/autoload/dist/ft.vim, runtime/filetype.vim,
            src/testdir/test_filetype.vim

Patch 8.2.3844
Problem:    Vim9: no type error if assigning a value with type func(number) to
            a variable of type func(string).
Solution:   Use check_type_maybe(): return MAYBE if a runtime type check is
            useful.  (issue #8492)
Files:      src/vim9type.c, src/proto/vim9type.pro, src/vim9compile.c,
            src/testdir/test_vim9_assign.vim

Patch 8.2.3845
Problem:    Vim9: test fails when the channel feature is missing.
Solution:   Check for the channel feature. (Dominique Pellé, closes #9368)
Files:      src/testdir/test_vim9_builtin.vim

Patch 8.2.3846
Problem:    No error when using control character for 'lcs' or 'fcs'.
Solution:   Use char2cells() to check the width. (closes #9369)
Files:      src/screen.c, src/testdir/test_display.vim,
            src/testdir/test_listchars.vim

Patch 8.2.3847
Problem:    Illegal memory access when using a lambda with an error.
Solution:   Avoid skipping over the NUL after a string.
Files:      src/eval.c, src/testdir/test_lambda.vim

Patch 8.2.3848
Problem:    Cannot use reduce() for a string.
Solution:   Make reduce() work with a string. (Naruhiko Nishino, closes #9366)
Files:      runtime/doc/eval.txt, src/errors.h, src/evalfunc.c, src/list.c,
            src/typval.c, src/proto/typval.pro, src/testdir/test_listdict.vim,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.3849
Problem:    Functions implementing reduce and map are too long.
Solution:   Use a function for each type of value.  Add a few more test cases
            and add to the help. (Yegappan Lakshmanan, closes #9370)
Files:      runtime/doc/eval.txt, src/list.c, src/testdir/test_listdict.vim

Patch 8.2.3850
Problem:    Illegal memory access when displaying a partial.
Solution:   Terminate the string with a NUL. (closes #9371)
Files:      src/eval.c, src/testdir/test_messages.vim

Patch 8.2.3851
Problem:    Vim9: overhead when comparing string, dict or function.
Solution:   Call the intended compare function directly.  Refactor to avoid
            duplicated code.
Files:      src/vim9execute.c, src/typval.c, src/proto/typval.pro

Patch 8.2.3852
Problem:    Vim9: not enough tests.
Solution:   Also run existing tests for Vim9 script.  Make errors more
            consistent.
Files:      src/testdir/test_listdict.vim, src/eval.c, src/vim9compile.c,
            src/errors.h

Patch 8.2.3853
Problem:    Vim9: not enough tests.
Solution:   Run more existing tests for Vim9 script.
Files:      src/testdir/test_listdict.vim

Patch 8.2.3854
Problem:    Vim9: inconsistent arguments for test functions.
Solution:   When :def function and script have different arguments use a list
            with two items instead of a separate function.
Files:      src/testdir/vim9.vim, src/testdir/test_execute_func.vim,
            src/testdir/test_float_func.vim, src/testdir/test_functions.vim,
            src/testdir/test_glob2regpat.vim, src/testdir/test_listdict.vim,
            src/testdir/test_vim9_assign.vim,
            src/testdir/test_vim9_builtin.vim, src/testdir/test_vim9_cmd.vim,
            src/testdir/test_vim9_expr.vim, src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.3855
Problem:    Illegal memory access when displaying a blob.
Solution:   Append a NUL at the end. (Yegappan Lakshmanan, closes #9372)
Files:      src/blob.c, src/regexp_nfa.c, src/testdir/test_blob.vim,
            src/testdir/test_messages.vim

Patch 8.2.3856
Problem:    Vim9: not enough tests.
Solution:   Run more expression tests also with Vim9. Fix an uncovered
            problem.
Files:      src/vim9compile.c, src/testdir/test_expr.vim, src/testdir/vim9.vim

Patch 8.2.3857
Problem:    Vim9: inconsistent error for using function().
Solution:   Use a runtime type check for the result of function().
            (closes #8492)
Files:      src/evalfunc.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3858
Problem:    Vim9: not enough tests.
Solution:   Add tests for :try/:catch and :redir. Add missing type check.
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_cmd.vim

Patch 8.2.3859
Problem:    Vim9: some code lines not tested.
Solution:   Add a few specific tests.
Files:      src/vim9compile.c, src/testdir/test_vim9_cmd.vim, src/errors.h,
            src/testdir/test_vim9_script.vim

Patch 8.2.3860
Problem:    Vim9: codecov struggles with the file size.
Solution:   Split vim9compile.c into four files.
Files:      src/vim9compile.c, src/proto/vim9compile.pro, src/vim9instr.c,
            src/proto/vim9instr.pro, src/vim9expr.c, src/proto/vim9expr.pro,
            src/vim9cmds.c, src/proto/vim9cmds.pro, src/vim9.h,
            src/vim9execute.c, src/vim9script.c, src/proto.h,
            src/Makefile, src/Make_ami.mak, src/Make_cyg_ming.mak,
            src/Make_mvc.mak, src/Make_vms.mms

Patch 8.2.3861
Problem:    List of distributed files is outdated.
Solution:   Add new files.
Files:      Filelist

Patch 8.2.3862
Problem:    Crash on exit with EXITFREE and using win_execute().
Solution:   Also save and restore tp_topframe. (issue #9374)
Files:      src/evalwindow.c, src/testdir/test_execute_func.vim

Patch 8.2.3863 (after 8.2.3860)
Problem:    Various build flags accidentally enabled.
Solution:   Revert several lines in Makefile.
Files:      src/Makefile

Patch 8.2.3864
Problem:    Cannot disable requesting key codes from xterm.
Solution:   Add the 'xtermcodes' option, default on.
Files:      runtime/doc/options.txt, runtime/doc/term.txt, src/option.h,
            src/optiondefs.h, src/term.c, runtime/optwin.vim

Patch 8.2.3865
Problem:    Vim9: compiler complains about using "try" as a struct member.
Solution:   Rename "try" to "tryref".
Files:      src/vim9.h, src/vim9cmds.c, src/vim9execute.c, src/vim9instr.c

Patch 8.2.3866
Problem:    Vim9: type checking global variables is inconsistent.
Solution:   Use the "unknown" type in more places.
Files:      src/globals.h, src/vim9expr.c, src/vim9instr.c, src/vim9cmds.c,
            src/evalfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.3867
Problem:    Implementation of some list functions too complicated.
Solution:   Refactor do_sort_uniq(), f_count() and extend() (Yegappan
            Lakshmanan, closes #9378)
Files:      src/list.c

Patch 8.2.3868 (after 8.2.3866)
Problem:    Vim9: function test fails.
Solution:   Add missing changes.  Add test for earlier patch.
Files:      src/vim9type.c, src/testdir/test_vim9_disassemble.vim

Patch 8.2.3869
Problem:    Vim9: type checking for "any" is inconsistent.
Solution:   Always use a runtime type check for using "any" for a more
            specific type.
Files:      src/vim9type.c, src/vim9compile.c, src/vim9expr.c,
            src/testdir/test_vim9_func.vim

Patch 8.2.3870
Problem:    MS-Windows: wrong working directory when opening two files with
            right-click context menu. (Gabriel Dupras)
Solution:   Use the working directory and pass it on to the process creation.
            (Nir Lichtman, closes #9382, closes #8874)
Files:      src/GvimExt/gvimext.cpp, src/GvimExt/gvimext.h

Patch 8.2.3871
Problem:    List.c contains code for dict and blob.
Solution:   Refactor to put code where it belongs. (Yegappan Lakshmanan,
            closes #9386)
Files:      src/blob.c, src/dict.c, src/list.c, src/proto/blob.pro,
            src/proto/dict.pro, src/proto/list.pro, src/proto/strings.pro,
            src/strings.c, src/structs.h, src/testdir/test_filter_map.vim,
            src/testdir/test_listdict.vim, src/testdir/test_sort.vim

Patch 8.2.3872
Problem:    Vim9: finddir() and uniq() return types can be more specific.
Solution:   Adjust the return type.
Files:      src/evalfunc.c, src/testdir/vim9.vim,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.3873
Problem:    go.mod files are not recognized.
Solution:   Check for the file name. (closes #9380)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3874
Problem:    Cannot highlight the number column for a sign.
Solution:   Add the "numhl" argument. (James McCoy, closes #9381)
Files:      runtime/doc/options.txt, runtime/doc/sign.txt, src/drawline.c,
            src/popupwin.c, src/proto/sign.pro, src/sign.c, src/structs.h,
            src/testdir/test_signs.vim

Patch 8.2.3875
Problem:    gcc complains about buffer overrun.
Solution:   Use mch_memmove() instead of STRCPY(). (John Marriott)
Files:      src/dict.c

Patch 8.2.3876
Problem:    'cindent' does not recognize inline namespace.
Solution:   Skip over "inline" to find "namespace". (closes #9383)
Files:      src/cindent.c, src/testdir/test_cindent.vim

Patch 8.2.3877
Problem:    Function does not abort after a type error in compare
Solution:   Check getting number fails. (closes #9384)
Files:      src/typval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.3878
Problem:    Vim9: debugger tries to read more lines than there are.
Solution:   Check the number of lines. (closes #9394)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.3879
Problem:    getreg() and getregtype() contain dead code.
Solution:   Remove the needless check. (closes #9392)  Also refactor to put
            common code in a shared function.
Files:      src/evalfunc.c

Patch 8.2.3880
Problem:    Solution filter files are not recognized.
Solution:   Add pattern *.slnf and use json. (Doug Kearns)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3881
Problem:    QNX: crash when compiled with GUI but using terminal.
Solution:   Check the gui.in_use flag. (Hirohito Higashi, closes #9391)
Files:      src/main.c

Patch 8.2.3882 (after 8.2.3879)
Problem:    More duplicated code in f_getreginfo().
Solution:   Also use getreg_get_regname(). (closes #9398)
Files:      src/evalfunc.c

Patch 8.2.3883
Problem:    Crash when switching to other regexp engine fails.
Solution:   Check for regprog being NULL.
Files:      src/ex_cmds.c

Patch 8.2.3884
Problem:    Crash when clearing the argument list while using it.
Solution:   Lock the argument list for ":all".
Files:      src/arglist.c, src/testdir/test_arglist.vim

Patch 8.2.3885
Problem:    Arglist test fails.
Solution:   Adjust for locking the arglist for ":all".
Files:      src/testdir/test_arglist.vim

Patch 8.2.3886
Problem:    Can define autocmd for every event by using "au!".
Solution:   Check if a command is present also for "au!".
Files:      src/autocmd.c, src/testdir/test_autocmd.vim,
            src/testdir/test_arglist.vim

Patch 8.2.3887
Problem:    E1135 is used for two different errors.
Solution:   Renumber one error.
Files:      src/errors.h, src/testdir/test_mapping.vim

Patch 8.2.3888
Problem:    The argument list may contain duplicates.
Solution:   Add the :argdedeupe command. (Nir Lichtman, closes #6235)
Files:      runtime/doc/editing.txt, runtime/doc/index.txt, src/arglist.c,
            src/ex_cmdidxs.h, src/ex_cmds.h, src/proto/arglist.pro,
            src/testdir/test_arglist.vim

Patch 8.2.3889
Problem:    Duplicate code for translating script-local function name.
Solution:   Move the code to get_scriptlocal_funcname(). (Yegappan Lakshmanan,
            closes #9393)
Files:      src/evalfunc.c, src/evalvars.c, src/option.c, src/userfunc.c,
            src/proto/userfunc.pro, src/testdir/test_expr.vim,
            src/testdir/test_normal.vim

Patch 8.2.3890
Problem:    Vim9: type check for using v: variables is basic.
Solution:   Specify a more precise type.
Files:      src/evalvars.c, src/proto/evalvars.pro, src/vim9instr.c,
            src/testdir/test_vim9_expr.vim

Patch 8.2.3891
Problem:    Github CI: workflows may overlap.
Solution:   Cancel previous workflows when starting a new one. (Yegappan
            Lakshmanan, closes #9400)
Files:      .github/workflows/ci.yml, .github/workflows/codeql-analysis.yml

Patch 8.2.3892
Problem:    When modifyOtherKeys is used CTRL-C is not recognized.
Solution:   Check for uppercase C as well, fix minimum length.
Files:      src/ui.c

Patch 8.2.3893
Problem:    Vim9: many local variables are initialized with an instruction.
Solution:   Initialize local variables to zero to avoid the instructions.
Files:      src/vim9execute.c, src/vim9compile.c, src/vim9instr.c,
            src/proto/vim9instr.pro, src/vim9cmds.c,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.3894
Problem:    Vim9: no proper type check for first argument of call().
Solution:   Add specific type check.
Files:      src/evalfunc.c, src/typval.c, src/proto/typval.pro,
            src/errors.h, src/testdir/test_vim9_builtin.vim

Patch 8.2.3895
Problem:    Vim9: confusing error when using function() with a number.
Solution:   Check for a function or string argument.
Files:      src/evalfunc.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3896
Problem:    Vim9: no test for nested function not available later.
Solution:   Add a test.
Files:      src/testdir/test_vim9_func.vim

Patch 8.2.3897
Problem:    Vim9: the second argument of map() and filter() is not checked at
            compile time.
Solution:   Add more specific type check for the second argument.
Files:      src/evalfunc.c, src/globals.h, src/list.c,
            src/testdir/test_vim9_builtin.vim, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.3898
Problem:    Vim9: not sufficient testing for variable initialization.
Solution:   Add another test case.
Files:      src/testdir/test_vim9_disassemble.vim

Patch 8.2.3899 (after 8.2.3897)
Problem:    Vim9: test for map() on string fails.
Solution:   Expect string return type.
Files:      src/evalfunc.c

Patch 8.2.3900
Problem:    It is not easy to use a script-local function for an option.
Solution:   recognize s: and <SID> at the start of the expression. (Yegappan
            Lakshmanan, closes #9401)
Files:      runtime/doc/diff.txt, runtime/doc/fold.txt,
            runtime/doc/options.txt, runtime/doc/print.txt, src/optionstr.c,
            src/testdir/test_diffmode.vim, src/testdir/test_edit.vim,
            src/testdir/test_fold.vim, src/testdir/test_gf.vim,
            src/testdir/test_gui.vim, src/testdir/test_hardcopy.vim,
            src/testdir/test_normal.vim

Patch 8.2.3901
Problem:    Vim9: Cannot set 'cpo' in main .vimrc if using Vim9 script.
Solution:   Do not restore 'cpo' at the end of the main .vimrc.
Files:      runtime/doc/vim9.txt, runtime/doc/options.txt, src/scriptfile.c,
            src/structs.h, src/testdir/test_vim9_script.vim

Patch 8.2.3902
Problem:    Vim9: double free with nested :def function.
Solution:   Pass "line_to_free" from compile_def_function() and make sure
            cmdlinep is valid.
Files:      src/vim9compile.c, src/userfunc.c, src/proto/userfunc.pro,
            src/vim9execute.c, src/testdir/test_vim9_func.vim

Patch 8.2.3903
Problem:    "gM" does not count tabs as expected.
Solution:   Use linetabsize() instead of mb_string2cells(). (closes #9409)
Files:      src/normal.c, src/testdir/test_normal.vim

Patch 8.2.3904
Problem:    Vim9: skip expression type is not checked at compile time.
Solution:   Add argument type checks.
Files:      src/evalfunc.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3905
Problem:    Dockerfile using prefix name not recognized.
Solution:   Recognize Dockerfile.*. (closes #9410)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3906
Problem:    Vim9 help still contains "under development" warnings.
Solution:   Remove the explicit warning.
Files:      runtime/doc/vim9.txt

Patch 8.2.3907
Problem:    Error messages are spread out.
Solution:   Move error messages to errors.h.  Avoid duplicates.
Files:      src/userfunc.c, src/ex_cmds.c, src/viminfo.c, src/errors.h,
            src/testdir/test_user_func.vim

Patch 8.2.3908
Problem:    Cannot use a script-local function for 'foldtext'.
Solution:   Expand "s:" and "<SID>". (Yegappan Lakshmanan, closes #9411)
Files:      runtime/doc/fold.txt, src/optionstr.c, src/strings.c,
            src/testdir/test_blob.vim, src/testdir/test_expr.vim,
            src/testdir/test_filter_map.vim, src/testdir/test_fold.vim,
            src/testdir/test_listdict.vim

Patch 8.2.3909
Problem:    Containerfile using prefix name not recognized.
Solution:   Recognize Containerfile.*.
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3910
Problem:    When the compare function of sort() produces and error then sort()
            does not abort.
Solution:   Check if did_emsg was incremented.
Files:      src/list.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3911
Problem:    Vim9: type check for filter() does not accept unknown.
Solution:   Also accept unknown for the return type. (closes #9413)
Files:      src/evalfunc.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3912
Problem:    The ins_complete() function is much too long.
Solution:   Split it up into multiple functions. (Yegappan Lakshmanan,
            closes #9414)
Files:      src/insexpand.c

Patch 8.2.3913
Problem:    Help for expressions does not mention Vim9 syntax.
Solution:   Add the rules for Vim9 to the expression help.  Rename functions
            to match the help.
Files:      runtime/doc/vim9.txt, runtime/doc/eval.txt, src/vim9expr.c

Patch 8.2.3914
Problem:    Various spelling mistakes in comments.
Solution:   Fix the mistakes. (Dominique Pellé, closes #9416)
Files:      src/alloc.c, src/blowfish.c, src/buffer.c, src/cindent.c,
            src/clipboard.c, src/diff.c, src/drawline.c, src/edit.c,
            src/ex_cmds.c, src/ex_docmd.c, src/findfile.c, src/fold.c,
            src/getchar.c, src/gui.c, src/gui_athena.c, src/gui_gtk.c,
            src/gui_motif.c, src/gui_photon.c, src/gui_w32.c, src/gui_xmebw.c,
            src/if_python.c, src/if_python3.c, src/if_xcmdsrv.c, src/main.c,
            src/memline.c, src/menu.c, src/message.c, src/misc1.c, src/move.c,
            src/option.c, src/os_amiga.c, src/os_mac.h, src/os_mac_conv.c,
            src/os_mswin.c, src/os_unix.c, src/os_win32.c, src/os_win32.h,
            src/quickfix.c, src/regexp_nfa.c, src/screen.c, src/scriptfile.c,
            src/spell.c, src/spellfile.c, src/spellsuggest.c, src/strings.c,
            src/term.c, src/terminal.c, src/testdir/test_debugger.vim,
            src/testdir/test_source.vim, src/textformat.c, src/userfunc.c,
            src/vim.h, src/vim9.h, src/vim9cmds.c, src/vim9execute.c,
            src/winclip.c, src/window.c

Patch 8.2.3915
Problem:    illegal memory access when completing with invalid bytes.
Solution:   Avoid going over the end of the completion text.
Files:      src/insexpand.c, src/testdir/test_ins_complete.vim

Patch 8.2.3916
Problem:    No error for passing an invalid line number to append().
Solution:   In Vim9 script check for a non-negative number. (closes #9417)
Files:      src/evalbuffer.c, src/textprop.c, src/errors.h, src/indent.c,
            src/eval.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3917
Problem:    The eval.txt help file is way too big.
Solution:   Move the builtin function details to a separate file.
Files:      runtime/doc/eval.txt, runtime/doc/builtin.txt,
            runtime/doc/Makefile, runtime/doc/help.txt, runtime/doc/remote.txt

Patch 8.2.3918 (after 8.2.3916)
Problem:    Function list test fails.
Solution:   Adjust the test for the new location of the function list.
Files:      src/testdir/test_function_lists.vim

Patch 8.2.3919
Problem:    Vim9: wrong argument for append() results in two errors.
Solution:   Check did_emsg.  Also for setline().  Adjust the help for
            appendbufline().
Files:      runtime/doc/builtin.txt, src/evalbuffer.c, src/typval.c,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.3920
Problem:    Restoring directory after using another window is inefficient.
Solution:   Only restore the directory for win_execute().  Apply 'autochdir'
            only when needed.
Files:      src/evalwindow.c, src/testdir/test_autochdir.vim

Patch 8.2.3921
Problem:    The way xdiff is used is inefficient.
Solution:   Use hunk_func instead of the out_line callback. (Lewis Russell,
            closes #9344)
Files:      src/diff.c

Patch 8.2.3922
Problem:    Cannot build with dynamic Ruby 3.1.
Solution:   Add "_EXTRA" variables for CI.  Add missing functions. (Ozaki
            Kiichi, closes #9420)
Files:      ci/config.mk.clang-12.sed, ci/config.mk.clang.sed,
            ci/config.mk.sed, src/Makefile, src/auto/configure,
            src/config.mk.in, src/configure.ac, src/if_ruby.c, src/vim.h

Patch 8.2.3923
Problem:    Vim9: double free if a nested function has a line break in the
            argument list.
Solution:   Set cmdlinep when freeing the previous line.
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.3924
Problem:    Vim9: no error if something follows :enddef in a nested function.
Solution:   Give an error.  Move common code to a function.
Files:      src/userfunc.c, src/vim9compile.c, src/errors.h,
            src/testdir/test_vim9_func.vim

Patch 8.2.3925
Problem:    Diff mode confused by NUL bytes.
Solution:   Handle NUL bytes differently. (Christian Brabandt, closes #9421,
            closes #9418)
Files:      src/diff.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_bin_01.dump,
            src/testdir/dumps/Test_diff_bin_02.dump,
            src/testdir/dumps/Test_diff_bin_03.dump,
            src/testdir/dumps/Test_diff_bin_04.dump

Patch 8.2.3926 (after 8.2.3920)
Problem:    Build failure without the 'autochdir' option. (John Marriott)
Solution:   Add #ifdefs.
Files:      src/evalwindow.c

Patch 8.2.3927
Problem:    Vim9: double free when using lambda.
Solution:   Don't free both cmdline and line_to_free.
Files:      src/userfunc.c

Patch 8.2.3928
Problem:    Heredoc test fails.
Solution:   Correct order of function arguments.
Files:      src/userfunc.c

Patch 8.2.3929
Problem:    Using uninitialized variable.
Solution:   Set the option flags to zero for a terminal option.
Files:      src/option.c

Patch 8.2.3930
Problem:    getcmdline() argument has a misleading type.
Solution:   Use the correct type, even though the value is not used.
Files:      src/ex_getln.c, src/proto/ex_getln.pro, src/ex_docmd.c,
            src/normal.c, src/register.c, src/userfunc.c

Patch 8.2.3931
Problem:    Coverity reports a memory leak.
Solution:   Free memory in case of failure.
Files:      src/diff.c

Patch 8.2.3932
Problem:    C line comment not formatted properly.
Solution:   If a line comment follows after "#if" the next line is not the end
            of a paragraph.
Files:      src/textformat.c, src/testdir/test_textformat.vim

Patch 8.2.3933
Problem:    After ":cd" fails ":cd -" is incorrect.
Solution:   Set the previous directory only after successfully changing
            directory. (Richard Doty, closes #9419, closes #8983)
Files:      src/ex_docmd.c, src/testdir/test_cd.vim

Patch 8.2.3934
Problem:    Repeating line comment is undesired for "O" command.
Solution:   Do not copy line comment leader for "O". (closes #9426)
Files:      src/change.c, src/testdir/test_textformat.vim

Patch 8.2.3935
Problem:    CTRL-U in Insert mode does not fix the indent.
Solution:   Fix the indent when 'cindent' is set.
Files:      src/edit.c, src/testdir/test_textformat.vim

Patch 8.2.3936
Problem:    No proper test for maintaining change mark in diff mode.
Solution:   Run the test with internal and external diff. (Sean Dewar,
            closes #9424)
Files:      src/testdir/test_diffmode.vim

Patch 8.2.3937
Problem:    Insert mode completion function is too long.
Solution:   Refactor into multiple functions. (Yegappan Lakshmanan,
            closes #9423)
Files:      src/insexpand.c, src/testdir/test_ins_complete.vim

Patch 8.2.3938
Problem:    Line comment start is also found in a string.
Solution:   Skip line comments in a string.
Files:      src/cindent.c, src/proto/cindent.pro, src/search.c,
            src/testdir/test_textformat.vim
