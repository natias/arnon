Patch 8.2.1420
Problem:    Test 49 is old style.
Solution:   Convert remaining parts to new style. Remove obsolete items.
            (Yegappan Lakshmanan, closes #6683)
Files:      Filelist, runtime/doc/testing.txt, src/Make_mvc.mak, src/Makefile,
            src/testdir/Make_all.mak, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/README.txt, src/testdir/test49.in,
            src/testdir/test49.ok, src/testdir/test49.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_vimscript.vim

Patch 8.2.1421
Problem:    Vim9: handling "+" and "-" before number differs from Vim script.
Solution:   Use the same sequence of commands.
Files:      src/vim9compile.c

Patch 8.2.1422
Problem:    The Mac GUI implementation is outdated and probably doesn't even
            work.
Solution:   Remove the Mac GUI code.  The MacVim project provides the
            supported Vim GUI version.
Files:      Filelist, src/gui_mac.c, src/proto/gui_mac.pro, src/proto.h,
            src/Makefile, src/configure.ac, src/auto/configure,
            src/evalfunc.c, src/fileio.c, src/gui.c, src/if_mzsch.c,
            src/main.c, src/misc2.c, src/mouse.c, src/os_mac_conv.c,
            src/os_unix.c, src/feature.h, src/globals.h, src/gui.h,
            src/option.h, src/optiondefs.h, src/os_mac.h, src/structs.h,
            src/vim.h, src/INSTALLmac.txt

Patch 8.2.1423
Problem:    Vim9: find global function when looking for script-local.
Solution:   Don't strip prefix if name starts with "s:". (closes #6688)
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.1424 (after 8.2.1422)
Problem:    Mac build fails.
Solution:   Adjust configure to not fall back to Athena.  Adjust some other
            files.
Files:      src/configure.ac, src/auto/configure, src/os_macosx.m,
            src/version.c

Patch 8.2.1425
Problem:    Vim9: cannot use call() without :call.
Solution:   Do not skip over "call(". (closes #6689)
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.1426
Problem:    Vim9: cannot call autoload function in :def function.
Solution:   Load the autoload script. (closes #6690)
Files:      src/vim9execute.c, src/vim9compile.c, src/scriptfile.c,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1427
Problem:    Vim9: cannot use a range with marks in :def function.
Solution:   Parse range after colon. (closes #6686)
Files:      src/vim9compile.c, src/testdir/test_vim9_disassemble.vim

Patch 8.2.1428
Problem:    Vim9: :def function does not abort on nested function error.
Solution:   Check whether an error message was given. (closes #6691)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.1429
Problem:    Vim9: no error for missing white after : in dict.
Solution:   Check for white space. (closes #6671)  Also check that there is no
            white before the :.
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_func.vim

Patch 8.2.1430
Problem:    Vim9: error for missing comma instead of extra white space.
Solution:   Check if comma can be found after white space. (closes #6668)
            Also check for extra white space in literal dict. (closes #6670)
Files:      src/list.c, src/dict.c, src/vim9compile.c,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1431
Problem:    Vim9: no error for white space before comma in dict.
Solution:   Check for extra white space. (closes #6674)
Files:      src/vim9compile.c, src/dict.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1432
Problem:    Various inconsistencies in test files.
Solution:   Add modelines where they were missing.  Use Check commands instead
            of silently skipping over tests.  Adjust indents and comments.
            (Ken Takata, closes #6695)
Files:      src/testdir/test_arglist.vim, src/testdir/test_assert.vim,
            src/testdir/test_autochdir.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_autoload.vim, src/testdir/test_balloon.vim,
            src/testdir/test_balloon_gui.vim, src/testdir/test_behave.vim,
            src/testdir/test_blockedit.vim, src/testdir/test_breakindent.vim,
            src/testdir/test_bufline.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_cd.vim, src/testdir/test_changedtick.vim,
            src/testdir/test_changelist.vim, src/testdir/test_channel.vim,
            src/testdir/test_checkpath.vim, src/testdir/test_cindent.vim,
            src/testdir/test_cjk_linebreak.vim,
            src/testdir/test_clientserver.vim,
            src/testdir/test_close_count.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_command_count.vim,
            src/testdir/test_comparators.vim, src/testdir/test_compiler.vim,
            src/testdir/test_crypt.vim, src/testdir/test_cursorline.vim,
            src/testdir/test_curswant.vim, src/testdir/test_debugger.vim,
            src/testdir/test_delete.vim, src/testdir/test_diffmode.vim,
            src/testdir/test_digraph.vim, src/testdir/test_display.vim,
            src/testdir/test_edit.vim, src/testdir/test_environ.vim,
            src/testdir/test_erasebackword.vim,
            src/testdir/test_escaped_glob.vim, src/testdir/test_ex_equal.vim,
            src/testdir/test_ex_undo.vim, src/testdir/test_ex_z.vim,
            src/testdir/test_exec_while_if.vim, src/testdir/test_exists.vim,
            src/testdir/test_exists_autocmd.vim, src/testdir/test_exit.vim,
            src/testdir/test_expand_dllpath.vim,
            src/testdir/test_expr_utf8.vim, src/testdir/test_feedkeys.vim,
            src/testdir/test_file_size.vim, src/testdir/test_fileformat.vim,
            src/testdir/test_filter_cmd.vim,
            src/testdir/test_find_complete.vim, src/testdir/test_findfile.vim,
            src/testdir/test_fixeol.vim, src/testdir/test_flatten.vim,
            src/testdir/test_fnameescape.vim, src/testdir/test_fold.vim,
            src/testdir/test_functions.vim, src/testdir/test_ga.vim,
            src/testdir/test_getcwd.vim, src/testdir/test_getvar.vim,
            src/testdir/test_glob2regpat.vim, src/testdir/test_global.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim,
            src/testdir/test_highlight.vim, src/testdir/test_hlsearch.vim,
            src/testdir/test_iminsert.vim,
            src/testdir/test_increment_dbcs.vim,
            src/testdir/test_ins_complete.vim, src/testdir/test_interrupt.vim,
            src/testdir/test_job_fails.vim, src/testdir/test_join.vim,
            src/testdir/test_json.vim, src/testdir/test_jumplist.vim,
            src/testdir/test_jumps.vim, src/testdir/test_lambda.vim,
            src/testdir/test_langmap.vim, src/testdir/test_largefile.vim,
            src/testdir/test_lineending.vim, src/testdir/test_listchars.vim,
            src/testdir/test_listener.vim, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim,
            src/testdir/test_makeencoding.vim, src/testdir/test_man.vim,
            src/testdir/test_mapping.vim, src/testdir/test_marks.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_memory_usage.vim, src/testdir/test_menu.vim,
            src/testdir/test_messages.vim, src/testdir/test_mksession.vim,
            src/testdir/test_modeline.vim,
            src/testdir/test_nested_function.vim, src/testdir/test_number.vim,
            src/testdir/test_options.vim, src/testdir/test_packadd.vim,
            src/testdir/test_partial.vim, src/testdir/test_paste.vim,
            src/testdir/test_plus_arg_edit.vim, src/testdir/test_preview.vim,
            src/testdir/test_profile.vim, src/testdir/test_prompt_buffer.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_random.vim, src/testdir/test_recover.vim,
            src/testdir/test_regex_char_classes.vim,
            src/testdir/test_regexp_latin.vim, src/testdir/test_registers.vim,
            src/testdir/test_rename.vim, src/testdir/test_retab.vim,
            src/testdir/test_scriptnames.vim, src/testdir/test_scroll_opt.vim,
            src/testdir/test_scrollbind.vim, src/testdir/test_search_stat.vim,
            src/testdir/test_searchpos.vim, src/testdir/test_set.vim,
            src/testdir/test_sha256.vim, src/testdir/test_shift.vim,
            src/testdir/test_shortpathname.vim, src/testdir/test_signs.vim,
            src/testdir/test_sort.vim, src/testdir/test_sound.vim,
            src/testdir/test_source_utf8.vim, src/testdir/test_spellfile.vim,
            src/testdir/test_startup.vim, src/testdir/test_startup_utf8.vim,
            src/testdir/test_stat.vim, src/testdir/test_suspend.vim,
            src/testdir/test_swap.vim, src/testdir/test_syntax.vim,
            src/testdir/test_tab.vim, src/testdir/test_tabline.vim,
            src/testdir/test_tagcase.vim, src/testdir/test_tagjump.vim,
            src/testdir/test_taglist.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_termencoding.vim, src/testdir/test_terminal.vim,
            src/testdir/test_terminal2.vim, src/testdir/test_terminal3.vim,
            src/testdir/test_terminal_fail.vim,
            src/testdir/test_true_false.vim,
            src/testdir/test_utf8_comparisons.vim,
            src/testdir/test_vartabs.vim, src/testdir/test_version.vim,
            src/testdir/test_vim9_expr.vim, src/testdir/test_winbar.vim,
            src/testdir/test_winbuf_close.vim,
            src/testdir/test_window_cmd.vim, src/testdir/test_window_id.vim,
            src/testdir/test_windows_home.vim, src/testdir/test_wnext.vim,
            src/testdir/test_wordcount.vim, src/testdir/test_writefile.vim,
            src/testdir/test_xxd.vim

Patch 8.2.1433
Problem:    Vim9: cannot mingle comments in multi-line lambda.
Solution:   Skip over NULL lines. (closes #6694)
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1434
Problem:    Vim9: crash when lambda uses outer function argument.
Solution:   Set the flag that the outer context is used.
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1435
Problem:    Vim9: always converting to string for ".." leads to mistakes.
Solution:   Only automatically convert simple types.
Files:      runtime/doc/vim9.txt, src/vim9compile.c, src/vim9.h,
            src/vim9execute.c, src/proto/vim9execute.pro, src/eval.c,
            src/evalfunc.c, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.1436
Problem:    Function implementing :substitute has unexpected name.
Solution:   Rename from do_sub() to ex_substitute().
Files:      src/ex_cmds.c, src/proto/ex_cmds.pro, src/ex_docmd.c,
            src/ex_cmds.h

Patch 8.2.1437
Problem:    Vim9: 'statusline' is evaluated using Vim9 script syntax.
Solution:   Always use legacy script syntax.
Files:      src/eval.c, src/testdir/test_vim9_script.vim

Patch 8.2.1438
Problem:    Missing tests for interrupting script execution from debugger.
Solution:   Add tests. (Yegappan Lakshmanan, closes #6697)
Files:      src/testdir/test_debugger.vim

Patch 8.2.1439
Problem:    Tiny and small builds have no test coverage.
Solution:   Restore tests that do not depend on the +eval feature.
            (Ken Takata, closes #6696)
Files:      .travis.yml, Filelist, Makefile, runtime/doc/testing.txt,
            src/Make_mvc.mak, src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/runtest.vim,
            src/testdir/test1.in, src/testdir/test1.ok, src/testdir/test20.in,
            src/testdir/test20.ok, src/testdir/test21.in,
            src/testdir/test21.ok, src/testdir/test22.in,
            src/testdir/test22.ok, src/testdir/test23.in,
            src/testdir/test23.ok, src/testdir/test24.in,
            src/testdir/test24.ok, src/testdir/test25.in,
            src/testdir/test25.ok, src/testdir/test26.in,
            src/testdir/test26.ok, src/testdir/test27.in,
            src/testdir/test27.ok, src/testdir/test_options.vim

Patch 8.2.1440
Problem:    Debugger code insufficiently tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #6700)
Files:      src/testdir/test_debugger.vim, src/testdir/test_vimscript.vim

Patch 8.2.1441
Problem:    Running tests in tiny version gives error for summarize.vim.
Solution:   Set 'cpoptions' to allow for line continuation.  Restore
            redirecting test output to /dev/null.
Files:      src/testdir/summarize.vim, src/testdir/Makefile

Patch 8.2.1442
Problem:    Outdated references to the Mac Carbon GUI.
Solution:   Remove or update references. (Yee Cheng Chin, closes #6703)
Files:      READMEdir/README_extra.txt, src/Makefile, src/configure.ac,
            src/auto/configure, src/gui_haiku.cc, src/os_macosx.m,
            src/testdir/test_iminsert.vim, src/vim.h

Patch 8.2.1443
Problem:    Vim9: crash when interrupting a nested :def function.
Solution:   Push a dummy return value onto the stack. (closes #6701)
Files:      src/vim9execute.c

Patch 8.2.1444
Problem:    Error messages are spread out and names can be confusing.
Solution:   Start moving error messages to a separate file and use clear
            names.
Files:      Filelist, src/vim.h, src/globals.h, src/errors.h, src/Makefile,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Make_vms.mms,
            src/dict.c, src/evalvars.c, src/ex_docmd.c, src/list.c,
            src/userfunc.c, src/vim9compile.c, src/vim9execute.c,
            src/vim9script.c, src/vim9type.c

Patch 8.2.1445
Problem:    Vim9: function expanded name is cleared when sourcing a script
            again.
Solution:   Only clear the expanded name when deleting the function.
            (closes #6707)
Files:      src/userfunc.c, src/testdir/test_vim9_script.vim

Patch 8.2.1446
Problem:    Vim9: line number in error message is not correct.
Solution:   Set SOURCING_LNUM before calling emsg(). (closes #6708)
Files:      src/vim9execute.c, src/testdir/test_vim9_func.vim

Patch 8.2.1447
Problem:    Vim9: return type of keys() is list<any>.
Solution:   Should be list<string>. (closes #6711)
Files:      src/evalfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.1448
Problem:    Test 77a for VMS depends on small.vim which does not exist.
Solution:   Use the 'silent while 0" trick. (issue #6696)
Files:      src/testdir/test77a.in

Patch 8.2.1449
Problem:    Some test makefiles delete files that are not generated.
Solution:   Remove the deletion commands.
Files:      src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_vms.mms

Patch 8.2.1450
Problem:    Vim9: no check that script-local items don't become global.
Solution:   Add a test.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.1451
Problem:    Vim9: list type at script level only uses first item.
Solution:   Use all members, like in a compiled function. (closes #6712)
            Also for dictionary.
Files:      src/vim9type.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1452
Problem:    Vim9: dead code in to_name_end().
Solution:   Remove check for lambda and dict, it won't be used.
Files:      src/vim9compile.c

Patch 8.2.1453
Problem:    Vim9: failure to compile lambda not tested.
Solution:   Add a test case.
Files:      src/testdir/test_vim9_expr.vim

Patch 8.2.1454
Problem:    Vim9: failure invoking lambda with wrong arguments.
Solution:   Handle invalid arguments.  Add a test.
Files:      src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1455
Problem:    Vim9: crash when using typecast before constant.
Solution:   Generate constant before checking type.  Add tets.
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1456
Problem:    MS-Windows: test files are not deleted.
Solution:   use "del" instead of $(DEL).
Files:      src/testdir/Make_dos.mak

Patch 8.2.1457
Problem:    Vim9: the output of :disassemble cannot be interrupted.
Solution:   Check got_int. (closes #6715)
Files:      src/vim9execute.c

Patch 8.2.1458
Problem:    .gawk files not recognized.
Solution:   Recognize .gawk files. (Doug Kearns)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.1459
Problem:    Vim9: declaring a script variable at the script level does not
            infer the type.
Solution:   Get the type from the value. (closes #6716)
Files:      src/evalvars.c, src/testdir/test_vim9_script.vim

Patch 8.2.1460
Problem:    Error messages are spread out.
Solution:   Move more messages into errors.h.
Files:      src/errors.h, src/globals.h, src/vim9compile.c, src/vim9execute.c,
            src/vim9script.c, src/vim9type.c, src/scriptfile.c, src/ex_cmds.c,
            src/ex_docmd.c, src/match.c, src/eval.c, src/evalvars.c,
            src/userfunc.c, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_func.vim, src/testdir/test_vim9_script.vim

Patch 8.2.1461
Problem:    Vim9: string indexes are counted in bytes.
Solution:   Use character indexes. (closes #6574)
Files:      runtime/doc/eval.txt, src/eval.c, src/proto/eval.pro,
            src/vim9execute.c, src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1462
Problem:    Vim9: string slice not supported yet.
Solution:   Add support for string slicing.
Files:      src/errors.h, src/vim9compile.c, src/vim9.h, src/vim9execute.c,
            src/eval.c, src/proto/eval.pro, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.1463
Problem:    Vim9: list slice not supported yet.
Solution:   Add support for list slicing.
Files:      src/vim9compile.c, src/vim9.h, src/vim9execute.c, src/eval.c,
            src/list.c, src/proto/list.pro, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.1464
Problem:    Vim9: build warning for unused variable.
Solution:   Delete the variable declaration.
Files:      src/vim9execute.c

Patch 8.2.1465
Problem:    Vim9: subscript not handled properly.
Solution:   Adjust error message.  Remove dead code.  Disallow string to
            number conversion in scripts.
Files:      src/errors.h, src/vim9compile.c, src/vim9execute.c, src/eval.c,
            src/typval.c, src/list.c, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.1466
Problem:    Vim9: cannot index or slice a variable with type "any".
Solution:   Add runtime index and slice.
Files:      src/eval.c, src/proto/eval.pro, src/vim9compile.c,
            src/vim9execute.c, src/vim9.h, src/errors.h, src/list.c,
            src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.1467
Problem:    Vim9: :echomsg doesn't like a dict argument.
Solution:   Convert arguments like in legacy script. (closes #6717)
Files:      src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.1468
Problem:    Vim9: invalid error for missing white space.
Solution:   Don't skip over white space after index. (closes #6718)
Files:      src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1469
Problem:    Vim9: cannot assign string to string option.
Solution:   Change checks for option value. (closes #6720)
Files:      src/evalvars.c, src/testdir/test_vim9_script.vim

Patch 8.2.1470
Problem:    Errors in spell file not tested.
Solution:   Add test for spell file errors. (Yegappan Lakshmanan,
            closes #6721)
Files:      src/testdir/test_spellfile.vim

Patch 8.2.1471
Problem:    :const only locks the variable, not the value.
Solution:   Lock the value as ":lockvar 1 var" would do. (closes #6719)
Files:      src/evalvars.c, src/testdir/test_const.vim

Patch 8.2.1472
Problem:    ":argdel" does not work like ":.argdel" as documented. (Alexey
            Demin)
Solution:   Make ":argdel" work like ":.argdel". (closes #6727)
            Also fix giving the error "0 more files to edit".
Files:      src/arglist.c, src/ex_docmd.c, src/testdir/test_arglist.vim

Patch 8.2.1473
Problem:    Items in a list given to :const can still be modified.
Solution:   Work like ":lockvar! name" but don't lock referenced items.
            Make locking a blob work.
Files:      runtime/doc/eval.txt, src/evalvars.c, src/eval.c,
            src/testdir/test_const.vim

Patch 8.2.1474
Problem:    /usr/lib/udef/rules.d not recognized as udevrules.
Solution:   Adjust match pattern. (Haochen Tong, closes 36722)
Files:      runtime/autoload/dist/ft.vim, src/testdir/test_filetype.vim

Patch 8.2.1475
Problem:    Vim9: can't use v:true for option flags.
Solution:   Add tv_get_bool_chk(). (closes #6725)
Files:      src/typval.c, src/proto/typval.pro, src/channel.c

Patch 8.2.1476 (after 8.2.1474)
Problem:    Filetype test fails on MS-Windows.
Solution:   Remove "^" from pattern.
Files:      runtime/autoload/dist/ft.vim

Patch 8.2.1477
Problem:    Vim9: error when using bufnr('%').
Solution:   Don't give an error for using a string argument. (closes #6723)
Files:      src/evalbuffer.c, src/testdir/test_vim9_func.vim

Patch 8.2.1478
Problem:    Vim9: cannot use "true" for some popup options.
Solution:   Add dict_get_bool(). (closes #6725)
Files:      src/dict.c, src/proto/dict.pro, src/popupwin.c

Patch 8.2.1479
Problem:    Vim9: error for list index uses wrong line number.
Solution:   Set source line number. (closes #6724)  Add a way to assert the
            line number of the error with assert_fails().
Files:      runtime/doc/testing.txt, src/vim9execute.c, src/testing.c,
            src/evalfunc.c, src/message.c, src/globals.h, src/testdir/vim9.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1480
Problem:    Vim9: skip expression in search() gives error.
Solution:   use tv_get_bool() eval_expr_to_bool(). (closes #6729)
Files:      src/eval.c, src/typval.c, src/proto/typval.pro,
            src/testdir/test_vim9_func.vim

Patch 8.2.1481
Problem:    Vim9: line number reported with error may be wrong.
Solution:   Check line number in tests.
Files:      src/testdir/test_vim9_expr.vim, src/testdir/vim9.vim,
            src/vim9execute.c

Patch 8.2.1482
Problem:    Vim9: crash when using a nested lambda.
Solution:   Do not clear the growarray when not evaluating.  Correct pointer
            when getting the next line. (closes #6731)
Files:      src/eval.c, src/scriptfile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1483
Problem:    Vim9: error for using special as number when returning "false"
            from a popup filter.
Solution:   Use tv_get_bool(). (closes #6733)
Files:      src/popupwin.c

Patch 8.2.1484
Problem:    Flaky failure in assert_fails().
Solution:   Only used fourth argument if there is a third argument.
Files:      src/testing.c

Patch 8.2.1485
Problem:    Vim9: readdirex() expression doesn't accept bool.
Solution:   Accept both -1 and bool. (closes #6737)
Files:      src/filepath.c, src/testdir/test_vim9_func.vim

Patch 8.2.1486
Problem:    Vim9: readdir() expression doesn't accept bool.
Solution:   Merge with code for readdirex(). (closes #6737)
Files:      src/filepath.c, src/testdir/test_vim9_func.vim

Patch 8.2.1487
Problem:    Travis: installing snd-dummy is not always useful.
Solution:   Only install snd-dummy on amd64. (Ozaki Kiichi, closes #6738)
Files:      .travis.yml, ci/load-snd-dummy.sh

Patch 8.2.1488
Problem:    Text does not scroll when inserting above first line.
Solution:   Adjust off-by-one error. (Ken Takata, closes #6739)
Files:      src/drawscreen.c, src/testdir/test_display.vim,
            src/testdir/dumps/Test_display_scroll_at_topline.dump

Patch 8.2.1489
Problem:    Vim9: error when setting an option with setbufvar().
Solution:   Do not get a number from a string value. (closes #6740)
Files:      src/evalvars.c, src/testdir/test_vim9_func.vim

Patch 8.2.1490
Problem:    Vim9: using /= with float and number doesn't work.
Solution:   Better support assignment with operator. (closes #6742)
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.1491
Problem:    Vim9: crash when compiling heredoc lines start with comment.
Solution:   Skip over NULL pointers. Do not remove comment and empty lines
            when fetching function lines. (closes #6743)
Files:      src/vim9compile.c, src/scriptfile.c, src/proto/scriptfile.pro,
            src/structs.h, src/ex_docmd.c, src/proto/ex_docmd.pro,
            src/ex_cmds.h, src/autocmd.c, src/proto/autocmd.pro,
            src/ex_getln.c, src/proto/ex_getln.pro, src/userfunc.c,
            src/proto/userfunc.pro, src/evalfunc.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.1492
Problem:    Build failures.
Solution:   Move typedef out of #ifdef.  Adjust argument types.  Discover
            America.
Files:      src/structs.h, src/ex_docmd.c

Patch 8.2.1493
Problem:    Not enough test coverage for the spell file handling.
Solution:   Add spell file tests. (Yegappan Lakshmanan, closes #6728)
Files:      src/spellfile.c, src/testdir/test_spellfile.vim

Patch 8.2.1494
Problem:    Missing change to calling eval_getline().
Solution:   Change last argument.
Files:      src/eval.c

Patch 8.2.1495
Problem:    "make clean" may delete too many files.
Solution:   Do not delete $APPDIR. (closes #6751)
Files:      src/Makefile

Patch 8.2.1496
Problem:    Vim9: cannot use " #" in a mapping.
Solution:   Do not remove a comment with the EX_NOTRLCOM flag. (closes #6746)
Files:      src/ex_docmd.c, src/vim9compile.c, src/testdir/test_vim9_cmd.vim

Patch 8.2.1497
Problem:    CursorHold test is flaky. (Jakub Kądziołka)
Solution:   Use WaitForAssert() (closes #6754)
Files:      src/testdir/test_autocmd.vim

Patch 8.2.1498
Problem:    On slow systems tests can be flaky.
Solution:   Use TermWait() instead of term-wait(). (Yegappan Lakshmanan,
            closes #6756)
Files:      src/testdir/test_digraph.vim, src/testdir/test_display.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_terminal.vim, src/testdir/test_terminal3.vim,
            src/testdir/test_writefile.vim

Patch 8.2.1499
Problem:    Vim9: error when using "$" with col().
Solution:   Reorder getting the column value. (closes #6744)
Files:      src/eval.c, src/testdir/test_vim9_func.vim

Patch 8.2.1500
Problem:    Vim9: error when using address without a command.
Solution:   Execute the range itself. (closes #6747)
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.1501
Problem:    Vim9: concatenating to constant reverses order.
Solution:   Generate constant before option, register and environment
            variable. (closes #6757)
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1502
Problem:    Vim9: can use += with a :let command at script level.
Solution:   Give an error.
Files:      src/evalvars.c, src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1503
Problem:    Vim9: error for an autocmd defined in a :def function in legacy
            Vim script.
Solution:   Don't check the variable type. (closes #6758)
Files:      src/vim9script.c, src/testdir/test_vim9_script.vim

Patch 8.2.1504
Problem:    Vim9: white space checks are only done for a :def function.
Solution:   Also do checks at the script level.  Adjust the name of a few
            error messages.
Files:      src/userfunc.c, src/errors.h, src/dict.c, src/list.c,
            src/vim9compile.c, src/vim9script.c, src/vim9type.c,
            src/evalvars.c, src/testdir/test_vim9_expr.vim,
            src/testdir/vim9.vim

Patch 8.2.1505
Problem:    Not all file read and writecode is tested.
Solution:   Add a few tests. (Dominique Pellé, closes #6764)
Files:      src/testdir/test_eval_stuff.vim, src/testdir/test_fnamemodify.vim,
            src/testdir/test_functions.vim

Patch 8.2.1506
Problem:    Vim9: no error when using a number other than 0 or 1 as bool.
Solution:   Check the number is 0 or 1.
Files:      src/errors.h, src/typval.c, src/testdir/test_vim9_func.vim

Patch 8.2.1507
Problem:    Using malloc() directly.
Solution:   Use ALLOC_ONE().  Remove superfluous typecast.  (Hussam al-Homsi,
            closes #6768)
Files:      src/eval.c, src/memline.c, src/vimrun.c

Patch 8.2.1508
Problem:    Not all debugger commands covered by tests.
Solution:   Add tests for going up/down in the stack. (Ben Jackson,
            closes #6765)
Files:      src/testdir/test_debugger.vim

Patch 8.2.1509
Problem:    Vertical separator is cleared when dragging a popup window using a
            multi-byte character for the border.
Solution:   Only clear the character before the window if it is using a
            multi-byte character. (closes #6766)
Files:      src/screen.c

Patch 8.2.1510
Problem:    Using "var" in a :def function may refer to a legacy Vim script
            variable.
Solution:   Require using "s:" to refer to a legacy Vim script variable.
            (closes #6771)
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.1511
Problem:    Putting a string in Visual block mode ignores multi-byte
            characters.
Solution:   Adjust the column for Visual block mode. (closes #6767)
Files:      src/register.c, src/testdir/test_visual.vim

Patch 8.2.1512
Problem:    Failure after ternary expression fails.
Solution:   Restore eval_flags. (Yasuhiro Matsumoto, closes #6776)
Files:      src/eval.c, src/testdir/test_vimscript.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1513
Problem:    Cannot interrupt shell used for filename expansion. (Dominique
            Pellé)
Solution:   Do set tmode in mch_delay(). (closes #6770)
Files:      src/vim.h, src/os_unix.c, src/proto/os_unix.pro, src/term.c,
            src/channel.c, src/if_cscope.c, src/os_amiga.c, src/ui.c,
            src/proto/os_amiga.pro, src/os_win32.c, src/proto/os_win32.pro

Patch 8.2.1514
Problem:    Multibyte vertical separator is cleared when dragging a popup
            window using a multi-byte character for the border.
Solution:   Only clear the character before the window if it is double width.
            (closes #6766)
Files:      src/screen.c

Patch 8.2.1515
Problem:    Vim9: can create s:var in legacy script but cannot unlet.
Solution:   Allow :unlet for legacy script var.
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.1516
Problem:    Vim9: error for :exe has wrong line number.
Solution:   Set line number before calling do_cmdline_cmd(). (closes #6774)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.1517
Problem:    Cannot easily get the character under the cursor.
Solution:   Add the {chars} argument to strpart().
Files:      runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim

Patch 8.2.1518
Problem:    Vim9: cannot assign to local option.
Solution:   Skip over "&l:" and "&g:". (closes #6749)
Files:      src/ex_docmd.c, src/proto/ex_docmd.pro, src/testdir/vim9.vim,
            src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.1519
Problem:    Vim9: Ex command default range is not set.
Solution:   When range is not given use default. (closes #6779)
Files:      src/ex_docmd.c, src/testdir/test_vim9_script.vim

Patch 8.2.1520
Problem:    Vim9: CTRL-] used in :def function does not work.
Solution:   Omit count or prepend colon. (closes #6769)
Files:      src/normal.c, src/testdir/test_vim9_cmd.vim

Patch 8.2.1521
Problem:    Reading past end of buffer when reading spellfile. (Yegappan
            Lakshmanan)
Solution:   Store the byte length and check for it.
Files:      src/spellfile.c, src/spell.h

Patch 8.2.1522
Problem:    Not enough test coverage for the spell file handling.
Solution:   Add spell file tests. (Yegappan Lakshmanan, closes #6763)
Files:      src/testdir/test_spellfile.vim

Patch 8.2.1523
Problem:    Still not enough test coverage for the spell file handling.
Solution:   Add spell file tests. (Yegappan Lakshmanan, closes #6790)
Files:      src/testdir/test_spellfile.vim

Patch 8.2.1524
Problem:    No longer get an error for string concatenation with float.
            (Tsuyoshi Cho)
Solution:   Only convert float for Vim9 script. (closes #6787)
Files:      src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.2.1525
Problem:    Messages from tests were not always displayed.
Solution:   Always show messages, the timing is always useful. (Ken Takata,
            closes #6792)
Files:      src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Makefile

Patch 8.2.1526
Problem:    Line in testdir Makefile got commented out. (Christian Brabandt)
Solution:   Revert.
Files:      src/testdir/Makefile

Patch 8.2.1527
Problem:    Vim9: cannot use a function name as a function reference at script
            level.
Solution:   Check if a name is a function name. (closes #6789)
Files:      src/evalvars.c, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.1528
Problem:    Vim9: :endif not found after "if false".
Solution:   When skipping still check for a following command. (closes #6797)
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.1529
Problem:    Vim9: :elseif may be compiled when not needed.
Solution:   Do evaluate the :elseif expression.
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1530
Problem:    Vim9: test fails on MS-Windows.
Solution:   Skip Ex command inside "if false".
Files:      src/vim9compile.c

Patch 8.2.1531
Problem:    Vim9: test still fails on MS-Windows.
Solution:   When skipping expect function to be NULL.
Files:      src/vim9compile.c

Patch 8.2.1532
Problem:    Compiler warning for conversion of size_t to long.
Solution:   Add type cast.
Files:      src/eval.c

Patch 8.2.1533
Problem:    Vim9: error when passing getreginfo() result to setreg().
Solution:   Use dict_get_bool() for "isunnamed". (closes #6784)
Files:      src/evalfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.1534
Problem:    Vim9: type error for argument type is not at call position.
Solution:   Set the context and stack after checking the arguments.
            (issue #6785)
Files:      src/userfunc.c, src/vim9execute.c, src/testdir/test_vim9_func.vim

Patch 8.2.1535
Problem:    It is not possible to specify cell widths of characters.
Solution:   Add setcellwidths().
Files:      runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/usr_41.txt, src/evalfunc.c, src/mbyte.c,
            src/proto/mbyte.pro, src/errors.h, src/testdir/test_utf8.vim

Patch 8.2.1536
Problem:    Cannot get the class of a character; emoji widths are wrong in
            some environments.
Solution:   Add charclass(). Update some emoji widths.  Add script to check
            emoji widths.
Files:      Filelist, runtime/doc/eval.txt, runtime/doc/usr_41.txt,
            src/evalfunc.c, src/mbyte.c, src/proto/mbyte.pro,
            src/testdir/emoji_list.vim, src/testdir/test_functions.vim

Patch 8.2.1537
Problem:    Memory access error when using setcellwidths().
Solution:   Use array and pointers correctly.
Files:      src/mbyte.c, src/errors.h, src/testdir/test_utf8.vim

Patch 8.2.1538
Problem:    Python: iteration over vim objects fails to keep reference.
Solution:   Keep a reference for the object. (Paul Ollis, closes #6803,
            closes #6806)
Files:      src/if_py_both.h, src/testdir/test_python3.vim

Patch 8.2.1539
Problem:    Using invalid script ID causes a crash.
Solution:   Check the script ID to be valid. (closes #6804)
Files:      src/globals.h, src/evalvars.c, src/profiler.c, src/scriptfile.c,
            src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.1540
Problem:    The user cannot try out emoji character widths.
Solution:   Move the emoji script to the runtime/tools directory.
Files:      Filelist, src/testdir/emoji_list.vim, runtime/tools/emoji_list.vim

Patch 8.2.1541
Problem:    Vim9: cannot find function reference for s:Func.
Solution:   Recognize <SNR> prefix. (closes #6805)
Files:      src/userfunc.c, src/vim9execute.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.1542
Problem:    Vim9: test with invalid SID does not work in the GUI.
Solution:   Skip the test in the GUI.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.1543
Problem:    Vim9: test with invalid SID is skipped in the GUI.
Solution:   Read the CTRL-C that feedkeys() put in typeahead.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.1544
Problem:    Cannot translate messages in a Vim script.
Solution:   Add gettext().  Try it out for a few messages in the options
            window.
Files:      Filelist, src/po/Makefile, src/po/README.txt, runtime/optwin.vim,
            src/evalfunc.c, src/po/tojavascript.vim, src/po/fixfilenames.vim,
            runtime/doc/eval.txt, runtime/doc/usr_41.txt

Patch 8.2.1545
Problem:    ch_logfile() is unclear about closing when forking.
Solution:   Adjust the log messages.
Files:      src/channel.c, src/os_unix.c

Patch 8.2.1546
Problem:    Build rule for Vim.app is unused.
Solution:   Delete the related build rules.
Files:      src/Makefile

Patch 8.2.1547
Problem:    Various comment problems.
Solution:   Update comments.
Files:      src/arglist.c, src/map.c, src/mbyte.c, src/tag.c, src/undo.c,
            src/testdir/README.txt, src/testdir/test_put.vim,
            src/libvterm/README

Patch 8.2.1548
Problem:    Cannot move position of "%%" in message translations. (Emir Sarı)
Solution:   Improve the check script.
Files:      src/po/check.vim

Patch 8.2.1549
Problem:    The "r" command fails for keys with modifiers if 'esckeys' is off
            and modifyOtherKeys is used. (Lauri Tirkkonen)
Solution:   Temporarily disable bracketed paste and modifyOtherKeys if
            'esckeys' is off. (closes #6809)
Files:      src/normal.c

Patch 8.2.1550
Problem:    Vim9: bufname('%') gives an error.
Solution:   Only give an error for wrong argument type. (closes #6807)
Files:      src/evalbuffer.c, src/testdir/test_vim9_func.vim

Patch 8.2.1551
Problem:    Vim9: error for argument type does not mention the number.
Solution:   Pass the argument number to where the error is given.
Files:      src/vim9type.c, src/proto/vim9type.pro, src/vim9compile.c,
            src/vim9execute.c, src/vim9script.c, src/eval.c,
            src/testdir/test_vim9_func.vim

Patch 8.2.1552
Problem:    Warnings from asan with clang-11. (James McCoy)
Solution:   Avoid using a NULL pointer. (issue #6811)
Files:      src/fold.c

Patch 8.2.1553 (after 8.2.1552)
Problem:    Crash in edit test.
Solution:   Avoid using invalid pointer.
Files:      src/fold.c

Patch 8.2.1554
Problem:    Crash in normal test.
Solution:   Skip adjusting marks if there are no folds.
Files:      src/fold.c

Patch 8.2.1555
Problem:    Not all tests are executed on Github Actions.
Solution:   Copy "src" to "src2" earlier. Recognize "src2" in a couple more
            places.  Add two tests to the list of flaky tests. (Ken Takata,
            closes #6798)
Files:      .github/workflows/ci-windows.yaml, src/testdir/runtest.vim,
            src/testdir/test_python2.vim, src/testdir/test_python3.vim

Patch 8.2.1556
Problem:    Cursorline highlighting always overrules sign highlighting.
Solution:   Combine the highlighting, use the priority to decide how.
            (closes #6812)
Files:      runtime/doc/sign.txt, src/structs.h, src/drawline.c,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            src/testdir/test_signs.vim,
            src/testdir/dumps/Test_sign_cursor_5.dump,
            src/testdir/dumps/Test_sign_cursor_6.dump

Patch 8.2.1557
Problem:    Crash in :vimgrep when started as "vim -n". (Raul Segura)
Solution:   Check mfp pointer. (Yegappan Lakshmanan, closes #6827)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.2.1558
Problem:    Signs test fails.
Solution:   Add missing change to sign.c.
Files:      src/sign.c

Patch 8.2.1559
Problem:    s390x tests work again.
Solution:   re-enable s390x tests. (James McCoy, closes #6829)
Files:      .travis.yml

Patch 8.2.1560
Problem:    Using NULL pointers in some code. (James McCoy)
Solution:   Avoid adding to a NULL pointer.  Use byte as unsigned.
Files:      src/fold.c, src/eval.c, src/spellsuggest.c, src/spellfile.c,
            src/vim9compile.c

Patch 8.2.1561
Problem:    Using NULL pointers in fold code.
Solution:   Avoid using a NULL pointer. (Dominique Pellé, closes #6831,
            closes #6831)
Files:      src/fold.c

Patch 8.2.1562
Problem:    Vim9: error when using "%" where a buffer is expected.
Solution:   Add tv_get_buf_from_arg(). (closes #6814)
Files:      src/typval.c, src/proto/typval.pro, src/evalbuffer.c,
            src/testdir/test_vim9_func.vim

Patch 8.2.1563
Problem:    Vim9: error when using '%" with setbufvar() or getbufvar().
Solution:   Use tv_get_buf_from_arg(). (closes #6816)
Files:      src/evalvars.c, src/testdir/test_vim9_func.vim

Patch 8.2.1564
Problem:    A few remaining errors from ubsan.
Solution:   Avoid the warnings. (Dominique Pellé, closes #6837)
Files:      src/spellfile.c, src/spellsuggest.c, src/viminfo.c

Patch 8.2.1565
Problem:    Spellfile test sometimes fails.
Solution:   Check running into the end of the file.
Files:      src/spellfile.c

Patch 8.2.1566
Problem:    Not all Bazel files are recognized.
Solution:   Add *.bazel and *.BUILD. (closes #6836)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.1567
Problem:    No example to use ubsan with clang.
Solution:   Add example commands. (Dominique Pellé, issue #6811)
Files:      src/Makefile

Patch 8.2.1568
Problem:    prop_find() skips properties in the same line if "skipstart" is
            used.
Solution:   Use "continue" instead of "break". (closes #6840)
Files:      src/textprop.c, src/testdir/test_textprop.vim

Patch 8.2.1569
Problem:    Vim9: fixes for functions not tested; failure in getchangelist().
Solution:   Add tests. (closes #6813, closes #6815, closes #6817)
Files:      src/evalfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.1570
Problem:    Configure check for dirfd() does not work on HPUX. (Michael Osipov)
Solution:   Use AC_TRY_LINK instead of AC_TRY_COMPILE. (closes #6838)
Files:      src/configure.ac, src/auto/configure, src/fileio.c, src/globals.h

