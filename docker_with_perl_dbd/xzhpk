
Patch 8.2.0588
Problem:    Putty does not use "sgr" 'ttymouse' by default.
Solution:   Make "sgr" the default for Putty. (Christian Brabandt,
            closes #5942)
Files:      src/term.c

Patch 8.2.0589
Problem:    .bsd file type not recognized.
Solution:   Recognize .bsd as BSDL. (Daniel Kho, closes #5945)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.0590
Problem:    No 'backspace' value allows ignoring the insertion point.
Solution:   Add the "nostop" and 3 values. (Christian Brabandt, closes #5940)
Files:      runtime/doc/options.txt, src/edit.c, src/option.c, src/option.h,
            src/optionstr.c, src/testdir/gen_opt_test.vim,
            src/testdir/test_backspace_opt.vim

Patch 8.2.0591
Problem:    MS-Windows: should always support IPv6
Solution:   Add build flag. (Ozaki Kiichi, closes #5944)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.2.0592
Problem:    MS-Windows with VTP: cursor is not made invisible.
Solution:   Output the code to make the cursor visible or invisible. (Nobuhiro
            Takasaki, closes #5941)
Files:      src/os_win32.c

Patch 8.2.0593
Problem:    Finding a user command is not optimal.
Solution:   Start further down in the list of commands.
Files:      src/ex_cmds.h, src/ex_docmd.c

Patch 8.2.0594
Problem:    MS-Windows: cannot build with WINVER set to 0x0501.
Solution:   Only use inet_ntop() when available. (Ozaki Kiichi, closes #5946)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak, src/auto/configure,
            src/channel.c, src/config.h.in, src/configure.ac

Patch 8.2.0595
Problem:    Vim9: not all commands using ends_excmd() tested.
Solution:   Find # comment after regular commands. Add more tests.  Report
            error for where it was caused.
Files:      src/ex_docmd.c, src/vim9compile.c, src/vim9execute.c, src/usercmd.c,
            src/evalfunc.c, src/userfunc.c, src/proto/userfunc.pro,
            src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.0596
Problem:    Crash in test49.
Solution:   Check the right pointer.
Files:      src/userfunc.c, src/testdir/test_eval.ok

Patch 8.2.0597
Problem:    Test_eval is old style.
Solution:   Change some tests to a new style test.
Files:      src/testdir/test_eval.in, src/testdir/test_eval.ok,
            src/testdir/test_eval_stuff.vim

Patch 8.2.0598
Problem:    Test_eval_stuff fails in normal terminal.
Solution:   Close the new window.
Files:      src/testdir/test_eval_stuff.vim

Patch 8.2.0599
Problem:    Netbeans interface insufficiently tested.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #5921)
Files:      runtime/doc/netbeans.txt, src/netbeans.c, src/os_win32.c,
            src/testdir/runtest.vim, src/testdir/test_netbeans.py,
            src/testdir/test_netbeans.vim

Patch 8.2.0600
Problem:    Vim9: cannot read or write w:, t: and b: variables.
Solution:   Implement load and store for w:, t: and b: variables.
            (closes #5950)
Files:      src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_expr.vim, src/testdir/test_vim9_script.vim,
            src/vim9.h, src/vim9compile.c, src/vim9execute.c

Patch 8.2.0601
Problem:    Vim9: :unlet is not compiled.
Solution:   Implement :unlet instruction and check for errors.
Files:      src/vim9compile.c, src/proto/vim9compile.pro, src/vim9.h,
            src/vim9execute.c, src/evalvars.c, src/proto/evalvars.pro,
            src/eval.c, src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.0602
Problem:    :unlet $VAR does not work properly.
Solution:   Make ":lockvar $VAR" fail.  Check the "skip" flag.
Files:      src/evalvars.c, src/globals.h, src/testdir/test_vimscript.vim

Patch 8.2.0603
Problem:    Configure does not detect moonjit.
Solution:   Add check for moonjit. (Shlomi Fish, closes #5947)
Files:      src/configure.ac, src/auto/configure

Patch 8.2.0604
Problem:    :startinsert in a terminal window used later.
Solution:   Ignore :startinsert in a terminal window. (closes #5952)
Files:      src/ex_docmd.c, src/testdir/test_terminal.vim

Patch 8.2.0605
Problem:    Vim9: cannot unlet an environment variable.
Solution:   Implement unlet for $VAR.
Files:      src/vim9.h, src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.0606
Problem:    Several syntax HL errors not checked.
Solution:   Add tests. (Yegappan Lakshmanan, closes #5954)
Files:      src/testdir/test_syntax.vim

Patch 8.2.0607
Problem:    Gcc warns for using uninitialized variable. (John Marriott)
Solution:   Set name_end also for environment variables.
Files:      src/evalvars.c

Patch 8.2.0608
Problem:    Warning from clang when building message test.
Solution:   Use a void pointer.  (Dominique Pellé, closes #5958)
Files:      src/message_test.c

Patch 8.2.0609
Problem:    Configure does not detect moonjit correctly.
Solution:   Double the brackets. (Ozaki Kiichi)
Files:      src/configure.ac, src/auto/configure

Patch 8.2.0610
Problem:    Some tests are still old style.
Solution:   Convert to new style tests. (Yegappan Lakshmanan, closes #5957)
Files:      src/testdir/test_blob.vim, src/testdir/test_cursor_func.vim,
            src/testdir/test_eval.in, src/testdir/test_eval.ok,
            src/testdir/test_eval_func.vim, src/testdir/test_eval_stuff.vim,
            src/testdir/test_expr.vim, src/testdir/test_filter_map.vim,
            src/testdir/test_functions.vim, src/testdir/test_listdict.vim,
            src/testdir/test_sort.vim, src/testdir/test_syntax.vim,
            src/testdir/test_utf8.vim, src/testdir/test_vimscript.vim

Patch 8.2.0611
Problem:    Vim9: no check for space before #comment.
Solution:   Add space checks.
Files:      src/eval.c, src/evalvars.c, src/ex_docmd.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.0612
Problem:    Vim9: no check for space before #comment.
Solution:   Add space checks.
Files:      src/ex_eval.c, src/ex_cmds.c, src/regexp.c, src/proto/regexp.pro,
            src/gui.c, src/highlight.c, src/testdir/test_vim9_script.vim,
            src/testdir/test_sort.vim

Patch 8.2.0613
Problem:    Vim9: no check for space before #comment.
Solution:   Add space checks.
Files:      src/highlight.c, src/menu.c, src/syntax.c,
            src/testdir/test_vim9_script.vim,
            runtime/lang/menu_de_de.latin1.vim

Patch 8.2.0614
Problem:    Get ml_get error when deleting a line in 'completefunc'. (Yegappan
            Lakshmanan)
Solution:   Lock the text while evaluating 'completefunc'.
Files:      src/insexpand.c, src/globals.h, src/edit.c, src/ex_getln.c,
            src/undo.c, src/testdir/test_edit.vim, src/testdir/test_excmd.vim,
            src/testdir/test_gf.vim, src/testdir/test_popup.vim,
            src/testdir/test_ex_mode.vim, runtime/doc/insert.txt

Patch 8.2.0615
Problem:    Regexp benchmark test is old style.
Solution:   Make it a new style test.  Fix using a NULL list.  Add more tests.
            (Yegappan Lakshmanan, closes #5963)
Files:      src/evalbuffer.c, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Makefile,
            src/testdir/bench_re_freeze.in, src/testdir/bench_re_freeze.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_bench_regexp.vim,
            src/testdir/test_blob.vim, src/testdir/test_bufline.vim,
            src/testdir/test_channel.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_functions.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_prompt_buffer.vim,
            src/testdir/test_tagjump.vim, src/testdir/test_window_cmd.vim

Patch 8.2.0616
Problem:    Build error when disabling the diff feature.
Solution:   Move parenthesis outside of #ifdef. (Tom Ryder)
Files:      src/drawline.c

Patch 8.2.0617
Problem:    New error check triggers in Swedish menu.
Solution:   Insert backslash. (Mats Tegner, closes #5966)
Files:      runtime/lang/menu_sv_se.latin1.vim

Patch 8.2.0618
Problem:    Echoing a null list results in no output. (Yegappan Lakshmanan)
Solution:   Return "[]" instead of NULL in echo_string_core().
Files:      src/eval.c, src/testdir/test_messages.vim

Patch 8.2.0619
Problem:    Null dict is not handled like an empty dict.
Solution:   Fix the code and add tests. (Yegappan Lakshmanan, closes #5968)
Files:      src/dict.c, src/eval.c, src/testdir/test_blob.vim,
            src/testdir/test_expr.vim, src/testdir/test_filter_map.vim,
            src/testdir/test_let.vim, src/testdir/test_listdict.vim,
            src/testdir/test_search.vim, src/testdir/test_unlet.vim,
            src/testdir/test_usercommands.vim, src/testdir/test_vimscript.vim

Patch 8.2.0620
Problem:    Error in menu translations.
Solution:   Insert a backslash before a space.
Files:      runtime/lang/menu_it_it.latin1.vim,
            runtime/lang/menu_chinese_gb.936.vim

Patch 8.2.0621
Problem:    After running tests asan files may remain.
Solution:   Clean up asan files with "make testclean".
Files:      src/testdir/Makefile, src/Makefile

Patch 8.2.0622
Problem:    Haiku: GUI does not compile.
Solution:   Various fixes. (Emir Sarı, closes #5961)
Files:      Filelist, README.md, READMEdir/README_haiku.txt,
            runtime/doc/os_haiku.txt, src/Makefile, src/beval.h,
            src/gui_haiku.cc, src/proto/gui_haiku.pro

Patch 8.2.0623
Problem:    Typo in test comment. (Christ van Willegen)
Solution:   Avoid mixing up a data structure with a body part.
Files:      src/testdir/test_listdict.vim

Patch 8.2.0624
Problem:    Vim9: no check for space before #comment.
Solution:   Add space checks.  Fix :throw with double quoted string.
Files:      src/usercmd.c, src/userfunc.c, src/vim9compile.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.0625
Problem:    Vim9: confusing error when calling unknown function.
Solution:   Give error while compiling.
Files:      src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_func.vim

Patch 8.2.0626
Problem:    Vim9: wrong syntax of function in Vim9 script.
Solution:   Give error for missing space. Implement :echomsg and :echoerr.
            (closes #5670)
Files:      src/vim9compile.c, src/vim9execute.c, src/vim9.h, src/userfunc.c,
            src/eval.c, src/globals.h, src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.0627
Problem:    Vim9: error message does not work. (Yegappan Lakshmanan)
Solution:   Swap lines.
Files:      src/userfunc.c

Patch 8.2.0628
Problem:    Error in menu translations.
Solution:   Insert a backslash before a space in one more file. (Shun Bai,
            Emir Sarı)
Files:      runtime/lang/menu_zh_cn.utf-8.vim,
            runtime/lang/menu_ca_es.latin1.vim,
            runtime/lang/menu_cs_cz.iso_8859-2.vim,
            runtime/lang/menu_cs_cz.utf-8.vim,
            runtime/lang/menu_czech_czech_republic.1250.vim,
            runtime/lang/menu_czech_czech_republic.ascii.vim,
            runtime/lang/menu_da.utf-8.vim,
            runtime/lang/menu_fi_fi.latin1.vim,
            runtime/lang/menu_hu_hu.iso_8859-2.vim,
            runtime/lang/menu_hu_hu.utf-8.vim,
            runtime/lang/menu_is_is.latin1.vim,
            runtime/lang/menu_no_no.latin1.vim, runtime/lang/menu_pt_br.vim,
            runtime/lang/menu_pt_pt.vim,
            runtime/lang/menu_sk_sk.iso_8859-2.vim,
            runtime/lang/menu_sl_si.latin2.vim,
            runtime/lang/menu_slovak_slovak_republic.1250.vim,
            runtime/lang/menu_tr_tr.cp1254.vim,
            runtime/lang/menu_tr_tr.iso_8859-9.vim,
            runtime/lang/menu_tr_tr.utf-8.vim, runtime/lang/menu_vi_vn.vim

Patch 8.2.0629
Problem:    Setting a boolean option to v:false does not work.
Solution:   Do not use the string representation of the value. (Christian
            Brabandt, closes #5974)
Files:      src/evalvars.c, src/testdir/test_options.vim

Patch 8.2.0630
Problem:    "make tags" does not cover Haiku GUI file.
Solution:   Add *.cc files.
Files:      src/Make_all.mak

Patch 8.2.0631
Problem:    Haiku file formatted with wrong tabstop.
Solution:   Use normal tabstop. Fix white space.
Files:      src/gui_haiku.cc

Patch 8.2.0632
Problem:    Crash when using Haiku.
Solution:   Lock the screen. (closes #5975, closes #5973)
Files:      src/screen.c

Patch 8.2.0633
Problem:    Crash when using null partial in filter().
Solution:   Fix crash.  Add more tests. (Yegappan Lakshmanan, closes #5976)
Files:      src/eval.c, src/testdir/test_blob.vim,
            src/testdir/test_channel.vim, src/testdir/test_eval_stuff.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_expr.vim,
            src/testdir/test_filter_map.vim, src/testdir/test_fold.vim,
            src/testdir/test_functions.vim, src/testdir/test_let.vim,
            src/testdir/test_listdict.vim, src/testdir/test_partial.vim,
            src/testdir/test_usercommands.vim

Patch 8.2.0634
Problem:    Crash with null partial and blob.
Solution:   Check for NULL pointer.  Add more tests. (Yegappan Lakshmanan,
            closes #5984)
Files:      src/eval.c, src/list.c, src/testdir/test_blob.vim,
            src/testdir/test_bufwintabinfo.vim, src/testdir/test_cd.vim,
            src/testdir/test_channel.vim, src/testdir/test_cursor_func.vim,
            src/testdir/test_eval_stuff.vim, src/testdir/test_expr.vim,
            src/testdir/test_filter_map.vim, src/testdir/test_fnamemodify.vim,
            src/testdir/test_functions.vim, src/testdir/test_getvar.vim,
            src/testdir/test_listdict.vim, src/testdir/test_messages.vim,
            src/testdir/test_partial.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_vimscript.vim,
            src/testdir/test_window_cmd.vim, src/testdir/test_window_id.vim,
            src/testdir/test_writefile.vim

Patch 8.2.0635
Problem:    When using 256 colors DarkYellow does not show expected color.
Solution:   Use color 3 instead of 130. (Romain Lafourcade, closes #5985)
Files:      src/highlight.c

Patch 8.2.0636
Problem:    :messages does not show the maintainer when $LANG is unset.
Solution:   Call get_mess_lang() if available. (closes #5978)
Files:      src/message.c

Patch 8.2.0637
Problem:    Incsearch highlighting does not work for ":sort!".
Solution:   Skip over the exclamation point. (closes #5983)
Files:      src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_sort_02.dump

Patch 8.2.0638
Problem:    MS-Windows: messages test fails.
Solution:   Clear environment variables.
Files:      src/testdir/test_messages.vim

Patch 8.2.0639
Problem:    MS-Windows: messages test still fails.
Solution:   Filter out the maintainer message.
Files:      src/testdir/test_messages.vim

Patch 8.2.0640
Problem:    Vim9: expanding `=expr` does not work.
Solution:   Find wildcards in not compiled commands.  Reorganize test files.
Files:      Filelist, src/vim9.h, src/vim9compile.c, src/vim9execute.c,
            src/testdir/vim9.vim, src/testdir/test_vim9_cmd.vim,
            src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_expr.vim, src/testdir/test_vim9_script.vim,
            src/testdir/Make_all.mak

Patch 8.2.0641
Problem:    Vim9: `=expr` not expanded in :hardcopy and "syntax include".
Solution:   Add the EX_EXPAND flag.  Expend "syntax include".
Files:      src/ex_cmds.h, src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_cmd.vim

Patch 8.2.0642
Problem:    Vim9: using invalid index.
Solution:   Check index for being valid.  Fix memory leak.
Files:      src/vim9compile.c, src/clientserver.c

Patch 8.2.0643 (after 8.2.0635)
Problem:    Terminal uses brown instead of dark yellow. (Romain Lafourcade)
Solution:   Use color index 3 instead of 130. (closes #5993)
Files:      src/terminal.c

Patch 8.2.0644
Problem:    Insufficient testing for invalid function arguments.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #5988)
Files:      runtime/doc/eval.txt, src/testdir/test_bufline.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_expr.vim, src/testdir/test_functions.vim,
            src/testdir/test_listener.vim, src/testdir/test_match.vim,
            src/testdir/test_menu.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_registers.vim, src/testdir/test_reltime.vim,
            src/testdir/test_terminal.vim, src/testdir/test_textprop.vim,
            src/testdir/test_window_cmd.vim, src/testdir/test_window_id.vim,
            src/testdir/test_writefile.vim

Patch 8.2.0645
Problem:    MS-Windows terminal: CTRL-C does not get to child job.
Solution:   Remove CREATE_NEW_PROCESS_GROUP from CreateProcessW(). (Nobuhiro
            Takasaki, closes #5987)
Files:      src/terminal.c

Patch 8.2.0646
Problem:    t_Co uses the value of $COLORS in the GUI. (Masato Nishihata)
Solution:   Ignore $COLORS for the GUI. (closes #5992)
Files:      src/os_unix.c, src/term.c

Patch 8.2.0647
Problem:    MS-Windows: repeat count for events was not used.
Solution:   Check the repeat count. (Nobuhiro Takasaki, closes #5989)
Files:      src/os_win32.c

Patch 8.2.0648
Problem:    Semicolon search does not work in first line.
Solution:   Allow the cursor to be in line zero. (Christian Brabandt,
            closes #5996)
Files:      src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.2.0649
Problem:    Undo problem when an InsertLeave autocommand resets undo. (Kutsan
            Kaplan)
Solution:   Do not create a new undo block when leaving Insert mode.
Files:      src/edit.c, src/testdir/test_edit.vim

Patch 8.2.0650
Problem:    Vim9: script function can be deleted.
Solution:   Disallow deleting script function.  Delete functions when sourcing
            a script again.
Files:      src/userfunc.c, src/proto/userfunc.pro, src/evalfunc.c,
            src/vim9compile.c, src/vim9execute.c, src/vim9script.c,
            src/scriptfile.c, src/testing.c, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_func.vim, src/testdir/test_vim9_script.vim

Patch 8.2.0651
Problem:    Old style benchmark test still in list of distributed files.
Solution:   Remove the files from the list.
Files:      Filelist

Patch 8.2.0652 (after 8.2.0650)
Problem:    Compiler warning for char conversion.
Solution:   Use unsigned char buffer.
Files:      src/userfunc.c

Patch 8.2.0653 (after 8.2.0650)
Problem:    using uninitialized pointer.
Solution:   Move assignment up. (John Marriott)
Files:      src/userfunc.c, src/testdir/test_vim9_script.vim

Patch 8.2.0654
Problem:    Building with Python fails.
Solution:   Add missing argument.
Files:      src/if_py_both.h

Patch 8.2.0655
Problem:    Search code not sufficiently tested.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #5999)
Files:      src/testdir/test_charsearch.vim, src/testdir/test_gn.vim,
            src/testdir/test_goto.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_normal.vim, src/testdir/test_search.vim,
            src/testdir/test_textformat.vim, src/testdir/test_textobjects.vim,
            src/testdir/test_visual.vim

Patch 8.2.0656
Problem:    MS-Windows: redrawing right screen edge may not be needed.
Solution:   Check the build version. (Nobuhiro Takasaki, closes #6002)
Files:      src/drawscreen.c, src/os_win32.c, src/proto/os_win32.pro

Patch 8.2.0657
Problem:    Vim9: no check if called variable is a FuncRef.
Solution:   Add a type check.
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.0658 (after 8.2.0646)
Problem:    HP-UX build fails when setenv() is not defined.
Solution:   Change "colors" to "t_colors". (John Marriott)
Files:      src/os_unix.c

Patch 8.2.0659
Problem:    Vim9: no test for equal func type.
Solution:   Add a test.  Improve type check.
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.0660
Problem:    The search.c file is a bit big.
Solution:   Split off the text object code to a separate file. (Yegappan
            Lakshmanan, closes #6007)
Files:      Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/proto.h, src/proto/search.pro, src/proto/textobject.pro,
            src/search.c, src/textobject.c

Patch 8.2.0661
Problem:    Eval test is still old style.
Solution:   Change into new style tests. (Yegappan Lakshmanan, closes #6009)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test_eval.in, src/testdir/test_eval.ok,
            src/testdir/test_eval_stuff.vim

Patch 8.2.0662
Problem:    Cannot use input() in a channel callback.
Solution:   Reset vgetc_busy. (closes #6010)
Files:      src/globals.h, src/ex_getln.c, src/evalfunc.c,
            src/testdir/test_channel.vim

Patch 8.2.0663
Problem:    Not all systemd temp files are recognized.
Solution:   Add two more patterns. (Jamie Macdonald, closes #6003)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.0664
Problem:    Included undesired changes in Makefile.
Solution:   Revert the changes.
Files:      src/Makefile

Patch 8.2.0665
Problem:    Wrongly assuming Python executable is called "python".
Solution:   Use detected python command. (Ken Takata, closes #6016)
            Also use CheckFunction if possible.
Files:      src/testdir/test_terminal.vim, src/testdir/check.vim

Patch 8.2.0666
Problem:    Ruby test fails on MS-Windows.
Solution:   Remove the "maintainer" line. (Ken Takata, closes #6015)
Files:      src/testdir/shared.vim, src/testdir/test_messages.vim,
            src/testdir/test_ruby.vim

Patch 8.2.0667
Problem:    Cannot install Haiku version from source.
Solution:   Update Makefile and rdef file. (Emir Sarı, closes #6013)
Files:      Filelist, READMEdir/README_haiku.txt, runtime/doc/os_haiku.txt,
            src/Makefile, src/os_haiku.rdef.in, src/os_haiku.rdef

Patch 8.2.0668
Problem:    Compiler warning for int/size_t usage.
Solution:   Change "int" to "size_t". (Mike Williams)
Files:      src/vim9execute.c

Patch 8.2.0669
Problem:    MS-Windows: display in VTP is a bit slow.
Solution:   Optimize the code. (Nobuhiro Takasaki, closes #6014)
Files:      src/os_win32.c, src/screen.c

Patch 8.2.0670
Problem:    Cannot change window when evaluating 'completefunc'.
Solution:   Make a difference between not changing text or buffers and also
            not changing window.
Files:      src/ex_getln.c, src/beval.c, src/change.c, src/edit.c, src/eval.c,
            src/ex_docmd.c, src/insexpand.c, src/globals.h, src/indent.c,
            src/map.c, src/window.c, src/proto/ex_getln.pro, src/register.c,
            src/undo.c, src/testdir/test_edit.vim,
            src/testdir/test_ins_complete.vim, src/testdir/test_popup.vim

Patch 8.2.0671
Problem:    Haiku: compiler warnings.
Solution:   Avoid the warnings. Drop display_errors() copy. (Emir Sarı,
            closes #6018)
Files:      .gitignore, src/gui.c, src/gui_haiku.cc

Patch 8.2.0672
Problem:    Heredoc in scripts does not accept lower case marker.
Solution:   Allow lower case only in non-Vim scripts. (Ken Takata,
            closes #6019)
Files:      src/evalvars.c, src/testdir/test_lua.vim,
            src/testdir/test_perl.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_pyx2.vim,
            src/testdir/test_pyx3.vim, src/testdir/test_ruby.vim

Patch 8.2.0673
Problem:    Cannot build Haiku in shadow directory.
Solution:   Add symlink. (Ozaki Kiichi, closes #6023)
Files:      src/Makefile

Patch 8.2.0674
Problem:    Some source files are too big.
Solution:   Move text formatting functions to a new file. (Yegappan
            Lakshmanan, closes #6021)
Files:      Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/edit.c, src/getchar.c, src/ops.c, src/option.c, src/proto.h,
            src/proto/edit.pro, src/proto/getchar.pro, src/proto/ops.pro,
            src/proto/option.pro, src/proto/textformat.pro, src/textformat.c

Patch 8.2.0675
Problem:    Vim9: no support for closures.
Solution:   Do not re-use stack entries.
Files:      src/vim9compile.c, src/ex_docmd.c, src/proto/ex_docmd.pro,
            src/evalvars.c, src/proto/evalvars.pro

Patch 8.2.0676
Problem:    Pattern in list of distributed files does not match.
Solution:   Drop "testdir/test_[a-z]*.ok".  Add CI sed files.
Files:      Filelist

Patch 8.2.0677
Problem:    Vim9: no support for closures.
Solution:   Find variables in the outer function scope, so long as the scope
            exists.
Files:      src/vim9compile.c, src/proto/vim9compile.pro, src/userfunc.c,
            src/vim9execute.c, src/structs.h, src/vim9.h,
            src/testdir/test_vim9_func.vim

Patch 8.2.0678
Problem:    Rare crash for popup menu.
Solution:   Check for NULL pointer. (Nobuhiro Takasaki, closes #6027)
Files:      src/popupmenu.c

Patch 8.2.0679
Problem:    Vim9: incomplete support for closures.
Solution:   At the end of a function copy arguments and local variables if
            they are still used by a referenced closure.
Files:      src/structs.h, src/vim9.h, src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_func.vim

Patch 8.2.0680
Problem:    PTYGROUP and PTYMODE are unused.
Solution:   Remove from autoconf. (closes #6024)
Files:      src/configure.ac, src/auto/configure, src/config.h.in

Patch 8.2.0681
Problem:    Pattern for 'hlsearch' highlighting may leak. (Dominique Pellé)
Solution:   Call end_search_hl() to make sure the previous pattern is freed.
            (closes #6028)
Files:      src/screen.c

Patch 8.2.0682
Problem:    Vim9: parsing function argument type can get stuck.
Solution:   Bail out when not making progress.
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.0683
Problem:    Vim9: parsing type does not always work.
Solution:   Handle func type without return value.  Test more closures.
            Fix type check offset.  Fix garbage collection.
Files:      src/vim9compile.c, src/vim9execute.c, src/proto/vim9execute.pro,
            src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.0684
Problem:    Vim9: memory leak when using lambda.
Solution:   Move the funccal context to the partial. Free the function when
            exiting.
Files:      src/vim9.h, src/structs.h, src/vim9execute.c, src/userfunc.c,
            src/eval.c, src/testdir/test_vim9_func.vim

Patch 8.2.0685 (after 8.2.0684)
Problem:    Build failure.
Solution:   Include missing changes.
Files:      src/vim9compile.c

Patch 8.2.0686
Problem:    Formatoptions not sufficiently tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #6031)
Files:      src/testdir/test_normal.vim, src/testdir/test_textformat.vim

Patch 8.2.0687
Problem:    Some tests do not work on FreeBSD.
Solution:   Enable modeline.  Use WaitFor() in more cases. (Ozaki Kiichi,
            closes #6036)
Files:      src/testdir/test_quickfix.vim, src/testdir/test_terminal.vim

Patch 8.2.0688
Problem:    Output clobbered if setting 'verbose' to see shell commands.
Solution:   Only output "Searching for" when 'verbose' is 11 or higher.
Files:      src/scriptfile.c, runtime/doc/options.txt

Patch 8.2.0689
Problem:    When using getaddrinfo() the error message is unclear.
Solution:   Use gai_strerror() to get the message. (Ozaki Kiichi,
            closes #6034)
Files:      src/channel.c

Patch 8.2.0690
Problem:    Line number of option set by modeline is wrong.
Solution:   Do not double the line number. (Ozaki Kiichi, closes #6035)
Files:      src/option.c, src/testdir/test_modeline.vim

Patch 8.2.0691
Problem:    Startup test fails.
Solution:   Adjust expected output from -V2 argument.
Files:      src/testdir/test_startup.vim

Patch 8.2.0692
Problem:    Startup test fails on MS-Windows.
Solution:   Allow for any path.
Files:      src/testdir/test_startup.vim

Patch 8.2.0693
Problem:    Closure using argument not tested.
Solution:   Add a test, make it work.
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.0694
Problem:    Haiku: channel and terminal do not work.
Solution:   Close files when the job has finished. (Ozaki Kiichi,
            closes #6039)
Files:      src/channel.c, src/getchar.c, src/gui_haiku.cc, src/misc1.c

Patch 8.2.0695
Problem:    Vim9: cannot define a function inside a function.
Solution:   Initial support for :def inside :def.
Files:      src/userfunc.c, src/proto/userfunc.pro, src/vim9compile.c,
            src/vim9execute.c, src/testdir/test_vim9_func.vim

Patch 8.2.0696
Problem:    Vim9: nested function does not work properly
Solution:   Create a function reference.  Check argument count.
Files:      src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_func.vim

Patch 8.2.0697
Problem:    Vim9: memory leak when using nested function.
Solution:   Unreference function when deleting instructions. Adjust reference
            count for local variables.
Files:      src/vim9compile.c, src/vim9execute.c

Patch 8.2.0698
Problem:    Insert mode completion not fully tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #6041)
Files:      src/testdir/test_edit.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_textformat.vim

Patch 8.2.0699
Problem:    Vim9: not all errors tested.
Solution:   Add test for deleted function.  Bail out on first error.
Files:      src/vim9execute.c, src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_expr.vim, src/testdir/vim9.vim

Patch 8.2.0700
Problem:    Vim9: converting error message to exception not tested.
Solution:   Test exception from error.  Do not continue after :echoerr.
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.0701
Problem:    Vim9 test fails without job feature.
Solution:   Add feature check.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.0702
Problem:    Running channel tests may leave running process behind.
Solution:   Make Python client exit when running into EOF. (Kurtis Rader,
            part of #6046)
Files:      src/testdir/test_channel_pipe.py

Patch 8.2.0703
Problem:    Vim9: closure cannot store value in outer context.
Solution:   Make storing value in outer context work.  Make :disassemble
            accept a function reference.
Files:      src/vim9compile.c, src/vim9execute.c, src/vim9.h, src/eval.c,
            src/structs.h, src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_func.vim

Patch 8.2.0704
Problem:    Vim9: memory leak in disassemble test.
Solution:   Decrement refcount when creating funccal.
Files:      src/vim9execute.c

Patch 8.2.0705
Problem:    Indent tests don't run on CI for FreeBSD.
Solution:   Set modeline. (Ozaki Kiichi, closes #6048)
Files:      .cirrus.yml, runtime/indent/testdir/runtest.vim

Patch 8.2.0706
Problem:    Vim9: using assert_fails() causes function to finish.
Solution:   Check did_emsg instead of called_emsg.
Files:      src/vim9execute.c, src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.0707
Problem:    Vim9 function test fails.
Solution:   Adjust expected error code.
Files:      src/testdir/test_vim9_func.vim

Patch 8.2.0708
Problem:    Vim9: constant expressions are not simplified.
Solution:   Simplify string concatenation.
Files:      src/vim9compile.c, src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.0709
Problem:    MS-Windows: compiler warning for int vs size_t.
Solution:   Add type cast. (Mike Williams)
Files:      src/channel.c

Patch 8.2.0710
Problem:    Netbeans test sometimes fails.
Solution:   Mark any test using an external command as flaky.
Files:      src/testdir/shared.vim

Patch 8.2.0711
Problem:    With a long running Vim the temp directory might be cleared on
            some systems.
Solution:   Lock the temp directory. (closes #6044)
Files:      src/config.h.in, src/configure.ac, src/auto/configure,
            src/fileio.c, src/globals.h, src/os_unix.h

Patch 8.2.0712
Problem:    Various code not fully tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #6049)
Files:      src/testdir/test_functions.vim, src/testdir/test_options.vim,
            src/testdir/test_system.vim, src/testdir/test_termcodes.vim

Patch 8.2.0713
Problem:    The pam_environment file is not recognized.
Solution:   Add a filetype pattern for pamenv. (closes #6051)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.0714
Problem:    Vim9: handling constant expression does not scale.
Solution:   Use another solution, passing typval_T.
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.0715
Problem:    Vim9: leaking memory.
Solution:   Free strings after concatenating them.
Files:      src/vim9compile.c

Patch 8.2.0716
Problem:    Vim9: another memory leak.
Solution:   Clear typval when failing.
Files:      src/vim9compile.c

Patch 8.2.0717
Problem:    Vim9: postponed constant expressions does not scale.
Solution:   Add a structure to pass around postponed constants.
Files:      src/vim9compile.c, src/testdir/test_vim9_disassemble.vim

Patch 8.2.0718
Problem:    Gcc warning for returning pointer to local variable. (John
            Marriott)
Solution:   Return another pointer.
Files:      src/evalvars.c

Patch 8.2.0719
Problem:    Vim9: more expressions can be evaluated at compile time
Solution:   Recognize has('name').
Files:      src/vim9compile.c, src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.0720
Problem:    Occasional exit when encountering an X error. (Manfred Lotz)
Solution:   On an X error do not exit, do preserve files.
Files:      src/os_unix.c

Patch 8.2.0721
Problem:    Vim9: leaking memory when skipping.
Solution:   Disable skipping in generate_ppconst().
Files:      src/vim9compile.c

Patch 8.2.0722
Problem:    Vim9: not handling constant expression for elseif.
Solution:   Use postponed constants.  Delete the code for evaluating a
            constant expression.
Files:      src/vim9compile.c

Patch 8.2.0723
Problem:    Vim9: nested constant expression not evaluated compile time.
Solution:   Use compile_expr1() for parenthesis.
Files:      src/vim9compile.c, src/testdir/test_vim9_disassemble.vim

Patch 8.2.0724
Problem:    Vim9: appending to buffer/window/tab variable not tested
Solution:   Add a test.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.0725
Problem:    Vim9: cannot call a function declared later in Vim9 script.
Solution:   Make two passes through the script file.
Files:      src/scriptfile.c, src/proto/scriptfile.pro, src/vim9script.c,
            src/vim9compile.c, src/vim9execute.c, src/proto/vim9compile.pro,
            src/userfunc.c, src/proto/userfunc.pro, src/evalvars.c,
            src/proto/evalvars.pro, src/vim.h,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.0726
Problem:    Vim9: leaking memory when calling not compiled :def function.
Solution:   Check if function is compiled earlier.
Files:      src/vim9execute.c

Patch 8.2.0727
Problem:    MS-Windows: new gcc compiler does not support scanf format.
Solution:   Use "%ll" instead of "%I". (Ken Takata)
Files:      src/vim.h

Patch 8.2.0728
Problem:    Messages about a deadly signal are not left aligned.
Solution:   Output a CR before the NL. (Dominique Pellé, #6055)
Files:      src/misc1.c, src/os_unix.c

Patch 8.2.0729
Problem:    Vim9: When reloading a script variables are not cleared.
Solution:   When sourcing a script again clear all script-local variables.
Files:      src/dict.c, src/proto/dict.pro, src/scriptfile.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.0730
Problem:    Vim9: Assignment to dict member does not work.
Solution:   Parse dict assignment. Implement getting dict member.
Files:      src/vim9.h, src/vim9compile.c, src/vim9execute.c, src/globals.h,
            src/testdir/test_vim9_expr.vim, src/testdir/test_vim9_cmd.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.0731
Problem:    Vim9: parsing declarations continues after :finish.
Solution:   Bail out when encountering :finish.
Files:      src/vim9script.c, src/testdir/test_vim9_script.vim

Patch 8.2.0732
Problem:    Vim9: storing value in dict messes up stack.
Solution:   Correct item count of stack.
Files:      src/vim9execute.c, src/testdir/test_vim9_cmd.vim

Patch 8.2.0733
Problem:    Vim9: assigning to dict or list argument does not work.
Solution:   Recognize an argument as assignment target.
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.0734
Problem:    Vim9: leaking memory when using :finish.
Solution:   Do not check for next line in third pass.
Files:      src/scriptfile.c

Patch 8.2.0735
Problem:    Vim9: using uninitialized memory.
Solution:   Clear the arg_lvar field.
Files:      src/vim9compile.c

Patch 8.2.0736
Problem:    Some files not recognized as pamenv.
Solution:   Add pam_inv.conf. (closes #6065)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.0737
Problem:    When shell doesn't support CTRL-Z Vim still handles it.
Solution:   Ignore the STOP signal if it was ignored on startup.
            (Kurtis Rader, closes #5990, closes #6058)
Files:      src/os_unix.c

Patch 8.2.0738
Problem:    Mouse handling in a terminal window not well tested.
Solution:   Add tests. (Yegappan Lakshmanan, closes #6052)
Files:      src/testdir/term_util.vim, src/testdir/test_gui.vim,
            src/testdir/test_modeless.vim, src/testdir/test_terminal.vim

Patch 8.2.0739
Problem:    Incomplete profiling when exiting because of a deadly signal.
Solution:   Call __gcov_flush() if available.
Files:      src/os_unix.c, src/Makefile, .travis.yml

Patch 8.2.0740
Problem:    Minor message mistakes.
Solution:   Change vim to Vim and other fixes.
Files:      src/if_py_both.h, src/if_tcl.c, src/main.c

Patch 8.2.0741
Problem:    Python tests fail because of changed message.
Solution:   Adjust the expected messages (Dominique Pellé, closes #6066)
Files:      src/testdir/test86.ok, src/testdir/test87.ok

Patch 8.2.0742
Problem:    Handling of a TERM signal not tested.
Solution:   Add a test for SIGTERM. (Dominique Pellé, closes #6055)
Files:      src/testdir/test_signals.vim

Patch 8.2.0743
Problem:    Can move to another buffer from a terminal in popup window.
Solution:   Do not allow "gf" or editing a file. (closes #6072)
Files:      src/normal.c, src/ex_cmds.c, src/testdir/test_popupwin.vim

Patch 8.2.0744
Problem:    The name vim is not capitalized in a message.
Solution:   Use "Vim" instead of "vim".
Files:      src/main.c

Patch 8.2.0745
Problem:    Crash on exit when not all popups are closed.
Solution:   Close popups when freeing all memory.  Disable checking for popup
            when editing a file for now.
Files:      src/misc2.c, src/ex_cmds.c

Patch 8.2.0746
Problem:    popup_clear() hangs when a popup can't be closed.
Solution:   Bail out when a popup can't be closed.
Files:      src/popupwin.c, src/proto/popupwin.pro

Patch 8.2.0747
Problem:    Cannot forcefully close all popups.
Solution:   Add the "force" argument to popup_clear().  Use it after running a
            test.  Put back the check for a popup when editing a file.
Files:      runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/tag.c, src/window.c, src/misc2.c,
            src/ex_cmds.c, src/channel.c, src/testdir/runtest.vim,
            src/testdir/test_terminal.vim

Patch 8.2.0748
Problem:    Cannot get a list of all popups.
Solution:   Add popup_list().  Use it in the test runner.
Files:      runtime/doc/eval.txt, runtime/doc/popup.txt, src/popupwin.c,
            src/proto/popupwin.pro, src/evalfunc.c,
            src/testdir/test_popupwin.vim, src/testdir/runtest.vim

Patch 8.2.0749
Problem:    TERM signal test fails on FreeBSD.
