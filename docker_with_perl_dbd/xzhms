	    parenthesis only after the function name.  (Servatius Brandt)
	    Also expand magic braces for "exists('*expr')".  Give an error
	    message for an invalid ":delfunc" argument.  Allow quotes in the
	    ":delfunc" argument.
Files:	    src/eval.c, src/ex_cmds.h, src/ex_docmd.c

Patch 6.1.255 (depends on 6.1.254)
Problem:    Crash when loading menu.vim a second time. (Christian Robinson)
	    ":unlet garbage foo" tries unletting "foo" after an error message.
	    (Servatius Brandt)
	    Very long function arguments cause very long messages when
	    'verbose' is 14 or higher.
Solution:   Avoid reading from uninitialized memory.
	    Break out of a loop after an invalid argument for ":unlet".
	    Truncate long function arguments to 80 characters.
Files:	    src/eval.c

Patch 6.1.256 (depends on 6.1.255)
Problem:    Defining a function after ":if 0" could still cause an error
	    message for an existing function.
	    Leaking memory when there are trailing characters for ":delfunc".
Solution:   Check the "skip" flag.  Free the memory. (Servatius Brandt)
Files:	    src/eval.c

Patch 6.1.257
Problem:    ":cwindow" always sets the previous window to the last but one
	    window.  (Benji Fisher)
Solution:   Set the previous window properly.
Files:	    src/globals.c, src/quickfix.c, src/window.c

Patch 6.1.258
Problem:    Buffers menu doesn't work properly for multibyte buffer names.
Solution:   Use a pattern to get the left and right part of the name.
	    (Yasuhiro Matsumoto)
Files:	    runtime/menu.vim

Patch 6.1.259 (extra)
Problem:    Mac: with 'patchmode' is used filenames are truncated.
Solution:   Increase the BASENAMELEN for Mac OS X. (Ed Ralston)
Files:	    src/os_mac.h

Patch 6.1.260 (depends on 6.1.104)
Problem:    GCC 3.2 still seems to have an optimizer problem. (Zvi Har'El)
Solution:   Use the same configure check as used for GCC 3.1.
Files:	    src/auto/configure, src/configure.in

Patch 6.1.261
Problem:    When deleting a line in a buffer which is not the current buffer,
	    using the Perl interface Delete(), the cursor in the current
	    window may move. (Chris Houser)
Solution:   Don't adjust the cursor position when changing another buffer.
Files:	    src/if_perl.xs

Patch 6.1.262
Problem:    When jumping over folds with "z[", "zj" and "zk" the previous
	    position is not remembered. (Hari Krishna Dara)
Solution:   Set the previous context mark before jumping.
Files:	    src/fold.c

Patch 6.1.263
Problem:    When typing a multibyte character that triggers an abbreviation
	    it is not inserted properly.
Solution:   Handle adding the typed multibyte character. (Yasuhiro Matsumoto)
Files:	    src/getchar.c

Patch 6.1.264 (depends on patch 6.1.254)
Problem:    exists() does not work for built-in functions. (Steve Wall)
Solution:   Don't check for the function name to start with a capital.
Files:	    src/eval.c

Patch 6.1.265
Problem:    libcall() can be used in 'foldexpr' to call any system function.
	    rename(), delete() and remote_send() can also be used in
	    'foldexpr'.  These are security problems. (Georgi Guninski)
Solution:   Don't allow using libcall(), rename(), delete(), remote_send() and
	    similar functions in the sandbox.
Files:	    src/eval.c

Patch 6.1.266 (depends on 6.1.265)
Problem:    Win32: compile error in eval.c. (Bill McCarthy)
Solution:   Move a variable declaration.
Files:	    src/eval.c

Patch 6.1.267
Problem:    Using "p" to paste into a Visual selected area may cause a crash.
Solution:   Allocate enough memory for saving the register contents. (Muraoka
	    Taro)
Files:	    src/ops.c

Patch 6.1.268
Problem:    When triggering an abbreviation with a multibyte character, this
	    character is not correctly inserted after expanding the
	    abbreviation. (Taro Muraoka)
Solution:   Add ABBR_OFF to all characters above 0xff.
Files:	    src/edit.c, src/ex_getln.c, src/getchar.c

Patch 6.1.269
Problem:    After using input() text written with ":redir" gets extra indent.
	    (David Fishburn)
Solution:   Restore msg_col after using input().
Files:	    src/ex_getln.c

Patch 6.1.270 (depends on 6.1.260)
Problem:    GCC 3.2.1 still seems to have an optimizer problem.
Solution:   Use the same configure check as used for GCC 3.1.
Files:	    src/auto/configure, src/configure.in

Patch 6.1.271
Problem:    When compiling without the +syntax feature there are errors.
Solution:   Don't use some code for syntax highlighting. (Roger Cornelius)
	    Make test 45 work without syntax highlighting.
	    Also fix an error in a pattern matching: "\%(" was not supported.
Files:	    src/ex_cmds2.c, src/regexp.c, src/testdir/test45.in

Patch 6.1.272
Problem:    After using ":set define<" a crash may happen. (Christian Robinson)
Solution:   Make a copy of the option value in allocated memory.
Files:	    src/option.c

Patch 6.1.273
Problem:    When the cursor doesn't blink, redrawing an exposed area may hide
	    the cursor.
Solution:   Always draw the cursor, also when it didn't move. (Muraoka Taro)
Files:	    src/gui.c

Patch 6.1.274 (depends on 6.1.210)
Problem:    Resetting the iconv() state after each error is wrong for an
	    incomplete sequence.
Solution:   Don't reset the iconv() state.
Files:	    src/fileio.c

Patch 6.1.275
Problem:    When using "v" in a startup script, get warning message that
	    terminal cannot highlight. (Charles Campbell)
Solution:   Only give the message after the terminal has been initialized.
Files:	    src/normal.c

Patch 6.1.276
Problem:    "gvim --remote file" doesn't prompt for an encryption key.
Solution:   The further characters the client sends to the server are used.
	    Added inputsave() and inputrestore() to allow prompting the
	    user directly and not using typeahead.
	    Also fix possible memory leak for ":normal".
Files:	    src/eval.c, src/ex_cmds2.c, src/ex_docmd.c, src/getchar.c,
	    src/main.c, src/proto/getchar.pro, src/proto/ui.pro,
	    src/runtime/doc/eval.txt, src/structs.h, src/ui.c, src/vim.h

Patch 6.1.277 (depends on 6.1.276)
Problem:    Compilation error when building with small features.
Solution:   Define trash_input_buf() when needed. (Kelvin Lee)
Files:	    src/ui.c

Patch 6.1.278
Problem:    When using signs the line number of a closed fold doesn't line up
	    with the other line numbers. (Kamil Burzynski)
Solution:   Insert two spaces for the sign column.
Files:	    src/screen.c

Patch 6.1.279
Problem:    The prototype for smsg() and smsg_attr() do not match the function
	    definition.  This may cause trouble for some compilers. (Nix)
Solution:   Use va_list for systems that have stdarg.h.  Use "int" instead of
	    "void" for the return type.
Files:	    src/auto/configure, src/config.h.in, src/configure.in,
	    src/proto.h, src/message.c

Patch 6.1.280
Problem:    It's possible to use an argument "firstline" or "lastline" for a
	    function but using "a:firstline" or "a:lastline" in the function
	    won't work.  (Benji Fisher)
Solution:   Give an error message for these arguments.
	    Also avoid that the following function body causes a whole row of
	    errors, skip over it after an error in the first line.
Files:	    src/eval.c

Patch 6.1.281
Problem:    In Insert mode CTRL-X CTRL-G leaves the cursor after the ruler.
Solution:   Set the cursor position before waiting for the argument of CTRL-G.
	    (Yasuhiro Matsumoto)
Files:	    src/edit.c

Patch 6.1.282
Problem:    Elvis uses "se" in a modeline, Vim doesn't recognize this.
Solution:   Also accept "se " where "set " is accepted in a modeline.
	    (Yasuhiro Matsumoto)
Files:	    src/buffer.c

Patch 6.1.283
Problem:    For ":sign" the icon file name cannot contain a space.
Solution:   Handle backslashes in the file name.  (Yasuhiro Matsumoto)
Files:	    src/ex_cmds.c

Patch 6.1.284
Problem:    On Solaris there is a warning for "struct utimbuf".
Solution:   Move including "utime.h" to outside the function. (Derek Wyatt)
Files:	    src/fileio.c

Patch 6.1.285
Problem:    Can't wipe out a buffer with 'bufhide' option.
Solution:   Add "wipe" value to 'bufhide'. (Yegappan Lakshmanan)
Files:	    runtime/doc/options.txt, src/buffer.c, src/option.c,
	    src/quickfix.c

Patch 6.1.286
Problem:    'showbreak' cannot contain multibyte characters.
Solution:   Allow using all printable characters for 'showbreak'.
Files:	    src/charset.c, src/move.c, src/option.c

Patch 6.1.287 (depends on 6.1.285)
Problem:    Effect of "delete" and "wipe" in 'bufhide' were mixed up.
Solution:   Wipe out when wiping out is asked for.
Files:	    src/buffer.c

Patch 6.1.288
Problem:    ":silent function F" hangs. (Hari Krishna Dara)
Solution:   Don't use msg_col, it is not incremented when using ":silent".
	    Also made the function output look a bit better.  Don't translate
	    "function".
Files:	    src/eval.c

Patch 6.1.289 (depends on 6.1.278)
Problem:    Compiler warning for pointer. (Axel Kielhorn)
Solution:   Add a typecast for "  ".
Files:	    src/screen.c

Patch 6.1.290 (extra)
Problem:    Truncating long text for message box may break multibyte
	    character.
Solution:   Adjust to start of multibyte character. (Yasuhiro Matsumoto)
Files:	    src/os_mswin.c

Patch 6.1.291 (extra)
Problem:    Win32: CTRL-@ doesn't work.  Don't even get a message for it.
Solution:   Recognize the keycode for CTRL-@. (Yasuhiro Matsumoto)
Files:	    src/gui_w48.c

Patch 6.1.292 (extra, depends on 6.1.253)
Problem:    Win32: Can't compile with new MingW compiler.
	    Borland 5 makefile doesn't generate pathdef.c.
Solution:   Remove -wwide-multiply argument. (Rene de Zwart)
	    Various fixes for other problems in Win32 makefiles. (Dan Sharp)
Files:	    src/Make_bc5.mak, src/Make_cyg.mak, src/Make_ming.mak,
	    src/Make_mvc.mak

Patch 6.1.293
Problem:    byte2line() returns a wrong result for some values.
Solution:   Change ">=" to ">" in ml_find_line_or_offset(). (Bradford C Smith)
	    Add one to the line number when at the end of a block.
Files:	    src/memline.c

Patch 6.1.294
Problem:    Can't include a multibyte character in a string by its hex value.
	    (Benji Fisher)
Solution:   Add "\u....": a character specified with up to four hex numbers
	    and stored according to the value of 'encoding'.
Files:	    src/eval.c

Patch 6.1.295 (extra)
Problem:    Processing the cs.po file generates an error. (Rahul Agrawal)
Solution:   Fix the printf format characters in the translation.
Files:	    src/po/cs.po

Patch 6.1.296
Problem:    Win32: When cancelling the font dialog 'guifont' remains set to
	    "*".
Solution:   Restore the old value of 'guifont' (Yasuhiro Matsumoto)
Files:	    src/option.c

Patch 6.1.297
Problem:    "make test" fails in test6 in an UTF-8 environment. (Benji Fisher)
Solution:   Before executing the BufReadPost autocommands save the current
	    fileencoding, so that the file isn't marked changed.
Files:	    src/fileio.c

Patch 6.1.298
Problem:    When using signs and the first line of a closed fold has a sign
	    it can be redrawn as if the fold was open.  (Kamil Burzynski)
Solution:   Don't redraw a sign inside a closed fold.
Files:	    src/screen.c

Patch 6.1.299
Problem:    ":edit +set\ ro file" doesn't work.
Solution:   Halve the number of backslashes in the "+cmd" argument.
Files:	    src/ex_docmd.c

Patch 6.1.300 (extra)
Problem:    Handling of ETO_IGNORELANGUAGE is confusing.
Solution:   Clean up the handling of ETO_IGNORELANGUAGE. (Glenn Maynard)
Files:	    src/gui_w32.c

Patch 6.1.301 (extra)
Problem:    French translation of file-save dialog doesn't show file name.
Solution:   Insert a star in the printf string. (Francois Terrot)
Files:	    src/po/fr.po

Patch 6.1.302
Problem:    Counting lines of the Visual area is incorrect for closed folds.
	    (Mikolaj Machowski)
Solution:   Correct the start and end for the closed fold.
Files:	    src/normal.c

Patch 6.1.303 (extra)
Problem:    The Top/Bottom/All text does not always fit in the ruler when
	    translated to Japanese.  Problem with a character being wider when
	    in a bold font.
Solution:   Use ETO_PDY to specify the width of each character. (Yasuhiro
	    Matsumoto)
Files:	    src/gui_w32.c

Patch 6.1.304 (extra, depends on 6.1.292)
Problem:    Win32: Postscript is always enabled in the MingW Makefile.
	    Pathdef.c isn't generated properly with Make_bc5.mak. (Yasuhiro
	    Matsumoto)
Solution:   Change an ifdef to an ifeq. (Madoka Machitani)
	    Use the Borland make redirection to generate pathdef.c. (Maurice
	    Barnum)
Files:	    src/Make_bc5.mak, src/Make_ming.mak

Patch 6.1.305
Problem:    When 'verbose' is 14 or higher, a function call may cause reading
	    uninitialized data. (Walter Briscoe)
Solution:   Check for end-of-string in trunc_string().
Files:	    src/message.c

Patch 6.1.306
Problem:    The AIX VisualAge cc compiler doesn't define __STDC__.
Solution:   Use __EXTENDED__ like __STDC__. (Jess Thrysoee)
Files:	    src/os_unix.h

Patch 6.1.307
Problem:    When a double-byte character has an illegal tail byte the display
	    is messed up. (Yasuhiro Matsumoto)
Solution:   Draw "XX" instead of the wrong character.
Files:	    src/screen.c

Patch 6.1.308
Problem:    Can't reset the Visual mode returned by visualmode().
Solution:   Use an optional argument to visualmode(). (Charles Campbell)
Files:	    runtime/doc/eval.txt, src/eval.c, src/normal.c,
	    src/structs.h

Patch 6.1.309
Problem:    The tutor doesn't select German if the locale name is
	    "German_Germany.1252". (Joachim Hofmann)
Solution:   Check for "German" in the locale name.  Also check for
	    ".ge".  And include the German and Greek tutors.
Files:	    runtime/tutor/tutor.de, runtime/tutor/tutor.vim,
	    runtime/tutor/tutor.gr, runtime/tutor/tutor.gr.cp737

Patch 6.1.310 (depends on 6.1.307)
Problem:    All double-byte characters are displayed as "XX".
Solution:   Use ">= 32" instead of "< 32".  (Yasuhiro Matsumoto)
Files:	    src/screen.c

Patch 6.1.311 (extra)
Problem:    VMS: path in window title doesn't include necessary separator.
	    file version doesn't always work properly with Unix.
	    Crashes because of memory overwrite in GUI.
	    Didn't always handle files with lowercase and correct path.
Solution:   Fix the problems.  Remove unnecessary file name translations.
	    (Zoltan Arpadffy)
Files:	    src/buffer.c, src/ex_cmds2.c, src/fileio.c, src/memline.c,
	    src/misc1.c, src/misc2.c, src/os_unix.c, src/os_vms.c, src/tag.c

Patch 6.1.312
Problem:    When using ":silent" debugging is also done silently.
Solution:   Disable silence while at the debug prompt.
Files:	    src/ex_cmds2.c

Patch 6.1.313
Problem:    When a ":drop fname" command is used and "fname" is open in
	    another window, it is also opened in the current window.
Solution:   Change to the window with "fname" instead.
	    Don't redefine the argument list when dropping only one file.
Files:	    runtime/doc/windows.txt, src/ex_cmds2.c, src/ex_cmds.c,
	    src/ex_docmd.c, src/proto/ex_cmds2.pro, src/proto/ex_docmd.pro

Patch 6.1.314 (depends on 6.1.126)
Problem:    Missing backslash in "Generic Config file" syntax menu.
Solution:   Insert the backslash. (Zak Beck)
Files:	    runtime/makemenu.vim, runtime/synmenu.vim

Patch 6.1.315 (extra)
Problem:    A very long hostname may lead to an unterminated string.  Failing
	    to obtain a hostname may result in garbage.  (Walter Briscoe)
Solution:   Add a NUL at the end of the hostname buffer.
Files:	    src/os_mac.c, src/os_msdos.c, src/os_unix.c, src/os_win16.c,
	    src/os_win32.c

Patch 6.1.316
Problem:    When exiting with "wq" and there is a hidden buffer, after the
	    "file changed" dialog there is a warning for a changed buffer.
	    (Ajit Thakkar)
Solution:   Do update the buffer timestamps when exiting.
Files:	    src/fileio.c

Patch 6.1.317
Problem:    Closing a window may cause some of the remaining windows to be
	    positioned wrong if there is a mix of horizontal and vertical
	    splits. (Stefan Ingi Valdimarsson)
Solution:   Update the frame sizes before updating the window positions.
Files:	    src/window.c

Patch 6.1.318
Problem:    auto/pathdef.c can include wrong quotes when a compiler flag
	    includes quotes.
Solution:   Put a backslash before the quotes in compiler flags. (Shinra Aida)
Files:	    src/Makefile

Patch 6.1.319 (depends on 6.1.276)
Problem:    Using "--remote +cmd file" does not execute "cmd".
Solution:   Call inputrestore() in the same command line as inputsave(),
	    otherwise it will never get executed.
Files:	    src/main.c

Patch 6.1.320 (depends on 6.1.313)
Problem:    When a ":drop one\ file" command is used the file "one\ file" is
	    opened, the backslash is not removed. (Taro Muraoka)
Solution:   Handle backslashes correctly.  Always set the argument list to
	    keep it simple.
Files:	    runtime/doc/windows.txt, src/ex_cmds.c

Patch 6.1.321
Problem:    When 'mouse' includes 'n' but not 'v', don't allow starting Visual
	    mode with the mouse.
Solution:   Don't use MOUSE_MAY_VIS when there is no 'v' in 'mouse'. (Flemming
	    Madsen)
Files:	    src/normal.c

Patch 6.1.322 (extra, depends on 6.1.315)
Problem:    Win32: The host name is always "PC " plus the real host name.
Solution:   Don't insert "PC " before the host name.
Files:	    src/os_win32.c

Patch 6.1.323
Problem:    ":registers" doesn't stop listing for a "q" at the more prompt.
	    (Hari Krishna Dara)
Solution:   Check for interrupt and got_int.
Files:	    src/ops.c, src/proto/ops.pro

Patch 6.1.324
Problem:    Crash when dragging a vertical separator when <LeftMouse> is
	    remapped to jump to another window.
Solution:   Pass the window pointer to the function doing the dragging instead
	    of always using the current window. (Daniel Elstner)
	    Also fix that starting a drag changes window focus.
Files:	    src/normal.c, src/proto/window.pro, src/ui.c, src/vim.h,
	    src/window.c

Patch 6.1.325
Problem:    Shift-Tab is not automatically recognized in an xterm.
Solution:   Add <Esc>[Z as the termcap code. (Andrew Pimlott)
Files:	    src/term.c

Patch 6.1.326
Problem:    Using a search pattern may read from uninitialized data (Yasuhiro
	    Matsumoto)
Solution:   Initialize pointers to NULL.
Files:	    src/regexp.c

Patch 6.1.327
Problem:    When opening the "mbyte.txt" help file the utf-8 characters are
	    unreadable, because the fileencoding is forced to be latin1.
Solution:   Check for utf-8 encoding first in help files. (Daniel Elstner)
Files:	    runtime/doc/mbyte.txt, src/fileio.c

Patch 6.1.328
Problem:    Prototype for enc_canon_search() is missing.
Solution:   Add the prototype. (Walter Briscoe)
Files:	    src/mbyte.c

Patch 6.1.329
Problem:    When editing a file "a b c" replacing "%" in ":Cmd %" or ":next %"
	    does not work properly.  (Hari Krishna Dara)
Solution:   Always escape spaces when expanding "%".  Don't split argument for
	    <f-args> in a user command when only one argument is used.
Files:	    src/ex_docmd.c

Patch 6.1.330
Problem:    GTK, Motif and Athena: Keypad keys produce the same code as
	    non-keypad keys, making it impossible to map them separately.
Solution:   Use different termcap codes for the keypad keys. (Neil Bird)
Files:	    src/gui_gtk_x11.c, src/gui_x11.c

Patch 6.1.331
Problem:    When translating the help files, "LOCAL ADDITIONS" no longer marks
	    the spot where help files from plugins are to be listed.
Solution:   Add a "local-additions" tag and use that to find the right spot.
Files:	    runtime/doc/help.txt, src/ex_cmds.c

Patch 6.1.332 (extra)
Problem:    Win32: Loading Perl dynamically doesn't work with Perl 5.8.
	    Perl 5.8 also does not work with Cygwin and Ming.
Solution:   Adjust the function calls. (Taro Muraoka)
	    Adjust the cyg and ming makefiles. (Dan Sharp)
Files:	    src/Make_cyg.mak, src/Make_ming.mak, src/Make_mvc.mak,
	    src/if_perl.xs

Patch 6.1.333 (extra)
Problem:    Win32: Can't handle Unicode text on the clipboard.
	    Can't pass NUL byte, it becomes a line break.  (Bruce DeVisser)
Solution:   Support Unicode for the clipboard (Ron Aaron and Glenn Maynard)
	    Also support copy/paste of NUL bytes.
Files:	    src/os_mswin.c, src/os_win16.c src/os_win32.c

Patch 6.1.334 (extra, depends on 6.1.303)
Problem:    Problem with drawing Hebrew characters.
Solution:   Only use ETO_PDY for Windows NT and the like. (Yasuhiro Matsumoto)
Files:	    src/gui_w32.c

Patch 6.1.335 (extra)
Problem:    Failure of obtaining the cursor position and window size is
	    ignored.
Solution:   Remove a semicolon after an "if". (Walter Briscoe)
Files:	    src/gui_w32.c

Patch 6.1.336 (extra)
Problem:    Warning for use of function prototypes of smsg().
Solution:   Define HAVE_STDARG_H. (Walter Briscoe)
Files:	    src/os_win32.h

Patch 6.1.337
Problem:    When using "finish" in debug mode in function B() for ":call
	    A(B())" does not stop after B() is finished.
Solution:   Increase debug_level while evaluating a function.
Files:	    src/ex_docmd.c

Patch 6.1.338
Problem:    When using a menu that checks out the current file from Insert
	    mode, there is no warning for the changed file until exiting
	    Insert mode.  (Srikanth Sankaran)
Solution:   Add a check for need_check_timestamps in the Insert mode loop.
Files:	    src/edit.c

Patch 6.1.339
Problem:    Completion doesn't allow "g:" in ":let g:did_<Tab>". (Benji
	    Fisher)
Solution:   Return "g:var" for global variables when that is what is being
	    expanded. (Flemming Madsen)
Files:	    src/eval.c

Patch 6.1.340 (extra, depends on 6.1.332)
Problem:    Win32: Can't compile the Perl interface with nmake.
Solution:   Don't compare the version number as a string but as a number.
	    (Juergen Kraemer)
Files:	    src/Make_mvc.mak

Patch 6.1.341
Problem:    In Insert mode with 'rightleft' set the cursor is drawn halfway a
	    double-wide character.  For CTRL-R and CTRL-K in Insert mode the "
	    or ? is not displayed.
Solution:   Draw the cursor in the next character cell.  Display the " or ?
	    over the right half of the double-wide character. (Yasuhiro
	    Matsumoto)  Also fix that cancelling a digraph doesn't redraw
	    a double-byte character correctly.
Files:	    src/edit.c, src/gui.c, src/mbyte.c

Patch 6.1.342 (depends on 6.1.341)
Problem:    With 'rightleft' set typing "c" on a double-wide character causes
	    the cursor to be displayed one cell to the left.
Solution:   Draw the cursor in the next character cell.  (Yasuhiro Matsumoto)
Files:	    src/gui.c

Patch 6.1.343 (depends on 6.1.342)
Problem:    Cannot compile with the +multi_byte feature but without +rightleft.
	    Cannot compile without the GUI.
Solution:   Fix the #ifdefs.  (partly by Nam SungHyun)
Files:	    src/gui.c, src/mbyte.c, src/ui.c

Patch 6.1.344
Problem:    When using ":silent filetype" the output is still put in the
	    message history. (Hari Krishna Dara)
Solution:   Don't add messages in the history when ":silent" is used.
Files:	    src/message.c

Patch 6.1.345 (extra)
Problem:    Win32: 'imdisable' doesn't work.
Solution:   Make 'imdisable' work. (Yasuhiro Matsumoto)
Files:	    src/gui_w32.c

Patch 6.1.346
Problem:    The scroll wheel can only scroll the current window.
Solution:   Make the scroll wheel scroll the window that the mouse points to.
	    (Daniel Elstner)
Files:	    src/edit.c, src/gui.c, src/normal.c, src/term.c

Patch 6.1.347
Problem:    When using cscope to list matching tags, the listed number is
	    sometimes not equal to what cscope uses. (Vihren Milev)
Solution:   For cscope tags use only one table, don't give tags in the current
	    file a higher priority.
Files:	    src/tag.c

Patch 6.1.348
Problem:    Wildmode with wildmenu: ":set wildmode=list,full", ":colorscheme
	    <tab>" results in "zellner" instead of the first entry. (Anand
	    Hariharan)
Solution:   Don't call ExpandOne() from globpath(). (Flemming Madsen)
Files:	    src/ex_getln.c

Patch 6.1.349
Problem:    "vim --serverlist" when no server was ever started gives an error
	    message without "\n".
	    "vim --serverlist" doesn't exit when the X server can't be
	    contacted, it starts Vim unexpectedly. (Ricardo Signes)
Solution:   Don't give an error when no Vim server was ever started.
	    Treat failing of opening the display equal to errors inside the
	    remote*() functions. (Flemming Madsen)
Files:	    src/if_xcmdsrv.c, src/main.c

Patch 6.1.350
Problem:    When entering a buffer with ":bnext" for the first time, using an
	    autocommand to restore the last used cursor position doesn't work.
	    (Paolo Giarusso)
Solution:   Don't use the last known cursor position of the current Vim
	    invocation if an autocommand changed the position.
Files:	    src/buffer.c

Patch 6.1.351 (depends on 6.1.349)
Problem:    Crash when starting Vim the first time in an X server. (John
	    McGowan)
Solution:   Don't call xFree() with a fixed string.
Files:	    src/if_xcmdsrv.c

Patch 6.1.352 (extra, depends on 6.1.345)
Problem:    Win32: Crash when setting "imdisable" in _vimrc.
Solution:   Don't call IME functions when imm32.dll was not loaded (yet).
	    Also add typecasts to avoid Compiler warnings for
	    ImmAssociateContext() argument.
Files:	    src/gui_w32.c

Patch 6.1.353 (extra, depends on 6.1.334)
Problem:    Problem with drawing Arabic characters.
Solution:   Don't use ETO_PDY, do use padding.
Files:	    src/gui_w32.c

Patch 6.1.354 (extra, depends on 6.1.333)
Problem:    MS-Windows 98: Notepad can't paste text copied from Vim when
	    'encoding' is "utf-8".
Solution:   Also make CF_TEXT available on the clipboard. (Ron Aaron)
Files:	    src/os_mswin.c

Patch 6.1.355
Problem:    In a regexp '\n' will never match anything in a string.
Solution:   Make '\n' match a newline character.
Files:	    src/buffer.c, src/edit.c, src/eval.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/misc1.c,
	    src/option.c, src/os_mac.c, src/os_unix.c, src/quickfix.c,
	    src/regexp.c, src/search.c, src/syntax.c, src/tag.c, src/vim.h

Patch 6.1.356 (extra, depends on, well, eh, several others)
Problem:    Compiler warnings for using convert_setup() and a few other
	    things.
Solution:   Add typecasts.
Files:	    src/mbyte.c, src/os_mswin.c, src/proto/os_win32.pro, src/os_win32.c

Patch 6.1.357
Problem:    CR in the quickfix window jumps to the error under the cursor, but
	    this doesn't work in Insert mode. (Srikanth Sankaran)
Solution:   Handle CR in Insert mode in the quickfix window.
Files:	    src/edit.c

Patch 6.1.358
Problem:    The tutor doesn't select another locale version properly.
Solution:   Insert the "let" command. (Yasuhiro Matsumoto)
Files:	    runtime/tutor/tutor.vim

Patch 6.1.359 (extra)
Problem:    Mac Carbon: Vim doesn't get focus when started from the command
	    line.  Crash when using horizontal scroll bar.
Solution:   Set Vim as the frontprocess.  Fix scrolling.  (Peter Cucka)
Files:	    src/gui_mac.c

Patch 6.1.360 (depends on 6.1.341)
Problem:    In Insert mode CTRL-K ESC messes up a multibyte character.
	    (Anders Helmersson)
Solution:   Save all bytes of a character when displaying a character
	    temporarily.
Files:	    src/edit.c, src/proto/screen.pro, src/screen.c

Patch 6.1.361
Problem:    Cannot jump to a file mark with ":'M".
Solution:   Allow jumping to another file for a mark in an Ex address when it
	    is the only thing in the command line.
Files:	    src/ex_docmd.c

Patch 6.1.362
Problem:    tgetent() may return zero for success. tgetflag() may return -1
	    for an error.
Solution:   Check tgetflag() for returning a positive value.  Add an autoconf
	    check for the value that tgetent() returns.
Files:	    src/auto/configure, src/config.h.in, src/configure.in, src/term.c

Patch 6.1.363
Problem:    byte2line() can return one more than the number of lines.
Solution:   Return -1 if the offset is one byte past the end.
Files:	    src/memline.c

Patch 6.1.364
Problem:    That the FileChangedShell autocommand event never nests makes it
	    difficult to reload a file in a normal way.
Solution:   Allow nesting for the FileChangedShell event but do not allow
	    triggering itself again.
	    Also avoid autocommands for the cmdline window in rare cases.
Files:	    src/ex_getln.c, src/fileio.c, src/window.c

Patch 6.1.365 (depends on 6.1.217)
Problem:    Setting a breakpoint in a sourced file with a relative path name
	    doesn't work. (Servatius Brandt)
Solution:   Expand the file name to a full path.
Files:	    src/ex_cmds2.c

Patch 6.1.366
Problem:    Can't use Vim with Netbeans.
Solution:   Add the Netbeans interface.  Includes support for sign icons and
	    "-fg" and "-bg" arguments for GTK.  Add the 'autochdir'
	    option.  (Gordon Prieur, George Hernandez, Dave Weatherford)
	    Make it possible to display both a sign with a text and one with
	    line highlighting in the same line.
	    Add support for Agide, interface version 2.1.
	    Also fix that when 'iskeyword' includes '?' the "*" command
	    doesn't work properly on a word that includes "?" (Bill McCarthy):
	    Don't escape "?" to "\?" when searching forward.
Files:	    runtime/doc/Makefile, runtime/doc/netbeans.txt,
	    runtime/doc/options.txt, runtime/doc/various.txt,
	    src/Makefile, src/auto/configure, src/buffer.c, src/config.h.in,
	    src/config.mk.in, src/configure.in, src/edit.c, src/ex_cmds.c,
	    src/ex_docmd.c, src/feature.h, src/fileio.c, src/globals.h,
	    src/gui.c, src/gui_beval.c, src/gui_gtk_x11.c, src/gui_x11.c,
	    src/main.c, src/memline.c, src/misc1.c, src/misc2.c, src/move.c,
	    src/nbdebug.c, src/nbdebug.h, src/netbeans.c, src/normal.c,
	    src/ops.c, src/option.c, src/option.h, src/proto/buffer.pro,
	    src/proto/gui_beval.pro, src/proto/gui_gtk_x11.pro,
	    src/proto/gui_x11.pro, src/proto/misc2.pro,
	    src/proto/netbeans.pro, src/proto/normal.pro, src/proto/ui.pro,
	    src/proto.h, src/screen.c, src/structs.h, src/ui.c, src/undo.c,
	    src/vim.h, src/window.c, src/workshop.c

Patch 6.1.367 (depends on 6.1.365)
Problem:    Setting a breakpoint in a function doesn't work.  For a sourced
	    file it doesn't work when symbolic links are involved.  (Servatius
	    Brandt)
Solution:   Expand the file name in the same way as do_source() does.  Don't
	    prepend the path to a function name.
Files:	    src/ex_cmds2.c

Patch 6.1.368
Problem:    Completion for ":map" does not include <silent> and <script>.
	    ":mkexrc" do not save the <silent> attribute of mappings.
Solution:   Add "<silent>" to the generated map commands when appropriate.
	    (David Elstner)
	    Add <silent> and <script> to command line completion.
Files:	    src/getchar.c

Patch 6.1.369 (extra)
Problem:    VMS: Vim hangs when attempting to edit a read-only file in the
	    terminal.  Problem with VMS filenames for quickfix.
Solution:   Rewrite low level input.  Remove version number from file name in
	    a couple more places.  Fix crash after patch 6.1.362.  Correct
	    return code for system().  (Zoltan Arpadffy, Tomas Stehlik)
Files:	    src/misc1.c, src/os_unix.c, src/os_vms.c, src/proto/os_vms.pro,
	    src/os_vms_conf.h, src/quickfix.c, src/ui.c

Patch 6.1.370
Problem:    #ifdef nesting is unclear.
Solution:   Insert spaces to indicate the nesting.
Files:	    src/os_unix.c

Patch 6.1.371
Problem:    "%V" in 'statusline' doesn't show "0-1" in an empty line.
Solution:   Add one to the column when comparing with virtual column (Andrew
	    Pimlott)
Files:	    src/buffer.c

Patch 6.1.372
Problem:    With 16 bit ints there are compiler warnings. (Walter Briscoe)
Solution:   Change int into long.
Files:	    src/structs.h, src/syntax.c

Patch 6.1.373
Problem:    The default page header for printing is not translated.
Solution:   Add _() around the two places where "Page" is used. (Mike
	    Williams)  Translate the default value of the 'titleold' and
	    'printheader' options.
Files:	    src/ex_cmds2.c, src/option.c

Patch 6.1.374 (extra)
Problem:    MS-Windows: Cannot build GvimExt with MingW or Cygwin.
Solution:   Add makefile and modified resource files. (Rene de Zwart)
	    Also support Cygwin. (Alejandro Lopez_Valencia)
Files:	    GvimExt/Make_cyg.mak, GvimExt/Make_ming.mak, GvimExt/Makefile,
	    GvimExt/gvimext_ming.def, GvimExt/gvimext_ming.rc

Patch 6.1.375
Problem:    MS-Windows: ':!dir "%"' does not work for a file name with spaces.
	    (Xiangjiang Ma)
Solution:   Don't insert backslashes for spaces in a shell command.
Files:	    src/ex_docmd.c

Patch 6.1.376
Problem:    "vim --version" and "vim --help" have a non-zero exit code.
	    That is unusual. (Petesea)
Solution:   Use a zero exit code.
Files:	    src/main.c

Patch 6.1.377
Problem:    Can't add words to 'lispwords' option.
Solution:   Add P_COMMA and P_NODUP flags. (Haakon Riiser)
Files:	    src/option.c

Patch 6.1.378
Problem:    When two buffer-local user commands are ambiguous, a full match
	    with a global user command isn't found. (Hari Krishna Dara)
Solution:   Detect this situation and accept the global command.
Files:	    src/ex_docmd.c

Patch 6.1.379
Problem:    Linux with kernel 2.2 can't use the alternate stack in combination
	    with threading, causes an infinite loop.
Solution:   Don't use the alternate stack in this situation.
Files:	    src/os_unix.c

Patch 6.1.380
Problem:    When 'winminheight' is zero and the quickfix window is zero lines,
	    entering the window doesn't make it higher. (Christian J.
	    Robinson)
Solution:   Make sure the current window is at least one line high.
Files:	    src/window.c

Patch 6.1.381
Problem:    When a BufWriteCmd is used and it leaves the buffer modified, the
	    window may still be closed. (Hari Krishna Dara)
Solution:   Return FAIL from buf_write() when the buffer is still modified
	    after a BufWriteCmd autocommand was used.
Files:	    src/fileio.c

Patch 6.1.382 (extra)
Problem:    Win32 GUI: When using two monitors, the code that checks/fixes the
	    window size and position (e.g. when a font changes) doesn't work
	    properly.  (George Reilly)
Solution:   Handle a double monitor situation. (Helmut Stiegler)
Files:	    src/gui_w32.c

Patch 6.1.383
Problem:    The filling of the status line doesn't work properly for
	    multibyte characters. (Nam SungHyun)
	    There is no check for going past the end of the buffer.
Solution:   Properly distinguish characters and bytes.  Properly check for
	    running out of buffer space.
Files:	    src/buffer.c, src/ex_cmds2.c, src/proto/buffer.pro, src/screen.c

Patch 6.1.384
Problem:    It is not possible to find if a certain patch has been included.
	    (Lubomir Host)
Solution:   Support using has() to check if a patch was included.
Files:	    runtime/doc/eval.txt, src/eval.c, src/proto/version.pro,
	    src/version.c

Patch 6.1.385 (depends on 6.1.383)
Problem:    Can't compile without the multibyte feature.
Solution:   Move an #ifdef.  (Christian J. Robinson)
Files:	    src/buffer.c

Patch 6.1.386
Problem:    Get duplicate tags when running ":helptags".
Solution:   Do the other half of moving a section to another help file.
Files:	    runtime/tagsrch.txt

Patch 6.1.387 (depends on 6.1.373)
Problem:    Compiler warning for pointer cast.
Solution:   Add (char_u *).
Files:	    src/option.c

Patch 6.1.388 (depends on 6.1.384)
Problem:    Compiler warning for pointer cast.
Solution:   Add (char *).  Only include has_patch() when used.
Files:	    src/eval.c, src/version.c

Patch 6.1.389 (depends on 6.1.366)
Problem:    Balloon evaluation doesn't work for GTK.
	    has("balloon_eval") doesn't work.
Solution:   Add balloon evaluation for GTK.  Also improve displaying of signs.
	    (Daniel Elstner)
	    Also make ":gui" start the netbeans connection and avoid using
	    netbeans functions when the connection is not open.
Files:	    src/Makefile, src/feature.h, src/gui.c, src/gui.h,
	    src/gui_beval.c, src/gui_beval.h, src/gui_gtk.c,
	    src/gui_gtk_x11.c, src/eval.c, src/memline.c, src/menu.c,
	    src/netbeans.c, src/proto/gui_beval.pro, src/proto/gui_gtk.pro,
	    src/structs.h, src/syntax.c, src/ui.c, src/workshop.c

Patch 6.1.390 (depends on 6.1.389)
Problem:    It's not possible to tell Vim to save and exit through the
	    Netbeans interface.  Would still try to send balloon eval text
	    after the connection is closed.
	    Can't use Unicode characters for sign text.
Solution:   Add functions "saveAndExit" and "getModified".  Check for a
	    working connection before sending a balloonText event.
	    various other cleanups.
	    Support any character for sign text. (Daniel Elstner)
Files:	    runtime/doc/netbeans.txt, runtime/doc/sign.txt, src/ex_cmds.c,
	    src/netbeans.c, src/screen.c

Patch 6.1.391
Problem:    ml_get() error when using virtualedit. (Charles Campbell)
Solution:   Get a line from a specific window, not the current one.
Files:	    src/charset.c

Patch 6.1.392 (depends on 6.1.383)
Problem:    Highlighting in the 'statusline' is in the wrong position when an
	    item is truncated. (Zak Beck)
Solution:   Correct the start of 'statusline' items properly for a truncated
	    item.
Files:	    src/buffer.c

Patch 6.1.393
Problem:    When compiled with Python and threads, detaching the terminal may
	    cause Vim to loop forever.
Solution:   Add -pthread to $CFLAGS when using Python and gcc. (Daniel
	    Elstner)
Files:	    src/auto/configure,, src/configure.in

Patch 6.1.394 (depends on 6.1.390)
Problem:    The netbeans interface doesn't recognize multibyte glyph names.
Solution:   Check the number of cells rather than bytes to decide
	    whether a glyph name is not a filename. (Daniel Elstner)
Files:	    src/netbeans.c

Patch 6.1.395 (extra, depends on 6.1.369)
Problem:    VMS: OLD_VMS is never defined.  Missing function prototype.
Solution:   Define OLD_VMS in Make_vms.mms.  Add vms_sys_status() to
	    os_vms.pro. (Zoltan Arpadffy)
Files:	    src/Make_vms.mms, src/proto/os_vms.pro

Patch 6.1.396 (depends on 6.1.330)
Problem:    Compiler warnings for using enum.
Solution:   Add typecast to char_u.
Files:	    src/gui_gtk_x11.c, src/gui_x11.c

Patch 6.1.397 (extra)
Problem:    The install program may use a wrong path for the diff command if
	    there is a space in the install directory path.
Solution:   Use double quotes around the path if necessary. (Alejandro
	    Lopez-Valencia)  Also use double quotes around the file name
	    arguments.
Files:	    src/dosinst.c

Patch 6.1.398
Problem:    Saving the typeahead for debug mode causes trouble for a test
	    script. (Servatius Brandt)
Solution:   Add the ":debuggreedy" command to avoid saving the typeahead.
Files:	    runtime/doc/repeat.txt, src/ex_cmds.h, src/ex_cmds2.c,
	    src/ex_docmd.c, src/proto/ex_cmds2.pro

Patch 6.1.399
Problem:    Warning for unused variable.
Solution:   Remove the variable two_or_more.
Files:	    src/ex_cmds.c

Patch 6.1.400 (depends on 6.1.381)
Problem:    When a BufWriteCmd wipes out the buffer it may still be accessed.
Solution:   Don't try accessing a buffer that has been wiped out.
Files:	    src/fileio.c

Patch 6.1.401 (extra)
Problem:    Building the Win16 version with Borland 5.01 doesn't work.
	    "make test" doesn't work with Make_dos.mak. (Walter Briscoe)
Solution:   Various fixes to the w16 makefile. (Walter Briscoe)
	    Don't use deltree.  Use "mkdir \tmp" instead of "mkdir /tmp".
Files:	    src/Make_w16.mak, src/testdir/Make_dos.mak

Patch 6.1.402
Problem:    When evaluating a function name with curly braces, an error
	    is not handled consistently.
Solution:   Accept the result of a curly braces expression when an
	    error was encountered.  Skip evaluating an expression in curly
	    braces when skipping.  (Servatius Brandt)
Files:	    src/eval.c

Patch 6.1.403 (extra)
Problem:    MS-Windows 16 bit: compiler warnings.
Solution:   Add typecasts. (Walter Briscoe)
Files:	    src/ex_cmds2.c, src/gui_w48.c, src/os_mswin.c, src/os_win16.c,
	    src/syntax.c

Patch 6.1.404 (extra)
Problem:    Various small problems.
Solution:   Fix comments.  Various small additions, changes in indent, removal
	    of unused items and fixes.
Files:	    Makefile, README.txt, runtime/menu.vim, runtime/vimrc_example.vim,
	    src/INSTALL, src/INSTALLole.txt, src/Make_bc5.mak,
	    src/Make_cyg.mak, src/Make_ming.mak, src/Makefile,
	    src/config.h.in, src/edit.c, src/eval.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/getchar.c,
	    src/gui.c, src/gui_gtk.c, src/gui_photon.c, src/if_cscope.c,
	    src/if_python.c, src/keymap.h, src/mark.c, src/mbyte.c,
	    src/message.c, src/misc1.c, src/misc2.c, src/normal.c,
	    src/option.c, src/os_os2_cfg.h, src/os_win32.c,
	    src/proto/getchar.pro, src/proto/message.pro,
	    src/proto/regexp.pro, src/screen.c, src/structs.h, src/syntax.c,
