
Patch 8.2.2432
Problem:    Libvterm tests are executed even when libtool doesn't work.
Solution:   Only run libvterm tests if /usr/bin/gcc exists.
Files:      src/Makefile

Patch 8.2.2433
Problem:    Opening cmdline window gives error in BufLeave autocommand.
Solution:   Reset cmdwin_type when triggering the autocommand.
Files:      src/ex_cmds.c, src/testdir/test_cmdline.vim

Patch 8.2.2434
Problem:    Vim9: no error when compiling str2nr() with a number.
Solution:   Add argument type checks. (closes #7759)
Files:      src/evalfunc.c, src/typval.c, src/proto/typval.pro,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.2435
Problem:    setline() gives an error for some types.
Solution:   Allow any type, convert each item to a string.
Files:      runtime/doc/eval.txt, src/evalbuffer.c, src/typval.c,
            src/proto/typval.pro, src/debugger.c, src/vim9execute.c,
            src/testdir/test_bufline.vim, src/testdir/test_vim9_builtin.vim

Patch 8.2.2436
Problem:    Vim9 script test is a bit flaky.
Solution:   Wait longer for exit callback.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.2437
Problem:    Deprecation warnings with default configuration.
Solution:   Add -Wno-deprecated-declarations.
Files:      src/configure.ac, src/auto/configure

Patch 8.2.2438
Problem:    Out of bounds compiler warning.
Solution:   Increase the size of uf_name.
Files:      src/structs.h

Patch 8.2.2439
Problem:    Not easy to figure out what packages to get when installing Vim on
            a new Ubuntu system.
Solution:   Mention explicit commands that are easy to follow.
Files:      src/INSTALL

Patch 8.2.2440
Problem:    Documentation based on patches is outdated.
Solution:   Add changes to documentation in a patch.
Files:      runtime/doc/arabic.txt, runtime/doc/autocmd.txt,
            runtime/doc/change.txt, runtime/doc/channel.txt,
            runtime/doc/cmdline.txt, runtime/doc/debugger.txt,
            runtime/doc/develop.txt, runtime/doc/digraph.txt,
            runtime/doc/editing.txt, runtime/doc/eval.txt,
            runtime/doc/filetype.txt, runtime/doc/ft_sql.txt,
            runtime/doc/gui.txt, runtime/doc/gui_w32.txt,
            runtime/doc/gui_x11.txt, runtime/doc/hangulin.txt,
            runtime/doc/helphelp.txt, runtime/doc/help.txt,
            runtime/doc/if_lua.txt, runtime/doc/if_mzsch.txt,
            runtime/doc/if_tcl.txt, runtime/doc/indent.txt,
            runtime/doc/index.txt, runtime/doc/insert.txt,
            runtime/doc/intro.txt, runtime/doc/map.txt, runtime/doc/mbyte.txt,
            runtime/doc/message.txt, runtime/doc/mlang.txt,
            runtime/doc/motion.txt, runtime/doc/netbeans.txt,
            runtime/doc/options.txt, runtime/doc/os_dos.txt,
            runtime/doc/os_haiku.txt, runtime/doc/os_unix.txt,
            runtime/doc/os_vms.txt, runtime/doc/os_win32.txt,
            runtime/doc/pattern.txt, runtime/doc/pi_getscript.txt,
            runtime/doc/pi_logipat.txt, runtime/doc/pi_netrw.txt,
            runtime/doc/pi_tar.txt, runtime/doc/pi_vimball.txt,
            runtime/doc/pi_zip.txt, runtime/doc/popup.txt,
            runtime/doc/print.txt, runtime/doc/quickfix.txt,
            runtime/doc/quickref.txt, runtime/doc/recover.txt,
            runtime/doc/remote.txt, runtime/doc/repeat.txt,
            runtime/doc/rileft.txt, runtime/doc/sign.txt,
            runtime/doc/spell.txt, runtime/doc/starting.txt,
            runtime/doc/syntax.txt, runtime/doc/tabpage.txt,
            runtime/doc/tagsrch.txt, runtime/doc/terminal.txt,
            runtime/doc/term.txt, runtime/doc/testing.txt,
            runtime/doc/textprop.txt, runtime/doc/tips.txt,
            runtime/doc/todo.txt, runtime/doc/uganda.txt,
            runtime/doc/undo.txt, runtime/doc/usr_02.txt,
            runtime/doc/usr_03.txt, runtime/doc/usr_04.txt,
            runtime/doc/usr_05.txt, runtime/doc/usr_07.txt,
            runtime/doc/usr_08.txt, runtime/doc/usr_10.txt,
            runtime/doc/usr_11.txt, runtime/doc/usr_20.txt,
            runtime/doc/usr_22.txt, runtime/doc/usr_23.txt,
            runtime/doc/usr_24.txt, runtime/doc/usr_27.txt,
            runtime/doc/usr_30.txt, runtime/doc/usr_31.txt,
            runtime/doc/usr_40.txt, runtime/doc/usr_41.txt,
            runtime/doc/usr_42.txt, runtime/doc/usr_44.txt,
            runtime/doc/usr_45.txt, runtime/doc/usr_46.txt,
            runtime/doc/usr_90.txt, runtime/doc/usr_toc.txt,
            runtime/doc/various.txt, runtime/doc/version5.txt,
            runtime/doc/version6.txt, runtime/doc/version7.txt,
            runtime/doc/version8.txt, runtime/doc/vi_diff.txt,
            runtime/doc/vim9.txt, runtime/doc/visual.txt,
            runtime/doc/windows.txt

Patch 8.2.2441
Problem:    Vim9: extend() does not give an error for a type mismatch.
Solution:   Check the type of the second argument. (closes #7760)
Files:      src/list.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.2442
Problem:    Automatic GUI selection does not check for GTK 3.
Solution:   Make SKIP_GTK3 empty for automatic GUI support.  Set SKIP_GTK3 to
            YES when checking for GTK2.
Files:      src/configure.ac, src/auto/configure

Patch 8.2.2443
Problem:    Vim9: no compile time error for wrong str2float argument.
Solution:   Check argument type. (closes #7759)
Files:      src/evalfunc.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.2444
Problem:    Vim9: compile error with combination of operator and list.
Solution:   Generate constants before parsing a list or dict. (closes #7757)
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.2445
Problem:    Vim9: no proper error for lambda missing return type.
Solution:   Check for this error. (closes #7758)
Files:      src/errors.h, src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.2446
Problem:    Setting 'term' empty has different error if compiled with GUI.
Solution:   Insert "else". (closes #7766)
Files:      src/optionstr.c, src/testdir/test_options.vim

Patch 8.2.2447
Problem:    'foldlevel' not applied to folds restored from session.
Solution:   Set 'foldlevel' after creating the folds. (closes #7767)
Files:      src/fold.c, src/testdir/test_mksession.vim

Patch 8.2.2448
Problem:    Compilation error with Ruby 3.0.
Solution:   Adjust #ifdefs and declaration. (Ken Takata, closes #7761)
Files:      src/if_ruby.c

Patch 8.2.2449
Problem:    Vim9: flatten() always changes the list type.
Solution:   Disallow using flatten() and add flattennew().
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/list.c, src/proto/list.pro, src/errors.h, src/vim9compile.c,
            src/testdir/test_flatten.vim, src/testdir/test_vim9_builtin.vim

Patch 8.2.2450
Problem:    MS-Windows: ADS was not preserved if 'backupcopy' is "yes".
Solution:   Copy ADS before truncating the file. (Ken Takata, closes #7762)
Files:      src/bufwrite.c

Patch 8.2.2451
Problem:    MS-Windows: Extended Attributes not preserved.
Solution:   Preserve Extended Attributes when writing a file. (Ken Takata,
            closes #7765)
Files:      src/os_win32.c

Patch 8.2.2452
Problem:    No completion for the 'filetype' option.
Solution:   Add filetype completion. (Martin Tournoij, closes #7747)
Files:      src/option.c, src/optiondefs.h, src/testdir/test_options.vim

Patch 8.2.2453
Problem:    Vim9: a variable name with "->" in the next line doesn't work.
Solution:   Recognize a variable name by itself. (closes #7770)
Files:      src/ex_docmd.c, src/testdir/test_vim9_cmd.vim

Patch 8.2.2454
Problem:    Leading space can not be made visible.
Solution:   Add "lead:" to 'listchars'. (closes #7772)
Files:      runtime/doc/options.txt, src/drawline.c, src/globals.h,
            src/message.c, src/screen.c, src/testdir/test_listchars.vim

Patch 8.2.2455
Problem:    Vim9: key type that can be used for literal dict and indexing is
            inconsistent.
Solution:   Allow using number and bool as key for a literal dict. (#7771)
Files:      runtime/doc/vim9.txt, src/dict.c, src/eval.c, src/vim9compile.c,
            src/testdir/test_vim9_expr.vim, src/testdir/test_vim9_builtin.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.2456
Problem:    Coverity warning for strcpy() into fixed size array.
Solution:   Add a type cast to hopefully silence the bogus warning.
Files:      src/userfunc.c

Patch 8.2.2457
Problem:    Coverity warns for memory leak.
Solution:   Free memory when out of memory.
Files:      src/if_cscope.c

Patch 8.2.2458
Problem:    Coverity warns for :retab using freed memory.
Solution:   Use the updated line pointer when moving text properties.
Files:      src/indent.c

Patch 8.2.2459
Problem:    Coverity reports dead code.
Solution:   Remove the dead code.
Files:      src/eval.c

Patch 8.2.2460
Problem:    Coverity warns for unused value.
Solution:   Do not reset the return value to OK.
Files:      src/vim9compile.c

Patch 8.2.2461
Problem:    Coverity warns for unchecked return value.
Solution:   Add "(void)" to avoid the warning.
Files:      src/vim9execute.c

Patch 8.2.2462
Problem:    Coverity warns for not checking for fseek() error.
Solution:   Give an error message if fseek() fails.
Files:      src/spellfile.c

Patch 8.2.2463
Problem:    Using :arglocal in an autocommand may use freed memory.
            (houyunsong)
Solution:   Check if the arglist is locked.
Files:      src/arglist.c, src/testdir/test_autocmd.vim

Patch 8.2.2464
Problem:    Using freed memory if window closed in autocommand. (houyunsong)
Solution:   Check the window still exists.
Files:      src/ex_cmds.c, src/testdir/test_autocmd.vim

Patch 8.2.2465
Problem:    Using freed memory in :psearch. (houyunsong)
Solution:   Check the current window is still valid.  Fix flaky test.
Files:      src/search.c, src/testdir/test_autocmd.vim

Patch 8.2.2466
Problem:    Max() and min() can give many error messages.
Solution:   Bail out at the first error. (closes #1039, closes #7778)
Files:      src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.2.2467
Problem:    Script generated by :mkview changes alternate file.
Solution:   Only write :balt in the session file. (Harish Rajagopal,
            closes #7779)
Files:      src/session.c, src/testdir/test_mksession.vim

Patch 8.2.2468
Problem:    Not easy to get the full command name from a shortened one.
Solution:   Add fullcommand(). (Martin Tournoij, closes #7777)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/ex_docmd.c, src/proto/evalfunc.pro,
            src/testdir/test_cmdline.vim

Patch 8.2.2469
Problem:    Confusing error if :winsize has a wrong argument.
Solution:   Quote the argument in the error. (closes #2523)
Files:      src/ex_docmd.c, src/testdir/test_excmd.vim

Patch 8.2.2470
Problem:    Popup_getoptions() does not get textprop from other tab.
Solution:   use win_valid_any_tab(). (closes #7786)
Files:      src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.2.2471
Problem:    Popup_setoptions() does not set textprop in other tab.
Solution:   use win_valid_any_tab(). (closes #7788)
Files:      src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.2.2472
Problem:    Crash when using command line window in an autocommand.
            (houyunsong)
Solution:   Save and restore au_new_curbuf.
Files:      src/ex_cmds.c, src/testdir/test_autocmd.vim

Patch 8.2.2473
Problem:    Crash when leaving command line window triggers autocommand.
            (houyunsong)
Solution:   Make sure not to close the current window or buffer.
Files:      src/ex_getln.c, src/testdir/test_autocmd.vim

Patch 8.2.2474
Problem:    Using freed memory when window is closed by autocommand.
            (houyunsong)
Solution:   Check the window pointer is still valid.
Files:      src/quickfix.c, src/testdir/test_autocmd.vim

Patch 8.2.2475
Problem:    Autocommand tests hangs on MS-Windows.
Solution:   Skip one test.
Files:      src/testdir/test_autocmd.vim

Patch 8.2.2476
Problem:    Using freed memory when using an autocommand to split a window
            while a buffer is being closed.
Solution:   Disallow splitting when the buffer has b_locked_split set.
Files:      src/buffer.c, src/window.c, src/errors.h, src/structs.h,
            src/popupwin.c, src/testdir/test_autocmd.vim

Patch 8.2.2477
Problem:    Autocommand tests hang on MS-Windows.
Solution:   Skip a couple of tests.  Fix file name.
Files:      src/testdir/test_autocmd.vim

Patch 8.2.2478
Problem:    MS-Windows: backup files for plugins are loaded.
Solution:   Do not use the alternate file name for files ending in "~".
Files:      src/filepath.c

Patch 8.2.2479
Problem:    set/getbufline test fails without the job feature.
Solution:   Check whether the job feature is supported. (Dominique Pellé,
            closes #7790)
Files:      src/testdir/test_bufline.vim, src/testdir/test_vim9_builtin.vim

Patch 8.2.2480
Problem:    Vim9: some errors for white space do not show context.
Solution:   Include the text at the error.
Files:      src/errors.h, src/dict.c, src/list.c, src/userfunc.c,
            src/vim9compile.c, src/vim9script.c, src/vim9type.c

Patch 8.2.2481
Problem:    Vim9: confusing error when variable arguments have a default
            value.
Solution:   Give a specific error message. (closes #7793)
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.2482
Problem:    Build error.
Solution:   Add new error message.
Files:      src/errors.h

Patch 8.2.2483
Problem:    Vim9: type error for malformed expression.
Solution:   Check for end of command before checking type. (closes #7795)
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.2484
Problem:    Vim9: Cannot use a comment starting with #{ after an expression.
Solution:   Remove the check for "{" since #{ dictionaries are not supported.
Files:      src/ex_docmd.c, src/testdir/test_vim9_script.vim

Patch 8.2.2485
Problem:    When sourcing a script again the script version isn't reset.
Solution:   Set sn_version to one when sourcing a script again. Clear
            sn_save_cpo properly. (closes #7608)
Files:      src/scriptfile.c, src/testdir/test_vim9_script.vim

Patch 8.2.2486
Problem:    Vim9: some errors for white space do not show context.
Solution:   Include the text at the error.
Files:      src/errors.h, src/dict.c, src/list.c, src/userfunc.c,
            src/vim9compile.c, src/vim9type.c

Patch 8.2.2487
Problem:    Terminal shows garbage after double-wide character with a
            combining character. (Kyoichiro Yamada)
Solution:   Libvterm: do not add the width of the combining character to the
            glyph width. (closes #7801)
Files:      src/libvterm/src/state.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_combining.dump

Patch 8.2.2488
Problem:    json_encode() gives generic argument error.
Solution:   Mention the type that can't be encoded. (issue #7802)
Files:      src/json.c, src/errors.h, src/testdir/test_json.vim

Patch 8.2.2489
Problem:    current buffer is wrong after deletebufline() fails to delete a
            line in another buffer.
Solution:   Restore the current buffer.
Files:      src/evalbuffer.c, src/testdir/test_bufline.vim

Patch 8.2.2490
Problem:    'wrap' option is always reset when starting diff mode.
Solution:   Add the "followwrap" item in 'diffopt'. (Rick Howe, closes #7797)
Files:      runtime/doc/diff.txt, runtime/doc/options.txt, src/diff.c,
            src/testdir/test_diffmode.vim

Patch 8.2.2491
Problem:    Popup window for text property may show in first screen line.
Solution:   If the text position is invisible do not show the popup window.
            (closes #7807)
Files:      src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popup_prop_not_visible_01.dump,
            src/testdir/dumps/Test_popup_prop_not_visible_02.dump,
            src/testdir/dumps/Test_popup_prop_not_visible_03.dump

Patch 8.2.2492
Problem:    Command line buffer name cannot be translated.
Solution:   Add _(). (Gabriel Dupras, closes #7812)
Files:      src/ex_getln.c

Patch 8.2.2493
Problem:    Text property for text left of window shows up.
Solution:   Check if the text property ends before the current column.
            (closes #7806)
Files:      src/drawline.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_nowrap_01.dump,
            src/testdir/dumps/Test_textprop_nowrap_02.dump

Patch 8.2.2494
Problem:    ":rviminfo!" clears most of oldfiles.
Solution:   Add VIF_ONLY_CURBUF to read_viminfo(). (closes #1781)
Files:      src/viminfo.c, src/vim.h

Patch 8.2.2495
Problem:    Text jumps up and down when moving the cursor in a small window
            with wrapping text and 'scrolloff' set.
Solution:   Adjust the computation of w_skipcol. (partly by Ghjuvan Lacambre,
            closes #7813)
Files:      src/move.c, src/testdir/test_breakindent.vim

Patch 8.2.2496 (after 8.2.2495)
Problem:    Insufficient testing for text jumping fix.
Solution:   Add another test case.
Files:      src/testdir/test_breakindent.vim

Patch 8.2.2497
Problem:    No error when using more than one character for a register name.
Solution:   In Vim9 script check for a single character string. (closes #7814)
            Fix that VAR_BOOL and VAR_SPECIAL are not considered equal.
Files:      src/errors.h, src/evalfunc.c, src/typval.c,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.2498
Problem:    No test for what 8.2.2494 fixes.
Solution:   Add a simple change to test the fix. (closes #7818)
Files:      src/testdir/test_viminfo.vim

Patch 8.2.2499
Problem:    "vim -g --version" does not redirect output.
Solution:   Reset gui.starting when showing version info. (closes #7815)
Files:      src/main.c, src/testdir/test_version.vim

Patch 8.2.2500 (after 8.2.2499)
Problem:    Build fails without the GUI feature.
Solution:   Add #ifdef.
Files:      src/main.c

Patch 8.2.2501
Problem:    Not always clear where an error is reported.
Solution:   Add the where_T structure and pass it around. (closes #7796)
Files:      src/structs.h, src/vim9type.c, src/proto/vim9type.pro,
            src/errors.h, src/evalvars.c, src/proto/evalvars.pro, src/eval.c,
            src/proto/eval.pro, src/vim9execute.c, src/vim9script.c,
            src/proto/vim9script.pro, src/dict.c, src/list.c,
            src/vim9compile.c, src/testdir/test_vim9_assign.vim

Patch 8.2.2502
Problem:    A few github actions are failing.
Solution:   Install setuptools-rust. (closes #7823)
Files:      .github/workflows/ci.yml

Patch 8.2.2503
Problem:    Vim9: a caught error may leave something on the stack.
Solution:   Drop items from the stack if needed. (closes #7826)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.2504
Problem:    Vim9: crash when using an argument from a closure.
Solution:   Check if gen_load_outer is NULL. (closes #7821)
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.2505
Problem:    Vim9: crash after defining function with invalid return type.
Solution:   Clear function growarrays.  Fix memory leak.
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.2506
Problem:    Vim9: :continue does not work correctly in a :try block
Solution:   Add the TRYCLEANUP instruction. (closes #7827)
Files:      src/vim9compile.c, src/vim9execute.c, src/vim9.h,
            src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.2507
Problem:    Github build may fail if Ubuntu 20.04 is used.  Installing rust is
            not needed.
Solution:   Specify ubuntu-18.04 instead of latest. Update "pip" instead of
            installing rust. (Ozaki Kiichi, closes #7820)
Files:      .github/workflows/ci.yml

Patch 8.2.2508
Problem:    Cannot change the character displayed in non existing lines.
Solution:   Add the "eob" item to 'fillchars'. (closes #7832, closes #3820)
Files:      runtime/doc/options.txt, runtime/doc/todo.txt,
            runtime/doc/windows.txt, src/drawscreen.c, src/globals.h,
            src/optiondefs.h, src/screen.c, src/testdir/test_display.vim

Patch 8.2.2509
Problem:    Tests fail on s390 build.
Solution:   Initialize trycmd_T.
Files:      src/vim9execute.c

Patch 8.2.2510
Problem:    Internal error when popup with mask is zero height or width.
Solution:   Bail out if width or height is zero. (closes #7831)
Files:      src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.2.2511
Problem:    Vim9: cannot use Vim9 script syntax in some places.
Solution:   Add the :vim9cmd command modifier. Incompatible: Makes ":vim9"
            mean ":vim9cmd" instead of ":vim9script".
Files:      runtime/doc/vim9.txt, runtime/doc/repeat.txt, src/ex_docmd.c,
            src/ex_cmds.h, src/structs.h, src/ex_cmdidxs.h, src/errors.h,
            src/testdir/test_vim9_cmd.vim, src/testdir/test_cmdline.vim,
            src/testdir/dumps/Test_wildmenu_1.dump,
            src/testdir/dumps/Test_wildmenu_2.dump,
            src/testdir/dumps/Test_wildmenu_3.dump,
            src/testdir/dumps/Test_wildmenu_4.dump,
            src/testdir/test_quickfix.vim

Patch 8.2.2512
Problem:    Vim9: compiling error test sometimes fails.
Solution:   use WaitForAssert() instead of sleeping for a bit. (Dominique
            Pellé, closes #7837)
Files:      src/testdir/term_util.vim, src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.2513 (after 8.2.2511)
Problem:    Vim9: missing part of :vim9cmd change.
Solution:   Use command modifier in in_vim9script().
Files:      src/vim9script.c

Patch 8.2.2514 (after 8.2.2511)
Problem:    Vim9: build error in tiny version.
Solution:   Add #ifdef.
Files:      src/ex_docmd.c

Patch 8.2.2515
Problem:    Memory access error when truncating an empty message.
Solution:   Check for an empty string. (Dominique Pellé, closes #7841)
Files:      src/message.c, src/message_test.c

Patch 8.2.2516
Problem:    Test failure on s390. (analyses by James McCoy)
Solution:   Only set the try_finally label when not skipping.
Files:      src/vim9compile.c

Patch 8.2.2517
Problem:    Vim9: fix for s390 not tested on other systems.
Solution:   Add a test.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.2518
Problem:    'listchars' should be window-local.
Solution:   Make 'listchars' global-local. (Yegappan Lakshmanan, Marco Hinz,
            closes #5206, closes #7850)
Files:      runtime/doc/options.txt, src/buffer.c, src/charset.c,
            src/drawline.c, src/drawscreen.c, src/evalfunc.c, src/globals.h,
            src/indent.c, src/message.c, src/misc1.c, src/option.c,
            src/option.h, src/optiondefs.h, src/optionstr.c,
            src/proto/screen.pro, src/screen.c, src/structs.h,
            src/testdir/test_listchars.vim, src/testdir/test_listlbr.vim

Patch 8.2.2519
Problem:    Vim9: no reason to keep strange Vi behavior.
Solution:   ":3" and ":3|" both go to line 3. ":|" does not print the line.
            (closes #7840)
Files:      src/ex_docmd.c, src/testdir/test_vim9_script.vim

Patch 8.2.2520
Problem:    Missing tests for 'listchars'.
Solution:   Add a few more checks. (Yegappan Lakshmanan, closes #7854)
Files:      src/testdir/test_listchars.vim

Patch 8.2.2521
Problem:    Some compilers can't handle pointer initialization. (John
            Marriott)
Solution:   Use a local struct and assign it afterwards.
Files:      src/screen.c

Patch 8.2.2522
Problem:    Beancount filetype not recognized.
Solution:   Add a detection rule. (Brian Ryall, closes #7859)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.2523
Problem:    Svelte filetype not recognized.
Solution:   Add a detection rule. (Brian Ryall, closes #7858)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.2524
Problem:    Cannot change the characters displayed in the foldcolumn.
Solution:   Add fields to 'fillchars'. (Yegappan Lakshmanan, Matthieu Coudron,
            closes #7860)
Files:      runtime/doc/options.txt, src/globals.h, src/mouse.c, src/screen.c,
            src/testdir/test_display.vim

Patch 8.2.2525
Problem:    Vim9: only local variables checked for a name.
Solution:   Also check arguments and script variables. (closes #7838)
Files:      src/vim9compile.c, src/ex_docmd.c, src/proto/ex_docmd.pro,
            src/testdir/test_vim9_cmd.vim

Patch 8.2.2526 (after 8.2.2525)
Problem:    Build failure.
Solution:   Change lookup_scriptvar() arguments.
Files:      src/evalvars.c, src/proto/evalvars.pro

Patch 8.2.2527
Problem:    Vim9: lambda return type is not determined at script level.
Solution:   Compile the lambda to get the return type. (closes #7843)
Files:      src/eval.c, src/vim.h, src/vim9.h,
            src/testdir/test_vim9_assign.vim

Patch 8.2.2528
Problem:    Vim9: crash when compiling lambda fails.
Solution:   Bail out after compilation fails. (closes #7862)
Files:      src/eval.c, src/testdir/test_vim9_assign.vim

Patch 8.2.2529
Problem:    Vim9: Not possible to use legacy and Vim9 script in one file.
Solution:   Vim9: allow for "if false" before :vim9script. (closes #7851)
Files:      runtime/doc/vim9.txt, src/ex_docmd.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.2530
Problem:    Vim9: not enough testing for profiling.
Solution:   Add a test with nested functions and a lambda.  Fix profiling
            for calling a compiled function.
Files:      src/profiler.c, src/proto/profiler.pro, src/userfunc.c,
            src/vim9execute.c, src/testdir/test_profile.vim

Patch 8.2.2531
Problem:    Vim9: the :k command is obscure.
Solution:   Disallow using :k, can use :mark instead. (closes #7874)
Files:      runtime/doc/vim9.txt, src/ex_docmd.c, src/vim9script.c,
            src/vim9compile.c, src/ex_cmds.h, src/testdir/test_vim9_script.vim

Patch 8.2.2532
Problem:    Vim9: confusing error if :k is used with a range.
Solution:   Give an error about the range. (issue #7874)
Files:      src/vim9script.c, src/vim9compile.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.2533
Problem:    Vim9: cannot use a range with :unlet.
Solution:   Implement ISN_UNLETRANGE.
Files:      src/errors.h, src/eval.c, src/evalvars.c, src/list.c,
            src/proto/evalvars.pro, src/proto/list.pro, src/vim9.h,
            src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_assign.vim

Patch 8.2.2534
Problem:    Missing test coverage.
Solution:   Improve test coverage for completion with different encodings,
            mapset(), and term function failures. (Dominique Pellé,
            closes #7877)
Files:      src/testdir/test_edit.vim, src/testdir/test_maparg.vim,
            src/testdir/test_terminal3.vim

Patch 8.2.2535
Problem:    MS-Windows: cannot run all vim9 tests.
Solution:   Make test_vim9 target work.
Files:      src/Make_mvc.mak

Patch 8.2.2536
Problem:    Coverity complains about unchecked return value.
Solution:   Add (void).
Files:      src/userfunc.c

Patch 8.2.2537
Problem:    Vim9: crash when map() fails.
Solution:   Clear typval before using it. (closes #7884)
Files:      src/list.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.2538
Problem:    Crash when using Python list iterator.
Solution:   Increment the list reference count. (closes #7886)
Files:      src/if_py_both.h, src/testdir/test_python3.vim

Patch 8.2.2539
Problem:    Vim9: return from finally block causes a hang.
Solution:   Store both the finally and endtry indexes. (closes #7885)
Files:      src/vim9execute.c, src/vim9compile.c, src/vim9.h,
            src/testdir/test_vim9_script.vim,

Patch 8.2.2540
Problem:    Vim9: no error for using script var name for argument.
Solution:   Check for this error. (closes #7868)
Files:      src/userfunc.c, src/vim9compile.c, src/proto/vim9compile.pro,
            src/testdir/test_vim9_func.vim

Patch 8.2.2541
Problem:    Popup_create() does not allow boolean for "cursorline".
Solution:   Use dict_get_bool(). (issue #7869)
Files:      src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.2.2542
Problem:    Highlight of char beyond line end is not correct. (Chuan Wei Foo)
Solution:   Fix counting NUL as one cell.  Draw one more character if the EOL
            is part of the match. (closes #7883)
Files:      src/match.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_hlsearch_1.dump,
            src/testdir/dumps/Test_hlsearch_2.dump

Patch 8.2.2543
Problem:    Vim9: a return inside try/catch does not restore exception state
            properly.
Solution:   When there is no ":finally" jump to ":endtry". (closes #7882)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.2544
Problem:    Vim9: error for argument when checking for lambda.
Solution:   Respect the skip flag. (closes #7887)
Files:      src/userfunc.c, src/testdir/test_vim9_expr.vim

Patch 8.2.2545
Problem:    Errors and crash when terminal window is zero height. (Leonid V.
            Fedorenchik)
Solution:   Do not resize when width or height is zero. (closes #7890)
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.2.2546
Problem:    Typo in mouse key name.
Solution:   Fix the typo. (issue #4725)
Files:      src/misc2.c

Patch 8.2.2547
Problem:    "%" command not accurate for big files.
Solution:   Make it more accurate for files up to 21M lines. (Dominique Pellé,
            closes #7889)
Files:      src/normal.c

Patch 8.2.2548
Problem:    May get stuck in the cmdline window using :normal.
Solution:   Have nv_esc() return K_IGNORE.
Files:      src/normal.c

Patch 8.2.2549
Problem:    Crash after using "g:" in a for loop.
Solution:   Increment the reference count. (closes #7892)
Files:      src/vim9execute.c, src/testdir/test_vim9_expr.vim

Patch 8.2.2550
Problem:    Signal stack size is wrong with latest glibc 2.34.
Solution:   Use sysconf(_SC_SIGSTKSZ) if available. (Zdenek Dohnal, closes
            #7895)
Files:      src/config.h.in, src/configure.ac, src/os_unix.c,
            src/auto/configure

Patch 8.2.2551
Problem:    MS-Windows: colors test file is not installed.
Solution:   Also copy runtime/colors/tools. (Ken Takata, closes #7902)
Files:      nsis/gvim.nsi

Patch 8.2.2552
Problem:    Vim9: no reason to consider "{{{{{{{{" a command.
Solution:   Just use "{". (issue #7904)
Files:      src/ex_cmds.h

Patch 8.2.2553
Problem:    Vim9: Cannot put "|" after "{".
Solution:   Add the EX_TRLBAR flag. (issue #7904)
Files:      src/ex_cmds.h, src/ex_eval.c

Patch 8.2.2554
Problem:    Vim9: exporting a final is not tested.
Solution:   Add a test.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.2555
Problem:    Vim9: missing test for 8.2.2553.
Solution:   Add a simple test.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.2556
Problem:    Vim9: :import with "as" not fully supported.
Solution:   Implement "as" for more cases.
Files:      src/vim9script.c, src/testdir/test_vim9_script.vim

Patch 8.2.2557
Problem:    Compiler warning for shadowed variable.
Solution:   Declare "p" only once.
Files:      src/vim9script.c

Patch 8.2.2558
Problem:    No error if a lambda argument shadows a variable.
Solution:   Check that the argument name shadows a local, argument or script
            variable. (closes #7898)
Files:      src/vim9compile.c, src/proto/vim9compile.pro, src/userfunc.c,
            src/vim9script.c, src/errors.h, src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_expr.vim, src/testdir/test_vim9_script.vim

Patch 8.2.2559
Problem:    MS-Windows: guifont test fails on Windows XP.
Solution:   Check windowsversion().
Files:      src/testdir/test_gui.vim

Patch 8.2.2560
Problem:    Setting 'winminheigt' does not take tabline into account.
Solution:   Subtract the tabline from the available height. (closes #7899)
Files:      src/window.c, src/testdir/test_options.vim

Patch 8.2.2561
Problem:    Not all textprop code is covered by tests.
Solution:   Add a few more test cases. (Dominique Pellé, closes #7908)
Files:      src/testdir/test_textprop.vim

Patch 8.2.2562
Problem:    GUI: star register changed when 'clipboard' is "unnamedplus". (Ingo
            Karkat)
Solution:   Do not change the star register when 'clipboard' contains
            "unnamedplus" and not "unnamed". (closes #1516)
Files:      src/register.c

Patch 8.2.2563
Problem:    Cannot use multibyte characters for folding in 'fillchars'.
Solution:   Port pull request 11568 to Vim. (Yegappan Lakshmanan,
            closes #7924)
Files:      src/drawline.c, src/drawscreen.c, src/macros.h,
            src/proto/screen.pro, src/screen.c, src/testdir/test_fold.vim,
            src/testdir/test_profile.vim

Patch 8.2.2564
Problem:    Focus events end Insert mode if 'esckeys' is not set.
Solution:   Do not enable focus events when 'esckeys' is off. (closes #7926)
Files:      src/term.c

Patch 8.2.2565
Problem:    Vim9: "..=" not always recognized.
Solution:   Do not consider "..=" to be string concatenation. (closes #7905)
Files:      src/eval.c, src/testdir/test_vim9_assign.vim

Patch 8.2.2566
Problem:    Vim9: Function name is not recognized.
Solution:   Change lookup_scriptvar() to also find function names.
            (closes #7770)
Files:      src/vim9script.c, src/evalvars.c, src/proto/evalvars.pro,
            src/ex_docmd.c, src/testdir/test_vim9_cmd.vim

Patch 8.2.2567
Problem:    Vim9: no error if variable is defined for existing function.
Solution:   Check if name isn't already in use. (closes #7897)
Files:      src/evalvars.c, src/testdir/test_vim9_script.vim

Patch 8.2.2568
Problem:    Second time a preview popup is opened highlight is not set.
            (Gabriel Dupras)
Solution:   Apply 'previewpopup' after getting the file. (closes #7928)
Files:      src/tag.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump

Patch 8.2.2569
Problem:    'fillchars' "stl" and "stlnc" items must be single byte.
Solution:   Accept multi-byte characters. (Christian Wellenbrock, Yegappan
            Lakshmanan, closes #7927)
Files:      runtime/doc/options.txt, src/buffer.c, src/macros.h, src/screen.c,
            src/testdir/test_fold.vim, src/testdir/test_statusline.vim

Patch 8.2.2570
Problem:    Tests fail when run as root.
Solution:   Add a comment mentioning the expected failure. (issue #7919)
Files:      src/testdir/test_edit.vim, src/testdir/test_excmd.vim,
            src/testdir/test_help.vim, src/testdir/test_writefile.vim

Patch 8.2.2571
Problem:    Test may leave file behind.
Solution:   Delete the temporary file.  Don't profile in the running Vim
            instance.
Files:      src/testdir/test_quickfix.vim, src/testdir/test_profile.vim

Patch 8.2.2572
Problem:    Vim9: crash when getting the types for a legacy function.
Solution:   Initialize the type list growarray. (closes #7929)
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.2573
Problem:    Vim9: using invalid pointer for error message.
Solution:   Use the right pointer. (closes #7921)
Files:      src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.2574
Problem:    Vim9: crash when calling partial with wrong function.
Solution:   Check argument types of called function. (closes #7912)
Files:      src/vim9execute.c, src/testdir/test_vim9_func.vim

Patch 8.2.2575
Problem:    Vim9: a function name with "->" in the next line doesn't work.
Solution:   Recognize a function name by itself. (closes #7770)
Files:      src/vim9compile.c, src/testdir/test_vim9_cmd.vim

Patch 8.2.2576
Problem:    Vim9: defining a :func function checks for white space after a
            comma in the arguments.
Solution:   Only check for white space in a :def function. (closes #7930)
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.2577
Problem:    Compiler warning for type conversion.
Solution:   Add a typecast. (Mike Williams)
Files:      src/drawline.c

Patch 8.2.2578
Problem:    Lua cannot handle a passed in lambda.
Solution:   Handle VAR_PARTIAL. (Prabir Shrestha, closes #7937, closes #7936)
Files:      src/if_lua.c, src/testdir/test_lua.vim

Patch 8.2.2579
Problem:    Vim9: crash in garbagecollect after for loop.
Solution:   Do not set a reference in script item when the name was cleared.
            (closes #7935)
Files:      src/evalvars.c

Patch 8.2.2580
Problem:    Vim9: checking vararg type is wrong when function is auto-loaded.
Solution:   Use the member type. (closes #7933)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.2581
Problem:    Vim9: sourcing Vim9 script triggers a redraw.
Solution:   Do not let setting/restoring 'cpoptions' cause a redraw.
            (closes #7920)
Files:      src/vim.h, src/option.c, src/optionstr.c, src/scriptfile.c,
            src/vim9script.c, src/testdir/test_vim9_script.vim,
            src/testdir/dumps/Test_vim9_no_redraw.dump

Patch 8.2.2582 (after 8.2.2581)
Problem:    Vim9: screendump test fails on MS-Windows.
Solution:   Use :function instead of :def.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.2583
Problem:    Vim9: cannot compare result of getenv() with null.
Solution:   Make the return type of getenv() "any". (closes #7943)
Files:      src/evalfunc.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.2584
Problem:    Vim9: type error for assigning the result of list concatenation to
            a list.
Solution:   Do not consider concatenation result in a constant. (closes #7942)
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.2585
Problem:    Vim9: illegal memory access.
Solution:   Check byte right after "null", not one more.
Files:      src/vim9compile.c

Patch 8.2.2586
Problem:    Process id may be invalid.
Solution:   Use sysinfo.uptime to check for recent reboot. (suggested by Hugo
            van der Sanden, closes #7947)
Files:      src/configure.ac, src/auto/configure, src/config.h.in,
            src/memline.c, src/testing.c, src/globals.h,
            src/testdir/test_recover.vim

Patch 8.2.2587 (after 8.2.2586)
Problem:    Recover test fails on FreeBSD.
Solution:   Check for Linux.
Files:      src/testdir/check.vim, src/testdir/test_recover.vim

Patch 8.2.2588 (after 8.2.2586)
Problem:    Build failure with tiny features.
Solution:   Add #ifdef.  Run recover test separately.
Files:      src/memline.c, src/testdir/Make_all.mak, src/testdir/test_alot.vim

Patch 8.2.2589 (after 8.2.2586)
Problem:    Recover test hangs in the GUI.
Solution:   Add g:skipped_reason to skip a _nocatch_ test.
Files:      src/testdir/runtest.vim, src/testdir/test_recover.vim

Patch 8.2.2590
Problem:    Vim9: default argument value may cause internal error.
Solution:   Hide later function arguments when compiling the expression.
            (closes #7948)
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.2591
Problem:    Poke files are not recognized.
Solution:   Add a filetype entry. (Matt Ihlenfield)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.2592
Problem:    Code coverage could be improved.
Solution:   Add a few more tests. (Dominique Pellé, closes #7957)
Files:      src/testdir/test_fileformat.vim, src/testdir/test_normal.vim,
            src/testdir/test_sleep.vim, src/testdir/test_textformat.vim,
            src/testdir/test_viminfo.vim

Patch 8.2.2593
Problem:    List of distributed files is incomplete.
Solution:   Add a file and rename another.
Files:      Filelist

Patch 8.2.2594
Problem:    Alternate buffer added to session file even when it's hidden.
Solution:   Check the 'buflisted' option. (closes #7951)
Files:      src/session.c, src/testdir/test_mksession.vim

Patch 8.2.2595
Problem:    Setting 'winminheight' may cause 'lines' to change.
Solution:   Also take minimal height of other tabpages into account. (#7899)
Files:      src/window.c, src/testdir/test_options.vim

Patch 8.2.2596
Problem:    :doautocmd may confuse scripts listening to WinEnter.
Solution:   Do the current buffer last. (closes #7958)
Files:      src/autocmd.c, src/testdir/test_autocmd.vim

