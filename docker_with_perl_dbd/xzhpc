
Patch 8.1.1823
Problem:    Command line history code is spread out.
Solution:   Put the code in a new file. (Yegappan Lakshmanan, closes #4779)
            Also graduate the +cmdline_hist feature.
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdhist.c, src/ex_getln.c, src/proto.h, src/proto/cmdhist.pro,
            src/proto/ex_getln.pro, src/version.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_docmd.c, src/misc2.c, src/normal.c,
            src/ops.c, src/option.c, src/search.c, src/tag.c, src/usercmd.c,
            src/viminfo.c, src/feature.h, src/globals.h

Patch 8.1.1824
Problem:    Crash when correctly spelled word is very long. (Ben Kraft)
Solution:   Check word length before copying. (closes #4778)
Files:	    src/spell.c, src/testdir/test_spell.vim

Patch 8.1.1825
Problem:    Allocating more memory than needed for extended structs.
Solution:   Use offsetof() instead of sizeof(). (Dominique Pelle,
            closes #4785)
Files:	    src/dict.c

Patch 8.1.1826
Problem:    Tests use hand coded feature and option checks.
Solution:   Use the commands from check.vim in more tests.
Files:	    src/testdir/check.vim, src/testdir/shared.vim,
            src/testdir/test_autochdir.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_balloon.vim, src/testdir/test_breakindent.vim,
            src/testdir/test_bufline.vim, src/testdir/test_cdo.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_conceal.vim, src/testdir/test_cscope.vim,
            src/testdir/test_debugger.vim, src/testdir/test_filechanged.vim,
            src/testdir/test_fold.vim, src/testdir/test_functions.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim,
            src/testdir/test_highlight.vim, src/testdir/test_mapping.vim,
            src/testdir/test_match.vim, src/testdir/test_memory_usage.vim,
            src/testdir/test_options.vim, src/testdir/test_paste.vim,
            src/testdir/test_popup.vim, src/testdir/test_search.vim,
            src/testdir/test_signals.vim, src/testdir/test_startup.vim,
            src/testdir/test_syntax.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_terminal.vim, src/testdir/test_timers.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1827
Problem:    Allocating more memory than needed for extended structs.
Solution:   Use offsetof() instead of sizeof(). (Dominique Pelle,
            closes #4786)
Files:	    src/getchar.c, src/regexp.c, src/sign.c, src/structs.h,
            src/syntax.c, src/textprop.c, src/userfunc.c

Patch 8.1.1828
Problem:    Not strict enough checking syntax of method invocation.
Solution:   Check there is no white space inside ->method(.
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_method.vim

Patch 8.1.1829
Problem:    Difference in screenshots.
Solution:   Update screenshots.  Change checks in a few more tests.
            (closes #4789)
Files:	    src/testdir/test_balloon_gui.vim,
            src/testdir/test_shortpathname.vim,
            src/testdir/test_windows_home.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump

Patch 8.1.1830
Problem:    Travis does not report error when tests fail.
Solution:   Explicitly do "exit 1".
Files:	    .travis.yml

Patch 8.1.1831
Problem:    Confusing skipped message.
Solution:   Drop "run" from "run start the GUI".
Files:	    src/testdir/check.vim

Patch 8.1.1832
Problem:    Win_execute() does not work in other tab. (Rick Howe)
Solution:   Take care of the tab. (closes #4792)
Files:	    src/testdir/test_execute_func.vim, src/evalfunc.c, src/window.c,
            src/proto/window.pro

Patch 8.1.1833
Problem:    Allocating a bit too much when spellbadword() does not find a bad
            word.
Solution:   Reset "len" when going to the next word. (Daniel Hahler,
            closes #4788)
Files:	    src/evalfunc.c

Patch 8.1.1834
Problem:    Cannot use a lambda as a method.
Solution:   Implement ->{lambda}(). (closes #4768)
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_method.vim

Patch 8.1.1835
Problem:    Cannot use printf() as a method.
Solution:   Pass the base as the second argument to printf().
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_method.vim

Patch 8.1.1836
Problem:    Inaccurate memory estimate for Amiga-like OS.
Solution:   Adjust #ifdef for AvailMem(). (Ola SÃ¶der, closes #4797)
Files:	    src/os_amiga.c

Patch 8.1.1837
Problem:    Popup test fails if clipboard is supported but not working.
Solution:   Add the "clipboard_working" feature. Also use Check commands
            instead of "if" and "throw".  And remove stray ch_logfile().
Files:	    src/testdir/test_popupwin.vim, src/evalfunc.c,
            runtime/doc/eval.txt

Patch 8.1.1838
Problem:    There is :spellwrong and :spellgood but not :spellrare.
Solution:   Add :spellrare. (Martin Tournoij, closes #4291)
Files:	    runtime/doc/spell.txt, src/ex_cmdidxs.h, src/ex_cmds.h,
            src/normal.c, src/proto/spellfile.pro, src/spellfile.c,
            src/spell.h, src/testdir/Make_all.mak,
            src/testdir/test_normal.vim, src/testdir/test_spellfile.vim

Patch 8.1.1839
Problem:    Insufficient info when test fails because of screen size.
Solution:   Report the detected screen size.
Files:	    src/testdir/runtest.vim

Patch 8.1.1840
Problem:    Testing: WorkingClipboard() is not accurate.
Solution:   Check feature clipboard_working instead.
Files:	    src/testdir/shared.vim, src/testdir/test_paste.vim,
            src/testdir/test_quotestar.vim, src/testdir/test_termcodes.vim

Patch 8.1.1841
Problem:    No test for Ex shift commands.
Solution:   Add a test. (Dominique Pelle, closes #4801)
Files:	    src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_shift.vim

Patch 8.1.1842
Problem:    Test listed as flaky should no longer be flaky.
Solution:   Remove Test_popup_and_window_resize from the list of flaky tests.
            (Daniel Hahler, close #4807)
Files:	    src/testdir/runtest.vim

Patch 8.1.1843
Problem:    Might be freeing memory that was not allocated.
Solution:   Have next_fenc() set the fenc_alloced flag. (closes #4804)
Files:	    src/fileio.c

Patch 8.1.1844
Problem:    Buffer no longer unloaded when adding text properties to it.
Solution:   Do not create the memfile. (closes #4808)
Files:	    runtime/doc/textprop.txt, src/testdir/test_textprop.vim,
            src/textprop.c

Patch 8.1.1845
Problem:    May use NULL pointer when running out of memory.
Solution:   Do not clear popup buffers when NULL. (closes #4802)
Files:	    src/screen.c

Patch 8.1.1846
Problem:    Inconsistently using GetVimCommand() and v:progpath. (Daniel
            Hahler)
Solution:   Use GetVimCommand(). (closes #4806)
Files:	    src/testdir/test_autocmd.vim, src/testdir/test_gui.vim,
            src/testdir/test_normal.vim, src/testdir/test_profile.vim,
            src/testdir/test_suspend.vim, src/testdir/test_system.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1847
Problem:    Suspend test is failing.
Solution:   Do not use GetVimCommandClean().
Files:	    src/testdir/test_suspend.vim

Patch 8.1.1848
Problem:    'langmap' is not used for CTRL-W command in terminal.
Solution:   Push the command in the typeahead buffer instead of the stuff
            buffer. (closes #4814)
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.1849
problem:    Some insert complete functions in the wrong file.
Solution:   Move complete functions to insexpand.c. (Yegappan Lakshmanan,
            closes #4815)
Files:	    src/evalfunc.c, src/insexpand.c, src/proto/insexpand.pro

Patch 8.1.1850
Problem:    Focus may remain in popup window.
Solution:   Change focus if needed.
Files:	    src/popupmnu.c

Patch 8.1.1851
Problem:    Crash when sound_playfile() callback plays sound.
Solution:   Invoke callback later from event loop.
Files:	    src/testdir/test_sound.vim, src/ui.c, src/sound.c,
            src/proto/sound.pro, src/feature.h, src/os_unix.c, src/ex_docmd.c,
            src/misc2.c

Patch 8.1.1852
Problem:    Timers test is flaky.
Solution:   Accept a larger count.  Add test to list of flaky tests.
Files:	    src/testdir/test_timers.vim, src/testdir/runtest.vim

Patch 8.1.1853
Problem:    Timers test is still flaky.
Solution:   Compute the time to sleep more accurately.
Files:	    src/ex_docmd.c

Patch 8.1.1854
Problem:    Now another timer test is flaky.
Solution:   Add test to list of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.1855
Problem:    Another failing timer test.
Solution:   Assert that timers are finished by the end of the test.  Rename
            test functions to make them easier to find.
Files:	    src/testdir/test_timers.vim, src/testdir/runtest.vim

Patch 8.1.1856
Problem:    popup preview test fails sometimes. (Christian Brabandt)
Solution:   Clear the command line.
Files:	    src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_6.dump

Patch 8.1.1857
Problem:    Cannot use modifier with multibyte character.
Solution:   Allow using a multibyte character, although it doesn't work
            everywhere.
Files:	    src/misc2.c, src/testdir/test_mapping.vim

Patch 8.1.1858
Problem:    Test for multibyte mapping fails on some systems.
Solution:   Test in another way.
Files:	    src/testdir/test_mapping.vim

Patch 8.1.1859
Problem:    Timer test sometimes fails on Mac.
Solution:   Show more info when it fails.
Files:	    src/testdir/test_timers.vim

Patch 8.1.1860
Problem:    Map timeout test is flaky.
Solution:   Add test to list of flaky tests.  Increase timeout.
Files:	    src/testdir/runtest.vim, src/testdir/test_mapping.vim

Patch 8.1.1861
Problem:    Only some assert functions can be used as a method.
Solution:   Allow using most assert functions as a method.
Files:	    runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_assert.vim

Patch 8.1.1862
Problem:    Coverity warns for not using return value.
Solution:   Add "(void)" to avoid the warning.
Files:	    src/normal.c

Patch 8.1.1863
Problem:    Confusing error when using a builtin function as method while it
            does not support that.
Solution:   Add a specific error message.
Files:	    src/vim.h, src/evalfunc.c, src/userfunc.c,
            src/testdir/test_method.vim

Patch 8.1.1864
Problem:    Still a timer test that is flaky on Mac.
Solution:   Adjust the sleep times.
Files:	    src/testdir/test_timers.vim

Patch 8.1.1865
Problem:    Spellrare and spellrepall in the wrong order.
Solution:   Put spellrare below spellrepall. (closes #4820)
Files:	    runtime/doc/spell.txt, src/ex_cmds.h

Patch 8.1.1866
Problem:    Modeless selection in GUI does not work properly.
Solution:   Avoid going beyond the end of the line. (closes #4783)
Files:	    src/ui.c

Patch 8.1.1867
Problem:    Still a timer test that is flaky on Mac.
Solution:   Loop with a sleep instead of one fixed sleep.
Files:	    src/testdir/test_timers.vim

Patch 8.1.1868
Problem:    Multibyte characters in 'listchars' don't work correctly if
            'linebreak' is also enabled. (Martin Tournoij)
Solution:   Make it work correctly. (Christian Brabandt, closes #4822,
            closes #4812)
Files:	    src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1869
Problem:    Code for the argument list is spread out.
Solution:   Put argument list code in arglist.c. (Yegappan Lakshmanan,
            closes #4819)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/arglist.c, src/buffer.c, src/evalfunc.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/proto.h, src/proto/arglist.pro,
            src/proto/buffer.pro, src/proto/ex_cmds2.pro,
            src/proto/ex_docmd.pro

Patch 8.1.1870
Problem:    Using :pedit from a help file sets the preview window to help
            filetype. (Wang Shidong)
Solution:   Do not set "keep_help_flag". (closes #3536)
Files:	    src/ex_docmd.c, src/testdir/test_window_cmd.vim

Patch 8.1.1871 (after 8.1.1866)
Problem:    Modeless selection in GUI still not correct.
Solution:   Fix max_col.
Files:	    src/ui.c

Patch 8.1.1872
Problem:    When Vim exits because of a signal, VimLeave is not triggered.
            (Daniel Hahler)
Solution:   Unblock autocommands when triggering VimLeave. (closes #4818)
Files:	    src/main.c

Patch 8.1.1873 (after 8.1.1872)
Problem:    Cannot build tiny version.
Solution:   Remove #ifdef for is_autocmd_blocked().
Files:	    src/autocmd.c

Patch 8.1.1874
Problem:    Modeless selection in popup window overlaps scrollbar.
Solution:   Subtract scrollbar from max_col. (closes #4773)
Files:	    src/ui.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_select_01.dump

Patch 8.1.1875
Problem:    Cannot get size and position of the popup menu.
Solution:   Add pum_getpos(). (Ben Jackson, closes #4827)
Files:	    runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_popup.vim

Patch 8.1.1876
Problem:    proto file missing from distribution
Solution:   Add the file.
Files:	    Filelist

Patch 8.1.1877
Problem:    Graduated features scattered.
Solution:   Put graduated and obsolete features together.
Files:	    src/feature.h

Patch 8.1.1878
Problem:    Negative float before method not parsed correctly.
Solution:   Apply "!" and "-" in front of expression before using ->.
Files:	    src/eval.c, src/proto/eval.pro, src/userfunc.c,
            src/testdir/test_method.vim

Patch 8.1.1879
Problem:    More functions can be used as methods.
Solution:   Make float functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_float_func.vim

Patch 8.1.1880
Problem:    Cannot show extra info for completion in a popup window.
Solution:   Add the "popup" entry in 'completeopt'.
Files:	    runtime/doc/options.txt, src/popupmnu.c, src/ex_cmds.c,
            src/proto/ex_cmds.pro, src/ex_docmd.c, src/search.c, src/tag.c,
            src/popupwin.c, src/proto/popupwin.pro, src/option.c, src/vim.h,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_3.dump,
            src/testdir/dumps/Test_popupwin_infopopup_4.dump

Patch 8.1.1881
Problem:    Popup window test fails in some configurations.
Solution:   Check that screendumps can be made.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1882
Problem:    Cannot specify properties of the info popup window.
Solution:   Add the 'completepopup' option.  Default to PmenuSel highlight.
Files:	    runtime/doc/options.txt, runtime/doc/insert.txt, src/option.c,
            src/popupwin.c, src/proto/popupwin.pro, src/option.h,
            src/testdir/test_popupwin.vim, src/screen.c,
            src/testdir/dumps/Test_popupwin_infopopup_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_3.dump

Patch 8.1.1883
Problem:    Options test fails.
Solution:   Add entry for 'completepopup'.
Files:	    src/testdir/gen_opt_test.vim

Patch 8.1.1884
Problem:    Cannot use mouse scroll wheel in popup in Insert mode.  Mouse
            clicks in popup close the popup menu.
Solution:   Check if the mouse is in a popup window. Do not let mouse events
            close the popup menu.  (closes #4544)
Files:	    src/edit.c, src/popupmnu.c, src/insexpand.c

Patch 8.1.1885
Problem:    Comments in libvterm are inconsistent.
Solution:   Use // comments.  Also update the table of combining characters.
Files:	    src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/vterm-dump.c, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/encoding.c, src/libvterm/src/keyboard.c,
            src/libvterm/src/mouse.c, src/libvterm/src/parser.c,
            src/libvterm/src/pen.c, src/libvterm/src/rect.h,
            src/libvterm/src/state.c, src/libvterm/src/unicode.c,
            src/libvterm/src/utf8.h, src/libvterm/src/vterm.c,
            src/libvterm/src/vterm_internal.h, src/libvterm/src/termscreen.c

Patch 8.1.1886
Problem:    Command line expansion code is spread out.
Solution:   Move the code to cmdexpand.c. (Yegappan Lakshmanan, closes #4831)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdexpand.c, src/evalfunc.c, src/ex_getln.c, src/proto.h,
            src/proto/cmdexpand.pro, src/proto/ex_getln.pro, src/structs.h

Patch 8.1.1887
Problem:    The +cmdline_compl feature is not in the tiny version.
Solution:   Graduate the +cmdline_compl feature.
Files:	    src/cmdexpand.c, src/arglist.c, src/autocmd.c, src/buffer.c,
            src/cmdhist.c, src/eval.c, src/evalfunc.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/feature.h, src/highlight.c,
            src/if_cscope.c, src/map.c, src/menu.c, src/misc1.c, src/misc2.c,
            src/option.c, src/sign.c, src/syntax.c, src/tag.c, src/term.c,
            src/usercmd.c, src/userfunc.c, src/version.c, src/globals.h,
            src/option.h, src/structs.h, runtime/doc/cmdline.txt

Patch 8.1.1888
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_vimscript.vim, src/testdir/test_balloon_gui.vim,
            src/testdir/test_popup.vim, src/testdir/test_functions.vim,
            src/testdir/test_hide.vim, src/testdir/test_arglist.vim

Patch 8.1.1889
Problem:    Coverity warns for using a NULL pointer.
Solution:   Use zero for column if pos is NULL.
Files:	    src/netbeans.c

Patch 8.1.1890
Problem:    Ml_get error when deleting fold marker.
Solution:   Check that the line number is not below the last line.  Adjust the
            fold when deleting the empty line.  (Christian Brabandt,
            closes #4834)
Files:	    src/fold.c, src/normal.c, src/testdir/test_fold.vim

Patch 8.1.1891
Problem:    Functions used in one file are global.
Solution:   Add "static". (Yegappan Lakshmanan, closes #4840)
Files:	    src/autocmd.c, src/buffer.c, src/change.c, src/channel.c,
            src/charset.c, src/dict.c, src/digraph.c, src/eval.c,
            src/ex_cmds.c, src/ex_eval.c, src/fileio.c, src/findfile.c,
            src/getchar.c, src/gui.c, src/indent.c, src/json.c, src/list.c,
            src/mark.c, src/menu.c, src/message.c, src/misc1.c, src/misc2.c,
            src/ops.c, src/option.c, src/popupwin.c, src/profiler.c,
            src/proto/autocmd.pro, src/proto/buffer.pro, src/proto/change.pro,
            src/proto/channel.pro, src/proto/charset.pro, src/proto/dict.pro,
            src/proto/eval.pro, src/proto/ex_cmds.pro, src/proto/ex_eval.pro,
            src/proto/fileio.pro, src/proto/findfile.pro,
            src/proto/getchar.pro, src/proto/gui.pro, src/proto/indent.pro,
            src/proto/json.pro, src/proto/list.pro, src/proto/mark.pro,
            src/proto/menu.pro, src/proto/message.pro, src/proto/misc1.pro,
            src/proto/misc2.pro, src/proto/ops.pro, src/proto/option.pro,
            src/proto/popupwin.pro, src/proto/profiler.pro,
            src/proto/quickfix.pro, src/proto/spell.pro, src/proto/term.pro,
            src/proto/textprop.pro, src/proto/ui.pro, src/proto/undo.pro,
            src/proto/window.pro, src/quickfix.c, src/regexp.c, src/spell.c,
            src/term.c, src/textprop.c, src/ui.c, src/undo.c, src/window.c

Patch 8.1.1892
Problem:    Missing index entry and option menu for 'completepopup'.
Solution:   Add the entries.  Adjust #ifdefs to avoid dead code.
Files:	    runtime/doc/quickref.txt, runtime/optwin.vim, src/option.c,
            src/option.h, src/popupwin.c

Patch 8.1.1893
Problem:    Script to summarize test results can be improved.
Solution:   Use "silent" for substitute to avoid reporting number of matches.
            Remove duplicate "set nocp". (Daniel Hahler, closes #4845)
Files:	    src/testdir/summarize.vim

Patch 8.1.1894
Problem:    Not checking for out-of-memory of autoload_name().
Solution:   Check for NULL. (Dominique Pelle, closes #4846)
Files:	    src/eval.c

Patch 8.1.1895
Problem:    Using NULL pointer when out of memory.
Solution:   Bail out or skip the code using the pointer. (Zu-Ming Jiang,
            closes #4805, closes #4843, closes #4939, closes #4844)
Files:	    src/message.c, src/highlight.c, src/buffer.c, src/ops.c

Patch 8.1.1896
Problem:    Compiler warning for unused variable.
Solution:   Add #ifdef. (John Marriott)  Missing part of 8.1.1892.
Files:	    src/popupmnu.c

Patch 8.1.1897
Problem:    May free memory twice when out of memory.
Solution:   Check that backslash_halve_save() returns a different pointer.
            (Dominique Pelle, closes #4847)
Files:	    src/cmdexpand.c, src/misc1.c

Patch 8.1.1898
Problem:    Crash when out of memory during startup.
Solution:   When out of memory message given during initialisation bail out.
            (closes #4842)
Files:	    src/misc2.c

Patch 8.1.1899
Problem:    sign_place() does not work as documented.
Solution:   Make it accept line numbers like line(). (Yegappan Lakshmanan,
            closes #4848)
Files:	    src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1900
Problem:    Sign test fails in the GUI.
Solution:   Catch and ignore the exception.
Files:	    src/testdir/test_signs.vim

Patch 8.1.1901
Problem:    The +insert_expand feature is not always available.
Solution:   Graduate the +insert_expand feature.
Files:	    src/feature.h, src/autocmd.c, src/buffer.c, src/change.c,
            src/charset.c, src/edit.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/getchar.c, src/gui.c, src/highlight.c,
            src/indent.c, src/insexpand.c, src/misc2.c, src/move.c,
            src/option.c, src/popupmnu.c, src/screen.c, src/search.c,
            src/spell.c, src/tag.c, src/term.c, src/userfunc.c, src/version.c,
            src/globals.h, src/option.h, src/proto.h, src/structs.h,
            src/vim.h, runtime/doc/change.txt, runtime/doc/index.txt,
            runtime/doc/insert.txt, runtime/doc/options.txt

Patch 8.1.1902
Problem:    Cannot have an info popup without a border.
Solution:   Add the "border" item to 'completepopup'.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/popupmnu.c,
            src/testdir/test_popupwin.vim, src/testdir/gen_opt_test.vim,
            src/testdir/dumps/Test_popupwin_infopopup_nb_1.dump

Patch 8.1.1903
Problem:    Cannot build without the +eval feature.
Solution:   Add missing #ifdefs
Files:	    src/insexpand.c, src/popupmnu.c

Patch 8.1.1904
Problem:    Cannot have an info popup align with the popup menu.
Solution:   Add the "align" item to 'completepopup'.
Files:	    src/popupwin.c, src/popupmnu.c, src/vim.h,
            runtime/doc/insert.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_align_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_align_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_align_3.dump

Patch 8.1.1905
Problem:    Cannot set all properties of the info popup.
Solution:   Add popup_findinfo().  Rename popup_getpreview() to
            popup_findpreview().
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/ex_cmds.c,
            src/ex_docmd.c, src/popupmnu.c, src/evalfunc.c,
            runtime/doc/popup.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_align_3.dump

Patch 8.1.1906
Problem:    Info popup size is sometimes incorrect.
Solution:   Compute the position and size after setting the content.
Files:	    src/popupmnu.c

Patch 8.1.1907
Problem:    Wrong position for info popup with scrollbar on the left.
Solution:   Take the scrollbar into account.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_5.dump,
            src/testdir/dumps/Test_popupwin_cursorline_3.dump,
            src/testdir/dumps/Test_popupwin_cursorline_4.dump,
            src/testdir/dumps/Test_popupwin_cursorline_5.dump,
            src/testdir/dumps/Test_popupwin_cursorline_6.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_1.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_2.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_3.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_4.dump

Patch 8.1.1908
Problem:    Every popup window consumes a buffer number.
Solution:   Recycle buffers only used for popup windows.  Do not list popup
            window buffers.
Files:	    src/popupwin.c, src/window.c, src/vim.h, src/buffer.c,
            src/proto/buffer.pro, src/ex_docmd.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1909
Problem:    More functions can be used as methods.
Solution:   Make a few more functions usable as a method.
Files:	    runtime/doc/eval.txt, runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_bufline.vim, src/testdir/test_assert.vim

Patch 8.1.1910
Problem:    Redrawing too much when toggling 'relativenumber'.
Solution:   Only clear when 'signcolumn' is set to "number". (Yegappan
            Lakshmanan, closes #4852)
Files:	    src/option.c

Patch 8.1.1911
Problem:    More functions can be used as methods.
Solution:   Make a few more functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test69.in,
            src/testdir/test69.ok, src/testdir/test_functions.vim

Patch 8.1.1912
Problem:    More functions can be used as methods.
Solution:   Make channel and job functions usable as a method.
Files:	    runtime/doc/channel.txt, src/evalfunc.c,
            src/testdir/test_channel.vim

Patch 8.1.1913
Problem:    Not easy to compute the space on the command line.
Solution:   Add v:echospace. (Daniel Hahler, closes #4732)
Files:	    src/vim.h, src/eval.c, src/option.c, runtime/doc/eval.txt,
            src/testdir/test_messages.vim

Patch 8.1.1914
Problem:    Command line expansion code is spread out.
Solution:   Move set_one_cmd_context(). (Yegappan Lakshmanan, closes #4855)
Files:	    src/cmdexpand.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 8.1.1915
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/testdir/test_cd.vim,
            src/testdir/test_cindent.vim, src/testdir/test_match.vim,
            src/testdir/test_popup.vim, src/testdir/test_cursor_func.vim,
            src/testdir/test_method.vim, src/testdir/test_bufline.vim,
            src/testdir/test_diffmode.vim

Patch 8.1.1916
Problem:    Trying to allocate negative amount of memory when closing a popup.
Solution:   Check the rows are not out of bounds.  Don't finish a selection if
            it was never started.
Files:	    src/ui.c

Patch 8.1.1917
Problem:    Non-current window is not redrawn when moving popup. (Ben Jackson)
Solution:   Redraw all windows under a popup. (closes #4860)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump,
            src/testdir/dumps/Test_popupwin_drag_03.dump

Patch 8.1.1918
Problem:    Redrawing popups is inefficient.
Solution:   Fix the logic to compute what window lines to redraw.  Make it
            work below the last line.  Remove redrawing all windows.
Files:	    src/popupwin.c

Patch 8.1.1919
Problem:    Using current window option values when passing a buffer to
            popup_create().
Solution:   Clear the window-local options. (closes #4857)
Files:	    src/option.c, src/proto/option.pro, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1920
Problem:    Cannot close a popup by the X when a filter consumes all events.
Solution:   Check for a click on the close button before invoking filters.
            (closes #4858)
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/ui.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_close_04.dump,
            src/testdir/dumps/Test_popupwin_close_05.dump

Patch 8.1.1921
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_expand.vim,
            src/testdir/test_expand_func.vim, src/testdir/test_expr.vim,
            src/testdir/test_findfile.vim, src/testdir/test_fnameescape.vim,
            src/testdir/test_fnamemodify.vim, src/testdir/test_fold.vim,
            src/testdir/test_functions.vim, src/testdir/test_search.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1922
Problem:    In diff mode global operations can be very slow.
Solution:   Do not call diff_redraw() many times, call it once when redrawing.
            And also don't update folds multiple times.
Files:	    src/globals.h, src/diff.c, src/proto/diff.pro, src/screen.c,
            src/fold.c

Patch 8.1.1923
Problem:    Some source files are not in a normal encoding.
Solution:   Convert hangulin.c from euc-kr to utf-8 and digraph.c from latin1
            to utf-8. (Daniel Hahler, closes #4731)
Files:	    src/hangulin.c, src/digraph.c, .travis.yml

Patch 8.1.1924
Problem:    Using empty string for current buffer is unexpected.
Solution:   Make the argument optional for bufname() and bufnr().
Files:	    src/evalfunc.c, src/testdir/test_arglist.vim, runtime/doc/eval.txt

Patch 8.1.1925
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufline.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_cd.vim, src/testdir/test_changelist.vim,
            src/testdir/test_cmdline.vim, src/testdir/test_edit.vim,
            src/testdir/test_environ.vim, src/testdir/test_file_perm.vim,
            src/testdir/test_getvar.vim, src/testdir/test_jumplist.vim,
            src/testdir/test_put.vim, src/testdir/test_stat.vim

Patch 8.1.1926
Problem:    Cursorline not redrawn when putting a line above the cursor.
Solution:   Redraw when the cursor line is below a change. (closes #4862)
Files:	    src/change.c

Patch 8.1.1927
Problem:    Code for dealing with script files is spread out.
Solution:   Move the code to scriptfile.c. (Yegappan Lakshmanan, closes #4861)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdexpand.c, src/ex_cmds2.c, src/proto.h,
            src/proto/ex_cmds2.pro, src/proto/scriptfile.pro, src/scriptfile.c

Patch 8.1.1928
Problem:    Popup windows don't move with the text when making changes.
Solution:   Add the 'textprop' property to the popup window options, position
            the popup relative to a text property. (closes #4560)
            No tests yet.
Files:	    runtime/doc/popup.txt, src/textprop.c, src/proto/textprop.pro,
            src/structs.h, src/popupwin.c, src/proto/popupwin.pro, src/move.c,
            src/proto/move.pro, src/window.c

Patch 8.1.1929
Problem:    No tests for text property popup window.
Solution:   Add a few tests.
Files:	    src/testdir/Make_all.mak, src/textprop.c,
            src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_01.dump,
            src/testdir/dumps/Test_popup_textprop_02.dump,
            src/testdir/dumps/Test_popup_textprop_03.dump,
            src/testdir/dumps/Test_popup_textprop_04.dump,
            src/testdir/dumps/Test_popup_textprop_05.dump,
            src/testdir/dumps/Test_popup_textprop_06.dump

Patch 8.1.1930
Problem:    Cannot recognize .jsx and .tsx files.
Solution:   Recognize them as javascriptreact and typescriptreact.
            (closes #4830)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim,
            runtime/syntax/javascriptreact.vim,
            runtime/indent/javascriptreact.vim,
            runtime/ftplugin/javascriptreact.vim

Patch 8.1.1931 (after 8.1.1930)
Problem:    Syntax test fails.
Solution:   Add new javascriptreact type to completions.
Files:	    src/testdir/test_syntax.vim

Patch 8.1.1932
Problem:    Ml_get errors after using append(). (Alex Genco)
Solution:   Do not update the cursor twice. (closes #1737)
Files:	    src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.1.1933
Problem:    The eval.c file is too big.
Solution:   Move code related to variables to evalvars.c. (Yegappan
            Lakshmanan, closes #4868)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/eval.c, src/evalfunc.c, src/evalvars.c, src/globals.h,
            src/proto.h, src/proto/eval.pro, src/proto/evalvars.pro, src/vim.h

Patch 8.1.1934
Problem:    Not enough tests for text property popup window.
Solution:   Add a few more tests.
Files:	    src/popupwin.c, src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_corn_1.dump,
            src/testdir/dumps/Test_popup_textprop_corn_2.dump,
            src/testdir/dumps/Test_popup_textprop_corn_3.dump,
            src/testdir/dumps/Test_popup_textprop_corn_4.dump

Patch 8.1.1935 (after 8.1.1934)
Problem:    Test for text property popup window is flaky.
Solution:   Remove the undo message
Files:	    src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_corn_4.dump

Patch 8.1.1936
Problem:    Not enough tests for text property popup window.
Solution:   Add a few more tests.  Make negative offset work.  Close all
            popups when window closes.
Files:	    src/popupwin.c, src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_07.dump,
            src/testdir/dumps/Test_popup_textprop_off_1.dump,
            src/testdir/dumps/Test_popup_textprop_off_2.dump,
            src/testdir/dumps/Test_popup_textprop_corn_5.dump,
            src/testdir/dumps/Test_popup_textprop_corn_6.dump

Patch 8.1.1937 (after 8.1.1930)
Problem:    Errors when using javascriptreact.
Solution:   Use ":runtime" instead of ":source". (closes #4875)
Files:	    runtime/syntax/javascriptreact.vim,
            runtime/indent/javascriptreact.vim,
            runtime/ftplugin/javascriptreact.vim

Patch 8.1.1938
Problem:    May crash when out of memory.
Solution:   Initialize v_type to VAR_UNKNOWN. (Dominique Pelle, closes #4871)
Files:	    src/userfunc.c

Patch 8.1.1939
Problem:    Code for handling v: variables in generic eval file.
Solution:   Move v: variables to evalvars.c. (Yegappan Lakshmanan,
            closes #4872)
Files:	    src/eval.c, src/evalvars.c, src/proto/eval.pro,
            src/proto/evalvars.pro

Patch 8.1.1940 (after 8.1.1939)
Problem:    Script tests fail.
Solution:   Don't set vimvars type in set_vim_var_nr().
Files:	    src/eval.c, src/evalvars.c, src/proto/evalvars.pro

Patch 8.1.1941
Problem:    getftype() test fails on Mac.
Solution:   Skip /dev/fd/.
Files:	    src/testdir/test_stat.vim

Patch 8.1.1942
Problem:    Shadow directory gets outdated when files are added.
Solution:   Add the "shadowupdate" target and add a few comments.
Files:	    src/Makefile

Patch 8.1.1943
Problem:    More code can be moved to evalvars.c.
Solution:   Move it, clean up comments.  Also move some window related
            functions to window.c. (Yegappan Lakshmanan, closes #4874)
Files:	    src/eval.c, src/evalfunc.c, src/evalvars.c, src/proto/eval.pro,
            src/proto/evalvars.pro, src/proto/window.pro, src/window.c

Patch 8.1.1944
Problem:    Leaking memory when using sound callback.
Solution:   Free the callback queue item.
Files:	    src/sound.c

Patch 8.1.1945
Problem:    Popup window "firstline" cannot be reset.
Solution:   Allow for setting "firstline" to zero.  Fix that the text jumps to
            the top when using win_execute(). (closes #4876)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump

Patch 8.1.1946
Problem:    Memory error when profiling a function without a script ID.
Solution:   Check for missing script ID.  (closes #4877)
Files:	    src/testdir/test_profile.vim, src/profiler.c

Patch 8.1.1947
Problem:    When executing one test the report doesn't show it.
Solution:   Adjust the regexp. (Daniel Hahler, closes #4879)
Files:	    src/testdir/summarize.vim

Patch 8.1.1948
Problem:    Mouse doesn't work in Linux console and causes 100% CPU. (James P.
            Harvey)
Solution:   Loop in WaitForCharOrMouse() when gpm_process_wanted is set.
            (closes #4828)
Files:	    src/os_unix.c

Patch 8.1.1949
Problem:    Cannot scroll a popup window to the very bottom.
Solution:   Scroll to the bottom when the "firstline" property was set to -1.
            (closes #4577)  Allow resetting min/max width/height.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/dict.c, src/proto/dict.pro,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_firstline_1.dump,
            src/testdir/dumps/Test_popupwin_firstline_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_10.dump

Patch 8.1.1950
Problem:    Using NULL pointer after an out-of-memory.
Solution:   Check for NULL pointer. (Dominique Pelle, closes #4881)
Files:	    src/syntax.c

Patch 8.1.1951
Problem:    Mouse double click test is a bit flaky.
Solution:   Add to list of flaky tests.  Update a couple of comments.
Files:	    src/testdir/runtest.vim, src/testdir/shared.vim,
            src/testdir/test_substitute.vim

Patch 8.1.1952
Problem:    More functions can be used as a method.
Solution:   Allow more functions to be used as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_tagjump.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_terminal.vim, src/testdir/test_getvar.vim,
            src/testdir/test_escaped_glob.vim,
            src/testdir/test_glob2regpat.vim

Patch 8.1.1953
Problem:    More functions can be used as a method.
Solution:   Allow more functions to be used as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_blob.vim,
            src/testdir/test_breakindent.vim, src/testdir/test_delete.vim,
            src/testdir/test_functions.vim, src/testdir/test_getcwd.vim,
            src/testdir/test_history.vim, src/testdir/test_listdict.vim,
            src/testdir/test_syn_attr.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_true_false.vim

Patch 8.1.1954
Problem:    More functions can be used as a method.
Solution:   Allow more functions to be used as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_arglist.vim, src/testdir/test_functions.vim,
            src/testdir/test_json.vim, src/testdir/test_lispwords.vim,
            src/testdir/test_listener.vim, src/testdir/test_lua.vim,
            src/testdir/test_utf8.vim

Patch 8.1.1955
Problem:    Tests contain typos.
Solution:   Correct the typos. (Dominique Pelle)
Files:	    src/testdir/popupbounce.vim, src/testdir/runtest.vim,
            src/testdir/screendump.vim, src/testdir/test49.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_cindent.vim,
            src/testdir/test_const.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_search.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_tcl.vim

Patch 8.1.1956
Problem:    Screenshot tests may use a different encoding. (Dominique Pelle)
Solution:   Always set 'encoding' to "utf-8" when running Vim in a terminal.
            (closes #4884)
Files:	    src/testdir/shared.vim, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_behind.dump

Patch 8.1.1957
Problem:    More code can be moved to evalvars.c.
Solution:   Move code to where it fits better. (Yegappan Lakshmanan,
            closes #4883)
Files:	    src/eval.c, src/evalvars.c, src/ex_getln.c, src/globals.h,
            src/if_py_both.h, src/proto/eval.pro, src/proto/evalvars.pro,
            src/proto/ex_getln.pro, src/proto/scriptfile.pro,
            src/scriptfile.c, src/session.c, src/viminfo.c

Patch 8.1.1958
Problem:    Old style comments taking up space.
Solution:   Change to new style comments.
Files:	    src/vim.h

Patch 8.1.1959
Problem:    When using "firstline" in popup window text may jump when
            redrawing it. (Nick Jensen)
Solution:   Set 'scrolloff' to zero in a popup window. (closes #4882)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump

Patch 8.1.1960
Problem:    Fold code is spread out.
Solution:   Move fold functions to fold.c.
Files:	    src/evalfunc.c, src/fold.c, src/proto/fold.pro

Patch 8.1.1961
Problem:    More functions can be used as a method.
Solution:   Allow more functions to be used as a method.  Add a test for
            mapcheck().
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test70.in,
            src/testdir/test_functions.vim, src/testdir/test_getcwd.vim,
            src/testdir/test_maparg.vim, src/testdir/test_match.vim

Patch 8.1.1962
Problem:    Leaking memory when using tagfunc().
Solution:   Free the user_data. (Dominique Pelle, closes #4886)
Files:	    src/window.c

Patch 8.1.1963
Problem:    Popup window filter may be called recursively when using a Normal
            mode command. (Nick Jensen)
Solution:   Prevent recursiveness. (closes #4887)  Also restore KeyTyped.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1964
Problem:    Crash when using nested map() and filter().
Solution:   Do not set the v:key type to string without clearing the pointer.
            (closes #4888)
Files:	    src/eval.c, src/testdir/test_filter_map.vim

Patch 8.1.1965
Problem:    The search count message is not displayed when using a mapping.
            (Gary Johnson)
Solution:   Ignore cmd_silent for showing the search count. (Christian
            Brabandt)
Files:	    src/search.c
