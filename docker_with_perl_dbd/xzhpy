Solution:   Check for argument count to be too few. (closes #8325)
Files:      src/errors.h, src/vim9execute.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.2943
Problem:    Vim9: check for argument count ignores default values.
Solution:   Take default argument values into account.
Files:      src/vim9execute.c

Patch 8.2.2944
Problem:    Vim9: no error when using job or channel as a string.
Solution:   Be more strict about conversion to string. (closes #8312)
Files:      src/typval.c, src/job.c, src/proto/job.pro, src/channel.c,
            src/proto/channel.pro, src/eval.c, src/vim9execute.c,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.2945
Problem:    Some buffer related code is not tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #8320)
Files:      src/termlib.c, src/testdir/test_excmd.vim,
            src/testdir/test_recover.vim, src/testdir/test_swap.vim,
            src/testdir/test_visual.vim

Patch 8.2.2946
Problem:    Vim9: substitute expression cannot be a List in a :def function.
Solution:   Use typval2string(). (closes #8330)
Files:      src/vim9execute.c, src/testdir/test_vim9_cmd.vim

Patch 8.2.2947
Problem:    Build failure without the channel feature.
Solution:   Add back #ifdef. (John Marriott)
Files:      src/eval.c

Patch 8.2.2948
Problem:    Substitute() accepts a number but not a float expression.
Solution:   Also accept a float. (closes #8331)
Files:      src/typval.c, src/testdir/test_substitute.vim

Patch 8.2.2949 (after 8.2.2948)
Problem:    Tests failing because there is no error for float to string
            conversion.
Solution:   Change the check for failure to check for correct result.  Make
            some conversions strict in Vim9 script.
Files:      src/evalfunc.c, src/float.c, src/findfile.c, src/json.c,
            src/filepath.c, src/testdir/test_eval_stuff.vim,
            src/testdir/test_execute_func.vim,
            src/testdir/test_float_func.vim, src/testdir/test_functions.vim,
            src/testdir/test_listdict.vim, src/testdir/test_glob2regpat.vim

Patch 8.2.2950
Problem:    Sound code not fully tested.
Solution:   Add more sound tests. (Dominique Pellé, closes #8332)
Files:      src/testdir/test_sound.vim

Patch 8.2.2951
Problem:    Vim9: cannot use heredoc in :def function for :python, :lua, etc.
Solution:   Concatenate the heredoc lines and pass them in the ISN_EXEC_SPLIT
            instruction.
Files:      src/userfunc.c, src/vim9compile.c, src/vim9.h, src/vim9execute.c,
            src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.2952
Problem:    Recover test fails on big endian systems.
Solution:   Disable the failing test on big endian systems. (Yegappan
            Lakshmanan, closes #8335)
Files:      src/testdir/test_recover.vim, src/testdir/test_swap.vim

Patch 8.2.2953 (after 8.2.2951)
Problem:    Vim9: leaking memory when using heredoc script.
Solution:   Free the first line.
Files:      src/vim9execute.c

Patch 8.2.2954
Problem:    Short file name extension for Scala not recognized.
Solution:   Recognize *.sc. (closes #8337)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.2955
Problem:    Vim9: using filter in compiled command does not work.
Solution:   Generate EXEC including the command modifier.
Files:      src/vim9compile.c, src/ex_docmd.c, src/ex_cmds.c,
            src/proto/ex_cmds.pro, src/testdir/test_vim9_cmd.vim

Patch 8.2.2956
Problem:    Vim9: need to plan for future additions.
Solution:   Reserve commands for future use: :type, :class, :enum.
Files:      src/ex_cmds.h, src/ex_cmdidxs.h

Patch 8.2.2957
Problem:    Using getchar() in Vim9 script is problematic.
Solution:   Add getcharstr(). (closes #8343)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/getchar.c,
            src/proto/getchar.pro, src/testdir/test_functions.vim

Patch 8.2.2958 (after 8.2.2957)
Problem:    Function list test fails.
Solution:   Add newly added function to the list.  Fix typo.
Files:      runtime/doc/usr_41.txt, src/testdir/test_function_lists.vim

Patch 8.2.2959
Problem:    sound_playfile() is not tested on MS-Windows.
Solution:   Make it work and enable the test. (Dominique Pellé, closes #8338)
Files:      src/sound.c, src/testdir/test_sound.vim

Patch 8.2.2960
Problem:    Swap file recovery not sufficiently tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #8339)
Files:      src/testdir/test_recover.vim

Patch 8.2.2961
Problem:    Keys typed during a :normal command are discarded.
Solution:   Concatenate saved typeahead and typed keys. (closes #8340)
Files:      src/getchar.c, src/proto/getchar.pro, src/ex_docmd.c,
            src/evalfunc.c, src/debugger.c, src/ui.c, src/proto/ui.pro

Patch 8.2.2962
Problem:    MS-Windows command line arguments have wrong encoding.
Solution:   Always use utf-8 in get_cmd_argsW(). (Ken Takata, closes #8347)
Files:      src/os_win32.c

Patch 8.2.2963
Problem:    GUI: mouse move may start Visual mode with a popup visible.
Solution:   Add special code for mouse move. (closes #8318)
Files:      src/vim.h, src/gui.c, src/keymap.h, src/term.c

Patch 8.2.2964
Problem:    Vim9: hang when using space after ->. (Naohiro Ono)
Solution:   Skip over white space to find the function name. (closes #8341)
Files:      src/eval.c, src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.2965
Problem:    Vim9: crash when calling function that failed to compile.
Solution:   Fail when trying to call the function. (closes #8344)
Files:      src/errors.h, src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.2966
Problem:    ml_get errors after recovering a file. (Yegappan Lakshmanan)
Solution:   Fix the cursor position after deleting lines.
Files:      src/memline.c

Patch 8.2.2967
Problem:    Vim9: crash when using two levels of partials.
Solution:   Add outer_ref_T and use it in the execution context.
Files:      src/structs.h, src/vim9execute.c, src/testdir/test_vim9_func.vim

Patch 8.2.2968 (after 8.2.2967)
Problem:    Vim9: memory leak
Solution:   Unreference pt_outer of partial.
Files:      src/eval.c

Patch 8.2.2969
Problem:    Subtracting from number option fails when result is zero. (Ingo
            Karkat)
Solution:   Reset the string value when using the numeric value.
            (closes #8351)
Files:      src/evalvars.c, src/testdir/test_vimscript.vim

Patch 8.2.2970
Problem:    Python configure check uses deprecated command.
Solution:   Use sysconfig instead of distutils if possible. (Zdenek Dohnal,
            closes #8354)
Files:      src/configure.ac, src/auto/configure

Patch 8.2.2971
Problem:    Cannot yank a block without trailing spaces.
Solution:   Add the "zy" command. (Christian Brabandt, closes #8292)
Files:      runtime/doc/change.txt, runtime/doc/index.txt, src/normal.c,
            src/ops.c, src/register.c, src/structs.h,
            src/testdir/test_visual.vim

Patch 8.2.2972
Problem:    "%bd" tries to delete popup window buffers, which fails. (Ralf
            Schandl)
Solution:   Do not try to delete a popup window buffer. (closes #8349)
Files:      src/buffer.c, src/vim.h, src/testdir/test_popupwin.vim

Patch 8.2.2973
Problem:    Fix for recovery and diff mode not tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #8352)
Files:      src/testdir/test_diffmode.vim, src/testdir/test_prompt_buffer.vim,
            src/testdir/test_recover.vim

Patch 8.2.2974
Problem:    Greek spell checking uses wrong case folding.
Solution:   Fold capital sigma depending on whether it is at the end of a
            word or not. (closes #299)
Files:      src/spell.c, src/proto/spell.pro, src/spellfile.c,
            src/spellsuggest.c

Patch 8.2.2975
Problem:    Vim9: can only use an autoload function name as a string.
Solution:   Load the autoload script when encountered. (closes #8124)
Files:      src/vim9compile.c, src/evalvars.c, src/scriptfile.c,
            src/testdir/test_vim9_func.vim

Patch 8.2.2976 (after 8.2.2975)
Problem:    Build failure without the +eval feature.
Solution:   Add #ifdefs.
Files:      src/scriptfile.c

Patch 8.2.2977
Problem:    Crash when using a null function reference. (Naohiro Ono)
Solution:   Check for an invalid function name. (closes #8367)
Files:      src/eval.c, src/errors.h, src/testdir/test_functions.vim

Patch 8.2.2978 (after 8.2.2977)
Problem:    Warning for uninitialized variable.
Solution:   Set return value to FAIL.
Files:      src/eval.c

Patch 8.2.2979
Problem:    Not all options code is covered by tests.
Solution:   Add more tests for options. (Yegappan Lakshmanan, closes #8369)
Files:      src/testdir/test_edit.vim, src/testdir/test_excmd.vim,
            src/testdir/test_help.vim, src/testdir/test_mksession.vim,
            src/testdir/test_options.vim, src/testdir/test_vartabs.vim,
            src/testdir/test_window_cmd.vim

Patch 8.2.2980
Problem:    Popup window test is a bit flaky.
Solution:   Add a redraw command.
Files:      src/testdir/test_popupwin.vim

Patch 8.2.2981
Problem:    Recovery test is not run on big-endian systems.
Solution:   Make it work on big-endian systems. (James McCoy, closes #8368)
Files:      src/testdir/test_recover.vim

Patch 8.2.2982
Problem:    Vim9: future commands are not reserved yet.
Solution:   Add commands to be implemented later.  Make "this" a reserved
            name.
Files:      runtime/doc/vim9.txt, src/ex_cmds.h, src/ex_cmdidxs.h,
            src/vim9script.c, src/testdir/test_vim9_assign.vim

Patch 8.2.2983
Problem:    Vim9: an inline function requires specifying the return type.
Solution:   Make the return type optional.
Files:      src/eval.c, src/vim9compile.c, src/userfunc.c,
            src/testdir/test_vim9_func.vim

Patch 8.2.2984 (after 8.2.2983)
Problem:    Vim9: Test fails because of missing return statement.
Solution:   When type is unknown set type to void.
Files:      src/vim9compile.c

Patch 8.2.2985
Problem:    Vim9: a compiled function cannot be debugged.
Solution:   Add initial debugging support.
Files:      src/vim9.h, src/vim9compile.c, src/proto/vim9compile.pro,
            src/vim.h, src/eval.c, src/vim9execute.c, src/userfunc.c,
            src/vim9type.c, src/testdir/test_debugger.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.2986
Problem:    Build failure without the profile feature.
Solution:   Add #ifdef.
Files:      src/vim9compile.c

Patch 8.2.2987
Problem:    Build failure with normal features.
Solution:   Remove #define.
Files:      src/vim9execute.c

Patch 8.2.2988
Problem:    Vim9: debugger test fails.
Solution:   Get the debugger instructions when needed.
Files:      src/vim.h, src/vim9.h

Patch 8.2.2989
Problem:    Vim9: memory leak when debugging a :def function.
Solution:   Free the debug instructions.
Files:      src/vim9compile.c

Patch 8.2.2990
Problem:    Jupyter Notebook files are not recognized.
Solution:   Recognize *.ipynb. (closes #8375)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.2991
Problem:    Vim9: no completion for :vim9 and :legacy.
Solution:   Expand argument as a command. (closes #8377)
Files:      src/cmdexpand.c, src/testdir/test_cmdline.vim

Patch 8.2.2992
Problem:    Vim9: completion for :disassemble is incomplete.
Solution:   Recognize the "debug" and "profile" arguments.
Files:      src/cmdexpand.c, src/vim9execute.c, src/proto/vim9execute.pro,
            src/vim.h, src/testdir/test_cmdline.vim

Patch 8.2.2993
Problem:    'fileencodings' default value should depend on 'encoding'. (Gary
            Johnson)
Solution:   When 'encoding' is "utf-8" use a different default value for
            'fileencodings'.
Files:      src/mbyte.c, src/option.c, src/proto/option.pro,
            src/testdir/test_options.vim

Patch 8.2.2994
Problem:    Various code is not fully tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #8378)
Files:      src/testdir/test_excmd.vim, src/testdir/test_mapping.vim,
            src/testdir/test_modeline.vim, src/testdir/test_options.vim,
            src/testdir/test_paste.vim, src/vim9compile.c

Patch 8.2.2995
Problem:    Linker errors with dynamic Python 3.10.
Solution:   Add a couple of library entries. (Zdenek Dohnal, closes #8381,
            closes #8356)
Files:      src/if_python3.c

Patch 8.2.2996
Problem:    Vim9: when debugging cannot inspect local variables.
Solution:   Make local variables available when debugging.
Files:      src/vim9execute.c, src/proto/vim9execute.pro, src/vim9compile.c,
            src/vim9.h, src/debugger.c, src/testdir/test_debugger.vim

Patch 8.2.2997 (after 8.2 2996)
Problem:    Vim9: disassemble test fails.
Solution:   Adjust expected output.
Files:      src/testdir/test_vim9_disassemble.vim

Patch 8.2.2998 (after 8.2 2996)
Problem:    Vim9: disassemble test fails.
Solution:   Add missing call to lookup_debug_var().
Files:      src/evalvars.c

Patch 8.2.2999
Problem:    Balloon sometimes does not hide with GTK 3.
Solution:   Also listen to GDK_LEAVE_NOTIFY. (Johannes Stezenbach)
Files:      src/gui_beval.c

Patch 8.2.3000
Problem:    Vim9: warning for uninitialized variable.
Solution:   Add initialization. (John Marriott)
Files:      src/vim9compile.c

Patch 8.2.3001
Problem:    Vim9: memory leak when compilation fails.
Solution:   Free the list of variable names.
Files:      src/vim9compile.c

Patch 8.2.3002
Problem:    Vim doesn't abort on a fatal Tcl error.
Solution:   Change emsg() to iemsg(). (Dominique Pellé, closes #8383)
Files:      src/if_tcl.c

Patch 8.2.3003
Problem:    Vim9: closure compiled with wrong compile type.
Solution:   Use COMPILE_TYPE() when calling a function. (closes #8384)
Files:      src/vim9execute.c, src/testdir/test_debugger.vim

Patch 8.2.3004
Problem:    Vim9: error for missing colon given while skipping.
Solution:   Do not give the error when skipping. (closes #8385)
Files:      src/ex_docmd.c, src/testdir/test_vim9_script.vim

Patch 8.2.3005
Problem:    Vim9: using a void value does not give a proper error message.
Solution:   Give a clear error message. (closes #8387)
Files:      src/typval.c, src/vim9compile.c, src/vim9.h, src/vim9execute.c,
            src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.3006
Problem:    Crash when echoing a value very early. (Naruhiko Nishino)
Solution:   Do not use a NUL to truncate the message, make a copy.
            (closes #8388)
Files:      src/message.c, src/testdir/test_startup.vim

Patch 8.2.3007 (after 8.2.3005)
Problem:    Vim9: test for void value fails.
Solution:   Adjust expected error.  Do not make a copy of void.
Files:      src/typval.c, src/testdir/test_functions.vim

Patch 8.2.3008 (after 8.2.3006)
Problem:    Startup test may hang.
Solution:   Add quit command in the script.
Files:      src/testdir/test_startup.vim

Patch 8.2.3009 (after 8.2.3006)
Problem:    Startup test may hang.
Solution:   Do not run the test in the GUI.
Files:      src/testdir/test_startup.vim

Patch 8.2.3010
Problem:    Not enough testing for viminfo code.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #8390)
Files:      src/register.c, src/testdir/test_fileformat.vim,
            src/testdir/test_smartindent.vim, src/testdir/test_viminfo.vim

Patch 8.2.3011
Problem:    Vim9: cannot get argument values during debugging.
Solution:   Lookup names in the list of arguments.  Put debug instruction
            halfway for command.
Files:      src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_debugger.vim

Patch 8.2.3012
Problem:    When 'rightleft' is set the line number is sometimes drawn
            reversed.
Solution:   Adjust how space is handled. (Christian Brabandt, closes #8389,
            closes #8391)
Files:      src/drawline.c, src/testdir/test_number.vim

Patch 8.2.3013
Problem:    Vim: when debugging only the first line of a command using line
            continuation is displayed.
Solution:   Find the next command and concatenate lines until that one.
            (closes #8392)
Files:      src/vim9execute.c, src/testdir/test_debugger.vim

Patch 8.2.3014
Problem:    Coverity warns for freeing static string.
Solution:   Do not assign static string to pointer. (Dominique Pellé,
            closes #8397)
Files:      src/vim9execute.c

Patch 8.2.3015
Problem:    Vim9: Assigning to @# requires a string. (Naohiro Ono)
Solution:   Accent a number or a string. (closes #8396)
Files:      src/vim9compile.c, src/vim9execute.c, src/globals.h,
            src/testdir/test_vim9_assign.vim

Patch 8.2.3016
Problem:    Confusing error when expression is followed by comma.
Solution:   Give a different error for trailing text. (closes #8395)
Files:      src/eval.c, src/testdir/test_let.vim,
            src/testdir/test_eval_stuff.vim, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_script.vim, src/testdir/test_viminfo.vim,
            src/testdir/test_vimscript.vim

Patch 8.2.3017
Problem:    Vim9: debugger shows too many lines.
Solution:   Truncate at a comment, "enddef", etc. (closes #8392)
Files:      src/vim9execute.c, src/testdir/test_debugger.vim

Patch 8.2.3018
Problem:    Formatting using quickfixtextfunc is lost when updating location
            lists for different buffers.  (Yorick Peterse)
Solution:   Use the right window for the location list. (Yegappan Lakshmanan,
            closes #8400, closes #8403)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.2.3019
Problem:    Location list only has the start position.
Solution:   Make it possible to add an end position. (thinca, closes #8393)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/dumps/Test_quickfix_cwindow_1.dump,
            src/testdir/dumps/Test_quickfix_cwindow_2.dump,
            src/testdir/test_quickfix.vim, src/testdir/test_tagjump.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.3020
Problem:    Unreachable code.
Solution:   Remove the code. (closes #8406)
Files:      src/ex_docmd.c

Patch 8.2.3021
Problem:    Spaces allowed between option name and "!", "?", etc.
Solution:   Disallow spaces in Vim9 script, it was not documented.
            (closes #8408)
Files:      src/option.c, src/testdir/test_vim9_script.vim

Patch 8.2.3022
Problem:    Available encryption methods are not strong enough.
Solution:   Add initial support for xchacha20. (Christian Brabandt,
            closes #8394)
Files:      .github/workflows/ci.yml, runtime/doc/eval.txt,
            runtime/doc/options.txt, runtime/doc/various.txt,
            src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/auto/configure, src/blowfish.c, src/bufwrite.c,
            src/config.h.in, src/configure.ac, src/crypt.c, src/crypt_zip.c,
            src/errors.h, src/evalfunc.c, src/feature.h, src/fileio.c,
            src/memline.c, src/option.c, src/optionstr.c,
            src/proto/blowfish.pro, src/proto/crypt.pro,
            src/proto/crypt_zip.pro, src/structs.h,
            src/testdir/samples/crypt_sodium_invalid.txt,
            src/testdir/test_crypt.vim, src/undo.c, src/version.c

Patch 8.2.3023
Problem:    Vim9: arguments for execute() not checked at compile time.
Solution:   Add a function to check the argument types.
Files:      src/evalfunc.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.3024 (after 8.2.3023)
Problem:    execute() function test fails.
Solution:   Adjust test for different error.
Files:      src/testdir/test_execute_func.vim

Patch 8.2.3025
Problem:    Not enough tests for quickfix end_col and end_lnum.
Solution:   Add a few more test cases. (Shane-XB-Qian, closes #8409)
Files:      src/testdir/test_quickfix.vim

Patch 8.2.3026
Problem:    Vim9: cannot set breakpoint in compiled function.
Solution:   Check for breakpoint when calling a function.
Files:      src/vim9execute.c, src/structs.h, src/vim.h, src/vim9.h,
            src/debugger.c, src/testdir/test_debugger.vim

Patch 8.2.3027
Problem:    Vim9: breakpoint in compiled function not always checked.
Solution:   Check for breakpoint when calling compiled function from compiled
            function.
Files:      src/vim9execute.c, src/testdir/test_debugger.vim

Patch 8.2.3028
Problem:    GUI mouse events not tested.
Solution:   Add test_gui_mouse_event().  Add mouse tests. Also add a few
            viminfo tests. (Yegappan Lakshmanan, closes #8407)
Files:      runtime/doc/eval.txt, runtime/doc/testing.txt,
            runtime/doc/usr_41.txt, src/evalfunc.c, src/proto/testing.pro,
            src/testdir/test_gui.vim, src/testdir/test_viminfo.vim,
            src/testing.c

Patch 8.2.3029
Problem:    Vim9: crash when using operator and list unpack assignment.
            (Naohiro Ono)
Solution:   Get variable value before operation. (closes #8416)
Files:      src/vim9.h, src/vim9compile.c, src/vim9execute.c, src/ex_docmd.c,
            src/testdir/test_vim9_assign.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.3030
Problem:    Coverity reports a memory leak.
Solution:   Fix the leak and a few typos. (Dominique Pellé, closes #8418)
Files:      src/crypt.c, src/errors.h

Patch 8.2.3031
Problem:    No error if a function name starts with an underscore. (Naohiro
            Ono)
Solution:   In Vim9 script disallow a function name starting with an
            underscore, as is mentioned in the help. (closes #8414)
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.3032
Problem:    Build problems with MSVC, other crypt issues with libsodium.
Solution:   Adjust MSVC makefile. Disable swap file only when 'key' is set.
            Adjust error message used when key is wrong.  Fix Coverity issues.
            (Christian Brabandt, closes #8420, closes #8411)
Files:      src/Make_mvc.mak, src/crypt.c, src/errors.h, src/fileio.c,
            src/memline.c, src/proto/crypt.pro

Patch 8.2.3033
Problem:    No error when using alpha delimiter with :global.
Solution:   Check the delimiter like with :substitute. (closes #8415)
Files:      src/ex_cmds.c, src/testdir/test_global.vim

Patch 8.2.3034
Problem:    Installing packages on github CI sometimes fails.
Solution:   Update package information first. (Christian Brabandt,
            closes #8432)
Files:      .github/workflows/ci.yml

Patch 8.2.3035
Problem:    Vim9: crash when calling :def function with partial and return
            type is not set.
Solution:   When the return type is not set handle like the return type is
            unknown. (closes #8422)
Files:      src/vim9type.c, src/testdir/test_vim9_func.vim

Patch 8.2.3036
Problem:    Vim9: builtin function arguments not checked at compile time.
Solution:   Add more argument type specs. Check arguments to test_setmouse()
            and test_gui_mouse_event(). (Yegappan Lakshmanan, closes #8425)
Files:      src/evalfunc.c, src/testdir/test_assert.vim,
            src/testdir/test_gui.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_vim9_builtin.vim, src/testing.c

Patch 8.2.3037
Problem:    Configure reports libcanberra when checking for libsodium.
Solution:   Adjust the message. (Ozaki Kiichi, closes #8435)
Files:      src/configure.ac, src/auto/configure

Patch 8.2.3038
Problem:    Amiga built-in version string doesn't include build date.
Solution:   Add the build date if available. (Ola Söder, closes #8437)
Files:      src/os_amiga.c

Patch 8.2.3039
Problem:    Vim9: breakpoint at a comment line does not work.
Solution:   Add the comment line number to the debug instruction.
            (closes #8429)
Files:      src/vim9.h, src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_debugger.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.3040
Problem:    GUI: dropping files not tested.
Solution:   Add test_gui_drop_files() and tests. (Yegappan Lakshmanan,
            closes #8434)
Files:      runtime/doc/eval.txt, runtime/doc/testing.txt,
            runtime/doc/usr_41.txt, src/evalfunc.c, src/gui.c,
            src/proto/testing.pro, src/testdir/test_gui.vim, src/testing.c

Patch 8.2.3041
Problem:    Detecting if the process of a swap file is running fails if the
            process is owned by another user.
Solution:   Check for the ESRCH error. (closes #8436)
Files:      src/os_unix.c

Patch 8.2.3042 (after 8.2.3041)
Problem:    Swap file test fails.
Solution:   Check for a very high process ID instead of one, which should be
            running.
Files:      src/testdir/test_swap.vim

Patch 8.2.3043
Problem:    Amiga: cannot get the shell size on MorphOS and AROS.
Solution:   Use control sequences. (Ola Söder, closes #8438)
Files:      src/os_amiga.c

Patch 8.2.3044
Problem:    Amiga MorphOS and AROS: process ID is not valid.
Solution:   Use FindTask to return something which is unique to all processes.
            (Ola Söder, closes #8444)
Files:      src/os_amiga.c

Patch 8.2.3045
Problem:    Minor typos.
Solution:   Fix the typos. (Christian Brabandt, closes #8441)
Files:      src/VisVim/README_VisVim.txt, src/evalfunc.c, src/testdir/vim9.vim

Patch 8.2.3046
Problem:    Amiga MorphOS: Term mode is set using DOS packets.
Solution:   Use the same way of setting term mode on all next gen Amiga-like
            systems.  (Ola Söder, closes #8445)
Files:      src/os_amiga.c

Patch 8.2.3047
Problem:    Increment and decrement don't allow for next command.
Solution:   Allow for comment and next command. (closes #8442)
Files:      src/ex_cmds.h, src/vim9script.c, src/testdir/test_vim9_assign.vim

Patch 8.2.3048
Problem:    Strange error for white space after ++ command.
Solution:   Check for white space explicitly. (closes #8440)
Files:      src/vim9script.c, src/errors.h, src/vim9compile.c,
            src/testdir/test_vim9_assign.vim

Patch 8.2.3049
Problem:    JSON patch file not recognized.
Solution:   Recognize json-patch as json. (Kevin Locke, closes #8450)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3050
Problem:    Cannot recognize elixir files.
Solution:   Recognize Elixir-specific files.  Check if an .ex file is Euphoria
            or Elixir. (Austin Gatlin, closes #8401, closes #8446)
Files:      runtime/autoload/dist/ft.vim, runtime/filetype.vim,
            src/testdir/test_filetype.vim

Patch 8.2.3051
Problem:    Vim9: for loop with one list variable does not work.
Solution:   Use a separate flag for unpacking a list. (closes #8452)
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.3052
Problem:    Vim9: "legacy call" does not work.
Solution:   Do not skip "call" after "legacy". (closes #8454)
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.3053
Problem:    Vim9: cannot assign to @@ in :def function
Solution:   Handle '@' like '"'. (closes #8456)
Files:      src/vim9compile.c, src/testdir/test_vim9_assign.vim

Patch 8.2.3054
Problem:    Vim9: unpack assignment using "_" after semicolon fails.
Solution:   Drop the expression result. (closes #8453)
Files:      src/vim9compile.c, src/errors.h, src/testdir/test_vim9_assign.vim

Patch 8.2.3055
Problem:    Strange error for assigning to "x.key" on non-dictionary.
Solution:   Add a specific error message. (closes #8451)
Files:      src/eval.c, src/errors.h, src/testdir/test_vim9_assign.vim,
            src/testdir/test_listdict.vim, src/testdir/test_let.vim

Patch 8.2.3056
Problem:    Vim9: using default value in lambda gives confusing error.
Solution:   Pass "default_args" on the first pass to get the arguments.
            (closes #8455)
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.3057
Problem:    Vim9: debugger test fails with normal features and +terminal.
            (Dominique Pellé)
Solution:   Adjust the INSTRUCTIONS macro. (closes #8460)
Files:      src/vim9.h

Patch 8.2.3058 (after 8.2.3056)
Problem:    Vim9: cannot use ternary operator in parentheses.
Solution:   Do not use "==" for a default argument value.  (closes #8462)
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.3059 (after 8.2.3056)
Problem:    Vim9: memory leak when using lambda.
Solution:   Do not store the default value strings when skipping.
Files:      src/userfunc.c

Patch 8.2.3060 (after 8.2.3056)
Problem:    Vim9: cannot use ternary operator in parentheses.
Solution:   Do not use "=~" for a default argument value.  (closes #8462)
Files:      src/userfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.3061
Problem:    Testing the shell option is incomplete and spread out.
Solution:   Move shell tests to one file and increase coverage. (Yegappan
            Lakshmanan, closes #8464)
Files:      src/testdir/Make_all.mak, src/testdir/test_functions.vim,
            src/testdir/test_options.vim, src/testdir/test_shell.vim,
            src/testdir/test_system.vim

Patch 8.2.3062
Problem:    Internal error when adding several text properties.
Solution:   Do not handle text properties when deleting a line for splitting a
            data block. (closes #8466)
Files:      src/structs.h, src/memline.c, src/testdir/test_textprop.vim

Patch 8.2.3063
Problem:    Crash when switching 'cryptmethod' to xchaha20 with an existing
            undo file. (Martin Tournoij)
Solution:   Disable reading undo file when decoding can't be done inplace.
            (issue #8467)
Files:      src/fileio.c, src/bufwrite.c

Patch 8.2.3064
Problem:    Vim9: in script cannot set item in uninitialized list.
Solution:   When a list is NULL allocate an empty one. (closes #8461)
Files:      src/eval.c, src/testdir/test_vim9_assign.vim

Patch 8.2.3065
Problem:    Vim9: error when sourcing script twice and reusing a function
            name.
Solution:   Check if the function is dead. (closes #8463)
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.3066
Problem:    Vim9: debugging lambda does not work.
Solution:   Use the compile type of the function when compiling a lambda.
            (closes #8412)
Files:      src/vim9compile.c, src/testdir/test_debugger.vim

Patch 8.2.3067
Problem:    Building fails with Athena. (Elimar Riesebieter)
Solution:   Adjust #ifdefs and add the 'drop_file' feature.
Files:      src/evalfunc.c, src/testing.c, src/testdir/test_gui.vim

Patch 8.2.3068
Problem:    Unicode tables are slightly outdated.
Solution:   Update the tables for Unicode release 13. (Christian Brabandt
            closes #8430)
Files:      runtime/tools/unicode.vim, src/mbyte.c

Patch 8.2.3069
Problem:    Error messages are spread out.
Solution:   Move some error messages to errors.h.  Use clearer names.
Files:      src/errors.h, src/globals.h, src/arglist.c, src/buffer.c,
            src/channel.c, src/eval.c, src/evalfunc.c, src/evalvars.c,
            src/evalwindow.c, src/ex_cmds.c, src/ex_docmd.c, src/ex_getln.c,
            src/filepath.c, src/fold.c, src/getchar.c, src/indent.c,
            src/list.c, src/map.c, src/mark.c, src/normal.c, src/ops.c,
            src/optionstr.c, src/popupwin.c, src/quickfix.c, src/spellfile.c,
            src/textprop.c, src/typval.c, src/undo.c, src/userfunc.c,
            src/vim9compile.c, src/window.c

Patch 8.2.3070
Problem:    Not enough testing for shell use.
Solution:   Add a bit more testing. (Yegappan Lakshmanan, closes #8469)
Files:      src/testdir/test_shell.vim, src/testdir/test_startup.vim

Patch 8.2.3071
Problem:    Shell options are not set properly for PowerShell.
Solution:   Use better option defaults. (Mike Williams, closes #8459)
Files:      runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/os_dos.txt, src/fileio.c, src/misc2.c, src/option.c,
            src/os_win32.c, src/testdir/test_shell.vim

Patch 8.2.3072
Problem:    The "zy" command does not work well when 'virtualedit' is set to
            "block". (Johann Höchtl)
Solution:   Make endspaces zero. (Christian Brabandt, closes #8468,
            closes #8448)
Files:      src/register.c, src/testdir/test_visual.vim

Patch 8.2.3073
Problem:    When cursor is moved for block append wrong text is inserted.
Solution:   Calculate an offset. (Christian Brabandt, closes #8433,
            closes #8288)
Files:      src/ops.c, src/testdir/test_blockedit.vim,
            src/testdir/test_visual.vim

Patch 8.2.3074
Problem:    popup_atcursor() uses wrong position with concealing.
Solution:   Keep w_wcol in conceal_check_cursor_line(). (closes #8476)
Files:      src/screen.c, src/proto/screen.pro, src/normal.c, src/edit.c,
            src/ui.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_atcursor_pos.dump

Patch 8.2.3075
Problem:    Xxd always reports an old version string. (Åsmund Ervik)
Solution:   Update the version string with the last known change date.
            (Jürgen Weigert, closes #8475)
Files:      src/xxd/xxd.c, src/testdir/test_xxd.vim

Patch 8.2.3076
Problem:    Vim9: using try in catch block causes a hang.
Solution:   Save and restore the ec_in_catch flag. (closes #8478)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.3077
Problem:    Vim9: an error in a catch block is not reported.
Solution:   Put the "in catch" flag in the try stack. (closes #8478)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.3078
Problem:    Vim9: profile test fails.
Solution:   Make throw in :catch jump to :finally.
Files:      src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.3079
Problem:    Powershell core not supported by default.
Solution:   Set option defaults for "pwsh". (Mike Williams, closes #8481)
Files:      runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/os_dos.txt, runtime/doc/os_win32.txt, src/fileio.c,
            src/misc2.c, src/option.c, src/os_win32.c,
            src/testdir/test_shell.vim

Patch 8.2.3080
Problem:    Recover test fails on 32bit systems. (Ondřej Súkup)
Solution:   Detect 32/64 bit systems. (Yegappan Lakshmanan, closes #8485,
            closes #8479)
Files:      src/testdir/test_recover.vim

Patch 8.2.3081
Problem:    Cannot catch errors in a channel command.
Solution:   Instead of skipping the error make it silent. (closes #8477)
Files:      src/channel.c

Patch 8.2.3082
Problem:    A channel command "echoerr" does not show anything.
Solution:   Do not use silent errors when using an "echoerr" command.
            (closes #8494)
Files:      src/channel.c, src/testdir/test_channel.py,
            src/testdir/test_channel.vim

Patch 8.2.3083
Problem:    Crash when passing null string to charclass().
Solution:   Bail out when string pointer is NULL. (Christian Brabandt,
            closes #8498, closes #8260)
Files:      src/mbyte.c, src/testdir/test_functions.vim

Patch 8.2.3084
Problem:    Vim9: builtin function argument types are not checked at compile
            time.
Solution:   Add argument types. (Yegappan Lakshmanan, closes #8503)
Files:      src/evalfunc.c, src/testdir/test_functions.vim,
            src/testdir/test_glob2regpat.vim,
            src/testdir/test_vim9_builtin.vim, src/testdir/test_vim9_expr.vim

Patch 8.2.3085
Problem:    JSONC files are not recognized.
Solution:   Recognize .jsonc files. (Izhak Jakov, closes #8500)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3086
Problem:    Vim9: breakpoint on "for" does not work.
Solution:   Use the right line number in ISN_DEBUG. (closes #8486)
Files:      src/vim9compile.c, src/testdir/test_debugger.vim

Patch 8.2.3087
Problem:    Gemtext files are not recognized.
Solution:   Recognize .gmi and .gemini files. (closes #8427)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.3088
Problem:    With 'virtualedit' set to "block" Visual highlight is wrong after
            using "$".  (Marco Trosi)
Solution:   Do not set w_old_cursor_lcol to MAXCOL. (closes #8495)
Files:      src/drawscreen.c, src/testdir/test_visual.vim,
            src/testdir/dumps/Test_visual_block_with_virtualedit.dump

Patch 8.2.3089
Problem:    Garbage collection has useless code.
Solution:   Bail out when aborting. (closes #8504)
Files:      src/userfunc.c

Patch 8.2.3090
Problem:    With concealing enabled and indirectly closing a fold the cursor
            may be somewhere in a folded line.
Solution:   Recompute the cursor position when the cursor line can be
            concealed. (closes #8480)
Files:      src/drawscreen.c

Patch 8.2.3091
Problem:    Vim9: default argument expression cannot use previous argument
Solution:   Correct argument index. (closes #8496)
Files:      src/vim9compile.c, src/structs.h, src/testdir/test_vim9_func.vim

Patch 8.2.3092
Problem:    Vim9: builtin function test fails without the +channel feature.
Solution:   Check the +channel feature is supported. (Dominique Pellé,
            closes #8507)
Files:      runtime/doc/eval.txt, src/testdir/test_vim9_builtin.vim

Patch 8.2.3093
Problem:    tablabel_tooltip test fails with Athena. (Dominique Pellé)
Solution:   Skip the test when using Athena. (closes #8508)
Files:      src/testdir/test_gui.vim, src/testdir/check.vim

Patch 8.2.3094
Problem:    Test_popup_atcursor_pos() fails without the conceal feature.
Solution:   Add a check for the conceal feature. (Dominique Pellé,
            closes #8505)
Files:      src/testdir/test_popupwin.vim

Patch 8.2.3095 (after 8.2.3088)
Problem:    With 'virtualedit' set to "block" block selection is wrong after
            using "$".  (Marco Trosi)
Solution:   Compute the longest selected line. (closes #8495)
Files:      src/drawscreen.c, src/testdir/test_visual.vim,
            src/testdir/dumps/Test_visual_block_with_virtualedit2.dump

Patch 8.2.3096
Problem:    Temp files remain after running tests.
Solution:   Delete the right files. (Dominique Pellé, closes #8509)
Files:      src/testdir/test_debugger.vim, src/testdir/test_lambda.vim,
            src/testdir/test_visual.vim


Patch 8.2.3097
Problem:    Crash when using "quit" at recovery prompt and autocommands are
            triggered.
Solution:   Block autocommands when creating an empty buffer to use as the
            current buffer. (closes #8506)
Files:      src/buffer.c, src/testdir/test_swap.vim

Patch 8.2.3098
Problem:    Popup window test is flaky on MS-Windows with GUI.
Solution:   Skip the check in this situation.
Files:      src/testdir/test_popupwin.vim

Patch 8.2.3099
Problem:    Vim9: missing catch/finally not reported at script level.
Solution:   Give an error. (closes #8487)
Files:      src/structs.h, src/ex_eval.c, src/testdir/test_vim9_script.vim

Patch 8.2.3100
Problem:    Vim9: no error when using type with unknown number of arguments.
Solution:   Do not ignore argument count of -1. (closes #8492)
Files:      src/vim9type.c, src/evalfunc.c, src/proto/evalfunc.pro,
            src/testdir/test_vim9_assign.vim, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_func.vim

Patch 8.2.3101
Problem:    Missing function prototype for vim_round().
Solution:   Add the prototype.
Files:      src/proto/float.pro

Patch 8.2.3102 (after 8.2.3097)
Problem:    Test for crash fix does not fail without the fix.
Solution:   Adjust the test sequence. (closes #8506)
Files:      src/testdir/test_swap.vim

Patch 8.2.3103 (after 8.2.3102)
Problem:    Swap test may fail on some systems when jobs take longer to exit.
Solution:   Use different file names.
Files:      src/testdir/test_swap.vim

Patch 8.2.3104
Problem:    Vim9: unspecified function type causes type error.
Solution:   Don't check type when min_argcount is negative. (issue #8492)
Files:      src/globals.h, src/vim9type.c, src/testdir/test_vim9_assign.vim

Patch 8.2.3105
Problem:    Vim9: type of partial is wrong when it has arguments.
Solution:   Subtract arguments from the count. (issue #8492)
Files:      src/vim9type.c, src/userfunc.c, src/testdir/test_vim9_assign.vim

Patch 8.2.3106
Problem:    Vim9: confusing line number reported for error.
Solution:   Use the start line number for the store instruction.
            (closes #8488)
Files:      src/vim9compile.c, src/testdir/test_vim9_assign.vim

Patch 8.2.3107
Problem:    Vim9: error for arguments while type didn't specify arguments.
Solution:   Do not update that type to check when no argument count is
            specified. (closes #8492)
Files:      src/userfunc.c, src/testdir/test_vim9_assign.vim

Patch 8.2.3108
Problem:    Test for remote_foreground() fails. (Elimar Riesebieter)
Solution:   Check that $DISPLAY is set. (Christian Brabandt)
Files:      src/testdir/check.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.3109
