            Brabandt, closes #6203, closes #6198)
Files:      src/clipboard.c, src/testdir/test_global.vim

Patch 8.2.0908
Problem:    Crash when changing the function table while listing it.
Solution:   Bail out when the function table changes. (closes #6209)
Files:      src/userfunc.c, src/testdir/test_timers.vim

Patch 8.2.0909
Problem:    Cannot go back to the previous local directory.
Solution:   Add "tcd -" and "lcd -". (Yegappan Lakshmanan, closes #4362)
Files:      runtime/doc/editing.txt, src/filepath.c, src/ex_docmd.c,
            src/structs.h, src/testdir/test_cd.vim, src/window.c

Patch 8.2.0910
Problem:    Vim is not reproducibly buildable.
Solution:   Use the $SOURCE_DATE_EPOCH environment variable in configure.
            (James McCoy, closes #513)  Give a warning about using it.
Files:      src/config.h.in, src/config.mk.in, src/configure.ac,
            src/auto/configure, src/version.c, src/Makefile

Patch 8.2.0911
Problem:    Crash when opening a buffer for the cmdline window fails. (Chris
            Barber)
Solution:   Check do_ecmd() succeeds.  Reset got_int if "q" was used at the
            more prompt. (closes #6211)
Files:      src/ex_getln.c, src/testdir/test_cmdline.vim,
            src/testdir/dumps/Test_cmdwin_interrupted.dump

Patch 8.2.0912
Problem:    A few test cases for CJK formatting are disabled.
Solution:   Fix the tests and enable them. (closes #6212)
Files:      src/testdir/test_cjk_linebreak.vim

Patch 8.2.0913
Problem:    Code for resetting v:register is duplicated.
Solution:   Add reset_reg_var().
Files:      src/evalvars.c, src/proto/evalvars.pro, src/main.c, src/normal.c

Patch 8.2.0914
Problem:    MS-Windows: cannot specify a "modified by" text.
Solution:   Add MODIFIED_BY in the MSVC build file.  (Chen Lei, closes #1275)
Files:      src/Make_mvc.mak

Patch 8.2.0915
Problem:    Search() cannot skip over matches like searchpair() can.
Solution:   Add an optional "skip" argument. (Christian Brabandt, closes #861)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_syntax.vim,
            src/structs.h, src/evalvars.c, src/proto/evalvars.pro

Patch 8.2.0916
Problem:    Mapping with partly modifyOtherKeys code does not work.
Solution:   If there is no mapping with a separate modifier include the
            modifier in the key and then try mapping again. (closes #6200)
Files:      src/getchar.c, src/proto/getchar.pro, src/edit.c, src/term.c,
            src/proto/term.pro, src/testdir/test_termcodes.vim

Patch 8.2.0917
Problem:    Quickfix entries do not support a "note" type.
Solution:   Add support for "note". (partly by Yegappan Lakshmanan,
            closes #5527, closes #6216)
Files:      runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.2.0918
Problem:    Duplicate code for evaluating expression argument.
Solution:   Merge the code and make the use more flexible.
Files:      src/evalfunc.c, src/eval.c, src/proto/eval.pro, src/evalvars.c,
            src/proto/evalvars.pro, src/structs.h

Patch 8.2.0919
Problem:    Merging modifier for modifyOtherKeys is done twice.
Solution:   Remove the merging done in vgetc().
Files:      src/getchar.c, src/ex_getln.c

Patch 8.2.0920
Problem:    Writing viminfo fails with a circular reference.
Solution:   Use copyID to detect the cycle. (closes #6217)
Files:      src/testdir/test_viminfo.vim, src/viminfo.c

Patch 8.2.0921
Problem:    CTRL-W T in cmdline window causes trouble.
Solution:   Disallow CTRL-W T in the cmdline window.  Add more tests.
            (Naruhiko Nishino, closes #6219)
Files:      src/testdir/test_cmdline.vim, src/window.c

Patch 8.2.0922
Problem:    Search test fails.
Solution:   Remove failure tests for calls that no longer fail.
Files:      src/testdir/test_search.vim

Patch 8.2.0923
Problem:    Cmdline test is slow.
Solution:   Use WaitForAssert().
Files:      src/testdir/test_cmdline.vim

Patch 8.2.0924
Problem:    Cannot save and restore a register properly.
Solution:   Add getreginfo() and make setreg() accept a dictionary. (Andy
            Massimino, closes #3370)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/proto/register.pro, src/register.c,
            src/testdir/test_eval_stuff.vim, src/testdir/test_registers.vim

Patch 8.2.0925
Problem:    Getcompletion() does not return command line arguments.
Solution:   Add the "cmdline" option. (Shougo, closes #1140)
Files:      runtime/doc/eval.txt, src/cmdexpand.c,
            src/testdir/test_cmdline.vim

Patch 8.2.0926
Problem:    Cmdline test fails on Appveyor.
Solution:   Add CR to the commands. (Naruhiko Nishino, closes #6220)
Files:      src/testdir/test_cmdline.vim

Patch 8.2.0927
Problem:    Some sshconfig and ssdhconfig files are not recognized.
Solution:   Add filetype patterns.
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.0928
Problem:    Many type casts are used for vim_strnsave().
Solution:   Make the length argument size_t instead of int. (Ken Takata,
            closes #5633)  Remove some type casts.
Files:      src/misc2.c, src/proto/misc2.pro, src/autocmd.c, src/channel.c,
            src/cmdexpand.c, src/dict.c, src/diff.c, src/digraph.c,
            src/eval.c, src/evalfunc.c, src/highlight.c, src/syntax.c

Patch 8.2.0929
Problem:    v:register is not cleared after an operator was executed.
Solution:   Clear v:register after finishing an operator (Andy Massimino,
            closes #5305)
Files:      src/normal.c, src/testdir/test_registers.vim

Patch 8.2.0930
Problem:    Script filetype detection trips over env -S argument.
Solution:   Remove "-S" and "--ignore-environment". (closes #5013)
            Add tests.
Files:      runtime/scripts.vim, src/testdir/test_filetype.vim

Patch 8.2.0931
Problem:    Some remarks about BeOS remain.
Solution:   Remove BeOS remarks from the help and other files. (Emir Sarı,
            closes #6221)
Files:      READMEdir/README_extra.txt, runtime/doc/options.txt,
            runtime/doc/os_beos.txt, runtime/doc/os_vms.txt,
            runtime/doc/vi_diff.txt, src/INSTALL

Patch 8.2.0932
Problem:    Misspelling spelllang.
Solution:   Add an "l". (Dominique Pellé)
Files:      src/optionstr.c, src/proto/spell.pro, src/spell.c

Patch 8.2.0933
Problem:    'quickfixtextfunc' does not get window ID of location list.
Solution:   Add "winid" to the dict argument. (Yegappan Lakshmanan,
            closes #6222)
Files:      runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.2.0934
Problem:    Running lhelpgrep twice in a help window doesn't jump to the help
            topic.
Solution:   Check whether any window with the location list is present.
            (Yegappan Lakshmanan, closes #6215)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.2.0935
Problem:    Flattening a list with existing code is slow.
Solution:   Add flatten(). (Mopp, closes #3676)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/list.c, src/proto/list.pro, src/testdir/Make_all.mak,
            src/testdir/test_flatten.vim

Patch 8.2.0936
Problem:    Some terminals misinterpret the code for getting cursor style.
Solution:   Send a sequence to the terminal and check the result. (IWAMOTO
            Kouichi, closes #2126)  Merged with current code.
Files:      src/main.c, src/term.c, src/proto/term.pro,
            src/testdir/term_util.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_terminal.vim, src/testdir/test_startup_utf8.vim,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_01a.dump,
            src/testdir/dumps/Test_balloon_eval_term_02.dump,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.2.0937
Problem:    Asan failure in the flatten() test.
Solution:   Free the flattened list.
Files:      src/list.c

Patch 8.2.0938
Problem:    NFA regexp uses tolower() to compare ignore-case. (Thayne McCombs)
Solution:   Use utf_fold() when possible. (ref. neovim #12456)
Files:      src/macros.h, src/diff.c, src/regexp_nfa.c,
            src/testdir/test_regexp_utf8.vim

Patch 8.2.0939
Problem:    checking for term escape sequences is long and confusing
Solution:   Refactor code into separate functions.
Files:      src/term.c

Patch 8.2.0940 (after 8.2.0939)
Problem:    Build failure with tiny features.
Solution:   Add #ifdef.  Add UNUSED.  A bit more cleaning up.
Files:      src/term.c

Patch 8.2.0941
Problem:    Detecting terminal properties is unstructured.
Solution:   Add a table with terminal properties.  Set properties when a
            terminal is detected.
Files:      src/term.c

Patch 8.2.0942
Problem:    Expanding to local dir after homedir keeps "~/".
Solution:   Adjust modify_fname(). (Christian Brabandt, closes #6205,
            closes #5979)
Files:      src/filepath.c, src/testdir/test_fnamemodify.vim

Patch 8.2.0943
Problem:    Displaying ^M or ^J depends on current buffer.
Solution:   Pass the displayed buffer to transchar(). (closes #6225)
Files:      src/drawline.c, src/charset.c, src/proto/charset.pro,
            src/ex_cmds.c, src/gui_beval.c, src/message.c,
            src/testdir/test_display.vim,
            src/testdir/dumps/Test_display_unprintable_01.dump,
            src/testdir/dumps/Test_display_unprintable_02.dump

Patch 8.2.0944
Problem:    Xxd test leaves file behind.
Solution:   Delete the file "XXDfile". (Christian Brabandt, closes #6228)
Files:      src/testdir/test_xxd.vim

Patch 8.2.0945
Problem:    Cannot use "z=" when 'spell' is off.
Solution:   Make "z=" work even when 'spell' is off. (Christian Brabandt,
            Gary Johnson, closes #6227)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/spell.c,
            src/spellsuggest.c, src/testdir/test_spell.vim, src/globals.h

Patch 8.2.0946
Problem:    Cannot use "q" to cancel a number prompt.
Solution:   Recognize "q" instead of ignoring it.
Files:      src/misc1.c, src/testdir/test_functions.vim

Patch 8.2.0947
Problem:    Readdirex() doesn't handle broken link properly.
Solution:   Small fixes to readdirex(). (Christian Brabandt, closes #6226,
            closes #6213)
Files:      src/fileio.c, src/testdir/test_functions.vim

Patch 8.2.0948
Problem:    Spell test fails.
Solution:   Adjust expected text of the prompt.
Files:      src/testdir/test_spell.vim

Patch 8.2.0949
Problem:    Strptime() does not use DST.
Solution:   Set the tm_isdst field to -1. (Tomáš Janoušek, closes #6230)
Files:      src/time.c, src/testdir/test_functions.vim

Patch 8.2.0950
Problem:    Tagjump test fails.
Solution:   Adjust expected text of the prompt.
Files:      src/testdir/test_tagjump.vim

Patch 8.2.0951
Problem:    Search stat test has leftover from debugging.
Solution:   Remove line that writes a file. (Christian Brabandt, closes #6224)
Files:      src/testdir/test_search_stat.vim

Patch 8.2.0952
Problem:    No simple way to interrupt Vim.
Solution:   Add the SigUSR1 autocommand, triggered by SIGUSR1. (Jacob Hayes,
            closes #1718)
Files:      runtime/doc/autocmd.txt, src/vim.h, src/autocmd.c, src/getchar.c,
            src/globals.h, src/os_unix.c, src/testdir/test_autocmd.vim

Patch 8.2.0953
Problem:    Spell checking doesn't work for CamelCased words.
Solution:   Add the "camel" value in the new option 'spelloptions'.
            (closes #1235)
Files:      runtime/doc/options.txt, runtime/doc/spell.txt, src/optiondefs.h,
            src/option.h, src/option.c, src/buffer.c, src/optionstr.c,
            src/testdir/gen_opt_test.vim, src/testdir/test_spell.vim

Patch 8.2.0954
Problem:    Not all desktop files are recognized.
Solution:   Add the *.directory pattern. (Eisuke Kawashima, closes #3317)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.0955 (after 8.2.0953)
Problem:    Build fails.
Solution:   Add missing struct change.
Files:      src/structs.h

Patch 8.2.0956 (after 8.2.0953)
Problem:    Spell test fails.
Solution:   Add missing change the spell checking.
Files:      src/spell.c

Patch 8.2.0957
Problem:    Compiler warning for uninitialized variable. (Tony Mechelynck)
Solution:   Initialize one variable.
Files:      src/spell.c

Patch 8.2.0958
Problem:    Not sufficient testing for buffer writing.
Solution:   Add a few tests. (Yegappan Lakshmanan, closes #6238)
Files:      src/testdir/test_backup.vim, src/testdir/test_writefile.vim

Patch 8.2.0959
Problem:    Using 'quickfixtextfunc' is a bit slow.
Solution:   Process a list of entries. (Yegappan Lakshmanan, closes #6234)
Files:      runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.2.0960
Problem:    Cannot use :import in legacy Vim script.
Solution:   Support :import in any Vim script.
Files:      src/vim9script.c, src/evalvars.c, src/userfunc.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.0961
Problem:    MS-Windows: no completion for locales.
Solution:   Use the directories in $VIMRUNTIME/lang to complete locales.
            (Christian Brabandt, closes 36248)
Files:      src/cmdexpand.c, src/ex_cmds2.c, src/testdir/test_cmdline.vim

Patch 8.2.0962
Problem:    Terminal test sometimes hangs on Travis.
Solution:   Do show output for this test temporarily.
Files:      src/testdir/Makefile

Patch 8.2.0963
Problem:    Number increment/decrement does not work with 'virtualedit'.
Solution:   Handle coladd changing. (Christian Brabandt, closes #6240,
            closes #923)
Files:      runtime/doc/options.txt, runtime/doc/various.txt, src/ops.c,
            src/testdir/test_increment.vim

Patch 8.2.0964
Problem:    TextYankPost does not provide info about Visual selection.
Solution:   Add the 'visual' key in v:event. (closes #6249)
Files:      runtime/doc/autocmd.txt, src/register.c,
            src/testdir/test_autocmd.vim

Patch 8.2.0965
Problem:    Has_funcundefined() is not used.
Solution:   Delete the function. (Dominique Pellé, closes #6242)
Files:      src/autocmd.c, src/proto/autocmd.pro

Patch 8.2.0966
Problem:    'shortmess' flag "n" not used in two places.
Solution:   Make use of the "n" flag consistent. (Nick Jensen, closes #6245,
            closes #6244)
Files:      src/bufwrite.c, src/proto/bufwrite.pro, src/buffer.c,
            src/fileio.c, src/testdir/dumps/Test_popup_textprop_corn_5.dump,
            src/testdir/dumps/Test_start_with_tabs.dump

Patch 8.2.0967
Problem:    Unnecessary type casts for vim_strnsave().
Solution:   Remove the type casts.
Files:      src/evalvars.c, src/ex_cmds.c, src/ex_eval.c, src/fileio.c,
            src/filepath.c, src/findfile.c, src/highlight.c, src/if_ruby.c,
            src/insexpand.c, src/json.c, src/mark.c, src/memline.c,
            src/menu.c, src/misc1.c, src/ops.c, src/os_win32.c, src/regexp.c,
            src/regexp_bt.c, src/regexp_nfa.c, src/register.c, src/search.c,
            src/sign.c, src/syntax.c, src/term.c, src/terminal.c, src/undo.c,
            src/usercmd.c, src/userfunc.c, src/vim9compile.c, src/if_perl.xs

Patch 8.2.0968
Problem:    No proper testing of the 'cpoptions' flags.
Solution:   Add tests. (Yegappan Lakshmanan, closes #6251)
Files:      src/testdir/Make_all.mak, src/testdir/test_cpoptions.vim,
            src/testdir/test_edit.vim, src/testdir/test_normal.vim

Patch 8.2.0969
Problem:    Assert_equal() output for dicts is hard to figure out.
Solution:   Only show the different items.
Files:      src/testing.c, src/testdir/test_assert.vim

Patch 8.2.0970
Problem:    Terminal properties are not available in Vim script.
Solution:   Add the terminalprops() function.
Files:      src/term.c, src/proto/term.pro, src/evalfunc.c, src/main.c,
            src/testing.c, src/globals.h, src/testdir/test_termcodes.vim,
            runtime/doc/usr_41.txt, runtime/doc/eval.txt,
            runtime/doc/testing.txt

Patch 8.2.0971
Problem:    Build with tiny features fails.
Solution:   Add #ifdef.
Files:      src/term.c

Patch 8.2.0972
Problem:    Vim9 script variable declarations need a type.
Solution:   Make "let var: type" declare a script-local variable.
Files:      src/evalvars.c, src/vim9script.c, src/proto/vim9script.pro,
            src/globals.h, src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.0973
Problem:    Vim9: type is not checked when assigning to a script variable.
Solution:   Check the type.
Files:      src/evalvars.c, src/vim9script.c, src/proto/vim9script.pro,
            src/vim9compile.c, src/proto/vim9compile.pro,
            src/testdir/test_vim9_script.vim

Patch 8.2.0974
Problem:    Vim9: memory leak when script var has wrong type.
Solution:   Free the variable name.
Files:      src/vim9script.vim

Patch 8.2.0975
Problem:    Vim9: script variable does not accept optional s: prefix.
Solution:   Adjust the accepted syntax.
Files:      src/vim9script.c, src/testdir/test_vim9_script.vim

Patch 8.2.0976
Problem:    Some 'cpoptions' not tested.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #6253)
Files:      src/testdir/test_cd.vim, src/testdir/test_charsearch.vim,
            src/testdir/test_cpoptions.vim, src/testdir/test_normal.vim

Patch 8.2.0977
Problem:    t_8u is made empty for the wrong terminals. (Dominique Pelle)
Solution:   Invert the check for TPR_YES. (closes #6254)
Files:      src/term.c, src/testdir/test_termcodes.vim

Patch 8.2.0978
Problem:    Leaking memory in termcodes test.
Solution:   Set t_8u with set_option_value().
Files:      src/term.c

Patch 8.2.0979
Problem:    A couple of screendump tests fail.
Solution:   Do not redraw when clearing t_8u.
Files:      src/term.c

Patch 8.2.0980
Problem:    Raku file extension not recognized. (Steven Penny)
Solution:   Recognize .raku and .rakumod. (closes #6255)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.0981
Problem:    Vim9: cannot compile "[var, var] = list".
Solution:   Implement list assignment.
Files:      src/vim9compile.c, src/vim9.h, src/vim9execute.c, src/evalvars.c,
            src/proto/evalvars.pro, src/eval.c, src/testdir/test_vim9_script.vim

Patch 8.2.0982
Problem:    Insufficient testing for reading/writing files.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #6257)
            Add "ui_delay" to test_override() and use it for the CTRL-O test.
Files:      src/testing.c, src/globals.h, src/ui.c, runtime/doc/testing.txt,
            src/testdir/test_autocmd.vim, src/testdir/test_edit.vim,
            src/testdir/test_filechanged.vim, src/testdir/test_writefile.vim

Patch 8.2.0983
Problem:    SConstruct file type not recognized.
Solution:   Use python for SConstruct files. (Roland Hieber)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.0984
Problem:    Not using previous window when closing a shell popup window.
Solution:   Use "prevwin" if it was set. (closes #6267)
Files:      src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.2.0985
Problem:    Simplify() does not remove slashes from "///path".
Solution:   Reduce > 2 slashes to one. (closes #6263)
Files:      src/findfile.c, src/testdir/test_functions.vim

Patch 8.2.0986 (after 8.2.0985)
Problem:    MS-Windows: functions test fails.
Solution:   Only simplify ///path on Unix.
Files:      src/testdir/test_functions.vim

Patch 8.2.0987
Problem:    Vim9: cannot assign to [var; var].
Solution:   Assign rest of items to a list.
Files:      src/vim9.h, src/vim9compile.c, src/vim9execute.c, src/list.c,
            src/proto/list.pro, src/eval.c, src/testdir/test_vim9_script.vim

Patch 8.2.0988
Problem:    Getting directory contents is always case sorted.
Solution:   Add sort options and v:collate. (Christian Brabandt, closes #6229)
Files:      runtime/doc/eval.txt, runtime/doc/mlang.txt, src/auto/configure,
            src/cmdexpand.c, src/config.h.in, src/configure.ac,
            src/evalfunc.c, src/evalvars.c, src/ex_cmds2.c, src/fileio.c,
            src/filepath.c, src/globals.h, src/proto/fileio.pro,
            src/testdir/test_cmdline.vim, src/testdir/test_functions.vim,
            src/vim.h

Patch 8.2.0989
Problem:    Crash after resizing a terminal window. (August Masquelier)
Solution:   Add check for valid row in libvterm. (closes #6273)
Files:      src/libvterm/src/state.c, src/libvterm/src/screen.c

Patch 8.2.0990 (after 8.2.0988)
Problem:    Using duplicate error number.
Solution:   Use an unused error number.  Add a test for it.
Files:      src/globals.h, src/testdir/test_functions.vim

Patch 8.2.0991
Problem:    Cannot get window type for autocmd and preview window.
Solution:   Add types to win_gettype(). (Yegappan Lakshmanan, closes #6277)
Files:      runtime/doc/eval.txt, src/evalwindow.c,
            src/testdir/test_autocmd.vim, src/testdir/test_preview.vim

Patch 8.2.0992
Problem:    Vim9: crash when using :import in the Vim command.
Solution:   Give an error when using :import outside of a script.
            (closes #6271)
Files:      src/vim9script.c, src/testdir/test_vim9_script.vim,
            src/testdir/term_util.vim

Patch 8.2.0993
Problem:    Vim9 script test fails with normal features.
Solution:   Use :func instead of :def for now.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.0994
Problem:    Vim9: missing function causes compilation error.
Solution:   Call test function indirectly.
Files:      src/testdir/test_vim9_script.vim

Patch 8.2.0995
Problem:    Insufficient testing for the readdir() sort option.
Solution:   Add a few more tests. (Christian Brabandt, closes #6278)
Files:      src/testdir/test_functions.vim

Patch 8.2.0996
Problem:    Using "aucmdwin" in win_gettype() is not ideal.
Solution:   Rename to "autocmd".
Files:      runtime/doc/eval.txt, src/evalwindow.c,
            src/testdir/test_autocmd.vim

Patch 8.2.0997
Problem:    Cannot execute a register containing line continuation.
Solution:   Concatenate lines where needed. (Yegappan Lakshmanan,
            closes #6272)
Files:      runtime/doc/repeat.txt, src/register.c,
            src/testdir/test_registers.vim

Patch 8.2.0998
Problem:    Not all tag code is tested.
Solution:   Add a few more test cases. (Yegappan Lakshmanan, closes #6284)
Files:      src/testdir/test_tagjump.vim

Patch 8.2.0999
Problem:    Moving to next sentence gets stuck on quote.
Solution:   When moving to the next sentence doesn't result in moving, advance
            a character and try again. (closes #6291)
Files:      src/textobject.c, src/testdir/test_textobjects.vim

Patch 8.2.1000
Problem:    Get error when leaving Ex mode with :visual and a CmdLineEnter
            autocommand was used.
Solution:   Reset ex_pressedreturn. (closes #6293)
Files:      src/ex_docmd.c, src/testdir/test_ex_mode.vim

Patch 8.2.1001
Problem:    Vim9: crash with nested "if" and assignment.
Solution:   Skip more of the assignment.  Do not set ctx_skip when code is
            reachable.
Files:      src/vim9compile.c, src/testdir/test_vim9_script.vim

Patch 8.2.1002
Problem:    Test may fail when run directly.
Solution:   Check if g:run_nr exists. (Christian Brabandt, closes #6285)
Files:      src/testdir/term_util.vim

Patch 8.2.1003
Problem:    Vim9: return type of sort() is too generic.
Solution:   Get type from the first argument. (closes #6292)
Files:      src/evalfunc.c, src/testdir/test_vim9_func.vim

Patch 8.2.1004
Problem:    Line numbers below filler lines not always updated.
Solution:   Don't break out of the win_line() loop too early. (Christian
            Brabandt, closes #6294, closes #6138)
Files:      src/drawline.c, src/testdir/dumps/Test_diff_rnu_01.dump,
            src/testdir/dumps/Test_diff_rnu_02.dump,
            src/testdir/dumps/Test_diff_rnu_03.dump,
            src/testdir/test_diffmode.vim

Patch 8.2.1005
Problem:    Vim9: using TRUE/FALSE/MAYBE for ctx_skip is confusing.
Solution:   Use an enum value.
Files:      src/vim9compile.c, src/testdir/test_vim9_disassemble.vim

Patch 8.2.1006
Problem:    Vim9: require unnecessary return statement.
Solution:   Improve the use of the had_return flag. (closes #6270)
Files:      src/vim9compile.c, src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_func.vim

Patch 8.2.1007
Problem:    Completion doesn't work after ":r ++arg !".
Solution:   Skip over "++arg". (Christian Brabandt, closes #6275,
            closes #6258)
Files:      src/cmdexpand.c, src/testdir/test_cmdline.vim

Patch 8.2.1008
Problem:    Vim9: no test for disassembling newly added instructions.
Solution:   Add a function and check disassembly.
Files:      src/testdir/test_vim9_disassemble.vim

Patch 8.2.1009
Problem:    Vim9: some failures not checked for.
Solution:   Add test cases.  Remove unused code.
Files:      src/testdir/test_vim9_script.vim, src/vim9execute.c

Patch 8.2.1010
Problem:    Build failure in libvterm with debug enabled. (John Little)
Solution:   Use "->" instead of ".".
Files:      src/libvterm/src/state.c

Patch 8.2.1011
Problem:    Vim9: some code not tested.
Solution:   Add a few more test cases.  Reorder checks for clearer error.
            Remove unreachable code.
Files:      src/evalvars.c, src/vim9script.c, src/vim9execute.c,
            src/proto/vim9script.pro, src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1012
Problem:    Vim9: cannot declare single character script variables.
Solution:   Don't see "b:", "s:", etc. as namespace.  Fix item size of
            sn_var_vals.
Files:      src/vim9script.c, src/scriptfile.c,
            src/testdir/test_vim9_script.vim

Patch 8.2.1013
Problem:    Channel tests can be a bit flaky.
Solution:   Set the g:test_is_flaky flag in SetUp().
Files:      src/testdir/test_channel.vim

Patch 8.2.1014
Problem:    Using "name" for a string result is confusing.
Solution:   Rename to "end".
Files:      src/typval.c

Patch 8.2.1015
Problem:    Popup filter gets key with modifier prepended when using
            modifyOtherKeys.
Solution:   Remove the shift modifier when it is included in the key, also
            when the Alt or Meta modifier is used.
Files:      src/term.c, src/misc2.c, src/testdir/test_popupwin.vim

Patch 8.2.1016
Problem:    Vim9: test fails when channel feature is missing.
Solution:   Process an :if command when skipping
Files:      src/vim9compile.c

Patch 8.2.1017
Problem:    Appveyor output doesn't show MinGW console features.
Solution:   List the features of the console build.
Files:      ci/appveyor.bat

Patch 8.2.1018
Problem:    Typo in enum value. (James McCoy)
Solution:   Fix the typo.
Files:      src/vim9compile.c

Patch 8.2.1019
Problem:    Mapping <M-S-a> does not work in the GUI.
Solution:   Move the logic to remove the shift modifier to
            may_remove_shift_modifier() and also use it in the GUI.
Files:      src/gui_gtk_x11.c, src/misc2.c, src/proto/misc2.pro, src/term.c

Patch 8.2.1020
Problem:    Popupwin test fails in the GUI.
Solution:   Send GUI byte sequence for <C-S-a>.
Files:      src/testdir/test_popupwin.vim

Patch 8.2.1021
Problem:    Ruby interface not tested enough.
Solution:   Add a couple more tests. (Dominique Pellé, closes #6301)
Files:      src/testdir/test_ruby.vim

Patch 8.2.1022
Problem:    Various parts of code not covered by tests.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #6300)
Files:      src/testdir/test_blob.vim, src/testdir/test_cpoptions.vim,
            src/testdir/test_digraph.vim, src/testdir/test_edit.vim,
            src/testdir/test_iminsert.vim, src/testdir/test_paste.vim,
            src/testdir/test_prompt_buffer.vim,
            src/testdir/test_selectmode.vim, src/testdir/test_tabpage.vim,
            src/testdir/test_tagjump.vim, src/testdir/test_textformat.vim,
            src/testdir/test_viminfo.vim, src/testdir/test_virtualedit.vim,
            src/testdir/test_visual.vim

Patch 8.2.1023
Problem:    Vim9: redefining a function uses a new index every time.
Solution:   When redefining a function clear the contents and re-use the
            index.
Files:      src/vim9compile.c, src/proto/vim9compile.pro, src/userfunc.c,
            src/structs.h, src/eval.c, src/evalvars.c, src/vim9execute.c

Patch 8.2.1024
Problem:    Vim9: no error for using "let g:var = val".
Solution:   Add an error.
Files:      src/evalvars.c, src/globals.h, src/structs.h, src/vim9compile.c,
            src/scriptfile.c, src/userfunc.c, src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_func.vim

Patch 8.2.1025
Problem:    Tabpage menu and tabline not sufficiently tested.
Solution:   Add tests. (Yegappan Lakshmanan, closes #6307)
Files:      src/testdir/test_digraph.vim, src/testdir/test_tabpage.vim

Patch 8.2.1026
Problem:    Vim9: cannot break the line after "->".
Solution:   Check for a continuation line after "->", "[" and ".".  Ignore
            trailing white space.
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1027
Problem:    GUI: multibyte characters do not work in a terminal.
Solution:   Do not assume a key is one byte. (closes #6304)
Files:      src/gui_gtk_x11.c, src/gui_x11.c

Patch 8.2.1028
Problem:    Vim9: no error for declaring buffer, window, etc. variable.
Solution:   Give an error.  Unify the error messages.
Files:      src/evalvars.c, src/globals.h, src/vim9compile.c,
            src/proto/vim9compile.pro, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_script.vim

Patch 8.2.1029
Problem:    Vim9: cannot chain function calls with -> at line start.
Solution:   Peek ahead for a following line starting with "->". (closes #6306)
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1030
Problem:    Reducing size of a terminal window may cause a crash.
Solution:   Make sure the row and column don't become negative. (closes #6273)
Files:      src/libvterm/src/state.c, src/libvterm/src/screen.c

Patch 8.2.1031
Problem:    Build failure with Perl5.32.
Solution:   Define a few more functions. (Felix Yan, closes #6310)
Files:      src/if_perl.xs

Patch 8.2.1032
Problem:    Error message for declaring a variable cannot be translated.
Solution:   Enclose in _().  Make environment variable a separate message.
Files:      src/globals.h, src/vim9compile.c

Patch 8.2.1033
Problem:    Not easy to read the test time in the test output.
Solution:   Align the times.  Make slow tests bold.
Files:      src/testdir/runtest.vim

Patch 8.2.1034
Problem:    Compiler warning for uninitialized variables.
Solution:   Add initializations. (John Marriott)
Files:      src/vim9compile.c

Patch 8.2.1035
Problem:    setreg() does not always clear the register.
Solution:   Clear the register if the dict argument is empty. (Andy Massimino,
            closes #3370)
Files:      src/evalfunc.c, src/testdir/test_registers.vim

Patch 8.2.1036
Problem:    Popupwin test fails sometimes.
Solution:   Use WaitForAssert() instead of a sleep.
Files:      src/testdir/test_popupwin.vim

Patch 8.2.1037
Problem:    Vim9: crash when using line continuation inside :def.
Solution:   Check for no more lines available.
Files:      src/vim9compile.c, src/testdir/test_vim9_func.vim

Patch 8.2.1038
Problem:    Popupwin test fails.
Solution:   Fix WaitForAssert() argument.
Files:      src/testdir/test_popupwin.vim

Patch 8.2.1039
Problem:    Cannot put NUL byte on clipboard.
Solution:   Use the text length. (Christian Brabandt, closes #6312,
            closes #6149)
Files:      src/winclip.c, src/testdir/test_registers.vim

Patch 8.2.1040
Problem:    Not enough testing for movement commands.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #6313)
Files:      src/testdir/test_cursor_func.vim, src/testdir/test_functions.vim,
            src/testdir/test_gf.vim, src/testdir/test_normal.vim,
            src/testdir/test_options.vim, src/testdir/test_quickfix.vim

Patch 8.2.1041
Problem:    Test summary is missing executed count.
Solution:   Adjust pattern used for counting.
Files:      src/testdir/summarize.vim

Patch 8.2.1042
Problem:    Vim9: cannot put an operator on the next line.
Solution:   Require a colon before a range to see if that causes problems.
Files:      runtime/doc/vim9.txt, src/vim9compile.c, src/ex_docmd.c,
            src/globals.h, src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1043
Problem:    %a item in 'statusline' not tested.
Solution:   Add a test. (Dominique Pellé, closes #6318)
Files:      src/testdir/test_statusline.vim

Patch 8.2.1044
Problem:    Not all systemd file types are recognized.
Solution:   Match several more files. (Guido Cella, closes #6319)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.1045
Problem:    Vim9: line break before operator does not work.
Solution:   Peek the next line for an operator.
Files:      src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1046
Problem:    Insufficient tests for src/buffer.c.
Solution:   Add more tests.  Move comments related tests to a separate file.
            (Yegappan Lakshmanan, closes #6325)
Files:      src/testdir/Make_all.mak, src/testdir/test_buffer.vim,
            src/testdir/test_cmdline.vim, src/testdir/test_comments.vim,
            src/testdir/test_normal.vim, src/testdir/test_textformat.vim

Patch 8.2.1047
Problem:    Vim9: script cannot use line continuation like in a :def function.
Solution:   Pass the getline function pointer to the eval() functions.  Use it
            for addition and multiplication operators.
Files:      src/vim.h, src/structs.h, src/globals.h, src/ex_eval.c,
            src/eval.c, src/proto/eval.pro, src/dict.c, src/evalfunc.c,
            src/evalvars.c, src/list.c, src/userfunc.c, src/scriptfile.c,
            src/proto/scriptfile.pro, src/testdir/test_vim9_expr.vim

Patch 8.2.1048 (after 8.2.1047)
Problem:    Build failure without the eval feature.
Solution:   Add dummy typedef.
Files:      src/structs.h

Patch 8.2.1049 (after 8.2.1047)
Problem:    Vim9: leaking memory when using continuation line.
Solution:   Keep a pointer to the continuation line in evalarg_T.  Centralize
            checking for a next command.
Files:      src/structs.h, src/eval.c, src/proto/eval.pro, src/beval.c,
            src/buffer.c, src/clientserver.c, src/evalvars.c, src/ex_docmd.c,
            src/ex_eval.c, src/filepath.c, src/findfile.c, src/fold.c,
            src/globals.h, src/if_ole.cpp, src/if_perl.xs, src/if_tcl.c,
            src/map.c, src/quickfix.c, src/regexp.c, src/register.c,
            src/screen.c, src/userfunc.c

Patch 8.2.1050 (after 8.2.1049)
Problem:    Missing change in struct.
Solution:   Add missing change.
Files:      src/ex_cmds.h

Patch 8.2.1051
Problem:    Crash when changing a list while using reduce() on it.
Solution:   Lock the list. (closes #6330)
Files:      src/list.c, src/testdir/test_listdict.vim

Patch 8.2.1052
Problem:    Build failure with older compilers.
Solution:   Move declaration to start of block.
Files:      src/eval.c

Patch 8.2.1053
Problem:    Insufficient testing for 'statusline' and 'tabline'.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #6333)
Files:      src/testdir/test_autocmd.vim, src/testdir/test_statusline.vim,
            src/testdir/test_tabline.vim

Patch 8.2.1054
Problem:    Not so easy to pass a lua function to Vim.
Solution:   Convert a Lua function and closure to a Vim funcref. (Prabir
            Shrestha, closes #6246)
Files:      runtime/doc/if_lua.txt, src/if_lua.c, src/proto/userfunc.pro,
            src/structs.h, src/testdir/test_lua.vim, src/userfunc.c

Patch 8.2.1055
Problem:    No filetype set for pacman config files.
Solution:   Recognize pacman.conf and *.hook. (Guido Cella, closes #6335)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.1056
Problem:    Wrong display when mixing match conceal and syntax conceal.
Solution:   Adjust how conceal flags are used. (closes #6327, closes #6303)
Files:      src/drawline.c, src/highlight.c,
            src/testdir/test_matchadd_conceal.vim

Patch 8.2.1057 (after 8.2.1054)
Problem:    Cannot build with dynamic Lua.
Solution:   Add dll variables.
Files:      src/if_lua.c

Patch 8.2.1058
Problem:    Multiline conceal causes display errors.
Solution:   Do not allow conceal cross over EOL. (closes #6326, closes #4854,
            closes #6302)
Files:      src/drawline.c, src/testdir/test_conceal.vim,
            src/testdir/test_diffmode.vim

Patch 8.2.1059
Problem:    Crash when using :tabonly in an autocommand. (Yegappan Lakshmanan)
Solution:   Do not allow the autocommand window to be closed.
Files:      src/ex_docmd.c, src/window.c, src/globals.h,
            src/testdir/test_autocmd.vim

Patch 8.2.1060
Problem:    Not all elinks files are recognized.
Solution:   Just check for "elinks.conf". (Guido Cella, closes #6337)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.1061
Problem:    Insufficient testing for src/window.c.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #6345)
Files:      src/testdir/test_excmd.vim, src/testdir/test_gf.vim,
            src/testdir/test_options.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_tabpage.vim,
            src/testdir/test_tagjump.vim, src/testdir/test_window_cmd.vim,
            src/window.c

Patch 8.2.1062
Problem:    Vim9: no line break allowed inside "cond ? val1 : val2".
Solution:   Check for operator after line break.
Files:      src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1063
Problem:    Vim9: no line break allowed before || or &&.
Solution:   Check for operator after line break.
Files:      src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1064
Problem:    Vim9: no line break allowed before comparators.
Solution:   Check for comparator after line break.
Files:      src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1065
Problem:    Vim9: no line break allowed inside a list.
Solution:   Handle line break inside a list in Vim9 script.
Files:      src/eval.c, src/proto/eval.pro, src/list.c, src/proto/list.pro,
            src/vim9compile.c, src/testdir/test_vim9_expr.vim,
            src/testdir/test_arglist.vim

Patch 8.2.1066
Problem:    Lua arrays are zero based.
Solution:   Make Lua arrays one based. (Prabir Shrestha, closes #6347)
            Note: this is not backwards compatible.
Files:      runtime/doc/if_lua.txt, src/if_lua.c, src/testdir/test_lua.vim

Patch 8.2.1067
Problem:    Expression "!expr->func()" does not work.
Solution:   Apply plus and minus earlier. (closes #6348)
Files:      src/eval.c, src/proto/eval.pro, src/evalvars.c, src/userfunc.c,
            src/testdir/test_expr.vim, src/testdir/test_vim9_expr.vim

Patch 8.2.1068
Problem:    Vim9: no line break allowed inside a dict.
Solution:   Handle line break inside a dict in Vim9 script.
Files:      src/eval.c, src/dict.c, src/proto/dict.pro,
            src/vim9compile.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1069
Problem:    Vim9: fail to check for white space in list.
Solution:   Add check for white space.
Files:      src/list.c

Patch 8.2.1070
Problem:    Vim9: leaking memory when lacking white space in dict.
Solution:   Clear the typval.
Files:      src/dict.c

Patch 8.2.1071
Problem:    Vim9: no line break allowed inside a lambda.
Solution:   Handle line break inside a lambda in Vim9 script.
Files:      src/eval.c, src/proto/eval.pro, src/evalvars.c, src/userfunc.c,
            src/proto/userfunc.pro, src/popupwin.c, src/vim9compile.c,
            src/ex_eval.c, src/globals.h, src/structs.h,
            src/testdir/test_vim9_expr.vim

Patch 8.2.1072
Problem:    Missing libvterm test.
Solution:   Sync with libvterm revision 768.
Files:      src/libvterm/src/state.c, src/libvterm/t/63screen_resize.test

Patch 8.2.1073
Problem:    Vim9: no line break allowed in () expression.
Solution:   Skip a line break.
Files:      src/eval.c, src/testdir/test_vim9_expr.vim

Patch 8.2.1074
Problem:    Vim9: no line break allowed after some operators.
Solution:   Skip a line break after the operator.  Add
            eval_may_get_next_line() to simplify checking for a line break.
Files:      src/eval.c, src/proto/eval.pro, src/dict.c, src/list.c,
