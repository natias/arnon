            src/globals.h, src/testdir/popupbounce.vim, Filelist

Patch 8.1.1518
Problem:    Crash when setting 'columns' while a popup is visible.
Solution:   Recompute all positions when clearing the screen. (closes #4467)
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_04a.dump

Patch 8.1.1519
Problem:    'backupskip' may contain duplicates.
Solution:   Add the P_NODUP flag. (Tom Ryder)
Files:	    src/option.c, src/testdir/test_options.vim

Patch 8.1.1520
Problem:    Popup windows are ignored when dealing with mouse position
Solution:   Find the mouse position inside a popup window.  Allow for modeless
            selection.
Files:	    src/ui.c, src/proto/ui.pro, src/popupwin.c,
            src/proto/popupwin.pro, src/screen.c, src/beval.c, src/edit.c,
            src/evalfunc.c, src/gui.c, src/normal.c, src/structs.h

Patch 8.1.1521
Problem:    When a popup window is closed the buffer remains.
Solution:   Wipe out the buffer.
Files:	    src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1522
Problem:    Popup_notification() not implemented yet.
Solution:   Implement it.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/evalfunc.c,
            src/structs.h, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt
            src/testdir/dumps/Test_popupwin_notify_01.dump,
            src/testdir/dumps/Test_popupwin_notify_02.dump

Patch 8.1.1523
Problem:    Cannot show range of buffer lines in popup window.
Solution:   Add the "firstline" property. (closes #4523)
Files:	    src/popupwin.c, src/structs.h, runtime/doc/popup.txt,
            src/testdir/test_popupwin.vim,
            testdir/dumps/Test_popupwin_firstline.dump

Patch 8.1.1524
Problem:    Tests are silently skipped.
Solution:   Throw an exception for skipped tests in more places.
Files:	    src/testdir/test_assert.vim, src/testdir/test_paste.vim,
            src/testdir/shared.vim, src/testdir/test_crypt.vim,
            src/testdir/test_cscope.vim, src/testdir/test_digraph.vim,
            src/testdir/test_float_func.vim, src/testdir/test_gui.vim,
            src/testdir/test_gui_init.vim, src/testdir/test_history.vim,
            src/testdir/test_langmap.vim, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim, src/testdir/test_lua.vim,
            src/testdir/test_makeencoding.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_memory_usage.vim, src/testdir/test_menu.vim,
            src/testdir/test_mksession.vim,
            src/testdir/test_mksession_utf8.vim,
            src/testdir/test_netbeans.vim, src/testdir/test_paste.vim,
            src/testdir/test_perl.vim, src/testdir/test_profile.vim,
            src/testdir/test_prompt_buffer.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_pyx2.vim,
            src/testdir/test_pyx3.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_quotestar.vim, src/testdir/test_reltime.vim,
            src/testdir/test_ruby.vim, src/testdir/test_sha256.vim,
            src/testdir/test_shortpathname.vim, src/testdir/test_signals.vim,
            src/testdir/test_signs.vim, src/testdir/test_spell.vim,
            src/testdir/test_syntax.vim, src/testdir/test_tcl.vim,
            src/testdir/test_termcodes.vim, src/testdir/test_terminal.vim,
            src/testdir/test_terminal_fail.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_textprop.vim,
            src/testdir/test_timers.vim, src/testdir/test_vartabs.vim,
            src/testdir/test_winbar.vim, src/testdir/test_windows_home.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1525
Problem:    Cannot move a popup window with the mouse.
Solution:   Add the "drag" property and make it possible to drag a popup
            window by its border.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/ui.c,
            src/window.c, src/proto/window.pro, runtime/doc/popup.txt

Patch 8.1.1526
Problem:    No numerical value for the patchlevel.
Solution:   Add v:versionlong.
Files:	    src/version.c, src/eval.c, src/vim.h, runtime/doc/eval.txt,
            src/testdir/test_eval_stuff.vim

Patch 8.1.1527
Problem:    When moving a popup window over the command line it is not
            redrawn.
Solution:   Redraw the command line. Move popup redrawing code to the popupwin
            file.
Files:	    src/screen.c, src/proto/screen.pro, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump

Patch 8.1.1528
Problem:    Popup_any_visible() is unused.
Solution:   Remove it.
Files:	    src/popupwin.c, src/proto/popupwin.pro

Patch 8.1.1529
Problem:    Libcanberra is linked with even when not used.
Solution:   Have configure check for libcanberra only when wanted.
            (suggestions by Libor Bukata)
Files:	    src/feature.h, src/configure.ac, src/auto/configure, src/Makefile

Patch 8.1.1530
Problem:    Travis config is not optimal.
Solution:   Remove system conditions.  Do not use excluding matrix. Cache OSX
            results. (Ozaki Kiichi, closes #4521)
Files:	    .travis.yml

Patch 8.1.1531
Problem:    Clipboard type name is inconsistent.
Solution:   Rename VimClipboard to Clipboard_T.
Files:	    src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro, src/gui_mac.c,
            src/proto/gui_mac.pro, src/gui_x11.c, src/proto/gui_x11.pro,
            src/ops.c, src/proto/ops.pro, src/os_qnx.c, src/proto/os_qnx.pro,
            src/os_unix.c, src/proto/os_unix.pro, src/ui.c, src/proto/ui.pro,
            src/winclip.c, src/proto/winclip.pro, src/globals.h, src/proto.h

Patch 8.1.1532 (after 8.1.1531)
Problem:    Build fails.
Solution:   Add missing changes.
Files:	    src/vim.h

Patch 8.1.1533
Problem:    GUI build fails on Mac.
Solution:   Change VimClipboard type in non-C file.
Files:	    src/os_macosx.m

Patch 8.1.1534
Problem:    Modeless selection in popup window selects too much.
Solution:   Restrict the selection to inside of the popup window.
Files:	    src/vim.h, src/ui.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_select_01.dump,
            src/testdir/dumps/Test_popupwin_select_02.dump

Patch 8.1.1535 (after 8.1.1534)
Problem:    Popup select test fails on Mac.
Solution:   Skip test if clipboard feature not available.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1536 (after 8.1.1534)
Problem:    Popup select test still fails on Mac.
Solution:   Set 'clipboard' to "autoselect"
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1537
Problem:    Using "tab" for popup window can be confusing.
Solution:   Use "tabpage". (Hirohito Higashi, closes #4532)
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1538
Problem:    Cannot specify highlighting for notifications.
Solution:   Use the PopupNotification group if it exists. Add a minimal width
            to notifications.
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_notify_01.dump,
            src/testdir/dumps/Test_popupwin_notify_02.dump

Patch 8.1.1539
Problem:    Not easy to define a variable and lock it.
Solution:   Add ":const". (Ryuichi Hayashida, closes #4541)
Files:	    runtime/doc/eval.txt, src/eval.c, src/ex_cmdidxs.h, src/ex_cmds.h,
            src/proto/eval.pro, src/testdir/Make_all.mak,
            src/testdir/test_const.vim

Patch 8.1.1540 (after 8.1.1539)
Problem:    Cannot build without the +eval feature.
Solution:   Define ex_const if needed.
Files:	    src/ex_docmd.c

Patch 8.1.1541
Problem:    Check for ASAN is not reliable.
Solution:   Check the version output. (Dominique Pelle, closes #4543)
Files:	    src/testdir/test_memory_usage.vim

Patch 8.1.1542
Problem:    An OptionSet autocommand does not get enough info.
Solution:   Add v:option_command, v:option_oldlocal and v:option_oldglobal.
            (Latrice Wilgus, closes #4118)
Files:	    runtime/doc/autocmd.txt, runtime/doc/eval.txt,
            runtime/doc/version8.txt, src/eval.c, src/option.c, src/structs.h,
            src/testdir/test_autocmd.vim, src/vim.h

Patch 8.1.1543
Problem:    Const test fails with small features.
Solution:   Don't unlet non-existing variables.
Files:	    src/testdir/test_const.vim

Patch 8.1.1544
Problem:    Some balloon tests don't run when they can.
Solution:   Split GUI balloon tests off into a separate file. (Ozaki Kiichi,
            closes #4538)  Change the feature check into a command for
            consistency.
Files:	    Filelist, src/testdir/Make_all.mak, src/testdir/check.vim,
            src/testdir/test_arabic.vim, src/testdir/test_balloon.vim,
            src/testdir/test_balloon_gui.vim, src/testdir/test_crypt.vim,
            src/testdir/test_cscope.vim, src/testdir/test_digraph.vim,
            src/testdir/test_float_func.vim, src/testdir/test_gui.vim,
            src/testdir/test_gui_init.vim, src/testdir/test_history.vim,
            src/testdir/test_langmap.vim, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim, src/testdir/test_lua.vim,
            src/testdir/test_makeencoding.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_memory_usage.vim, src/testdir/test_menu.vim,
            src/testdir/test_mksession.vim,
            src/testdir/test_mksession_utf8.vim,
            src/testdir/test_netbeans.vim, src/testdir/test_paste.vim,
            src/testdir/test_perl.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_profile.vim, src/testdir/test_prompt_buffer.vim,
            src/testdir/test_python2.vim, src/testdir/test_python3.vim,
            src/testdir/test_pyx2.vim, src/testdir/test_pyx3.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_reltime.vim, src/testdir/test_ruby.vim,
            src/testdir/test_sha256.vim, src/testdir/test_shortpathname.vim,
            src/testdir/test_signals.vim, src/testdir/test_signs.vim,
            src/testdir/test_spell.vim, src/testdir/test_syntax.vim,
            src/testdir/test_tcl.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_terminal.vim, src/testdir/test_terminal_fail.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_textprop.vim,
            src/testdir/test_timers.vim, src/testdir/test_vartabs.vim,
            src/testdir/test_winbar.vim, src/testdir/test_windows_home.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1545
Problem:    When the screen is too small there is no message about that.
            (Daniel Hahler)
Solution:   Do not use :cquit. (closes #4534)
Files:	    src/testdir/runtest.vim

Patch 8.1.1546
Problem:    In some tests 'tags' is set but not restored. (Daniel Hahler)
Solution:   Restore 'tags'. (closes #4535)
Files:	    src/testdir/test_autocmd.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_options.vim, src/testdir/test_tagcase.vim,
            src/testdir/test_tagjump.vim, src/testdir/test_taglist.vim

Patch 8.1.1547
Problem:    Functionality of bt_nofile() is confusing.
Solution:   Split into bt_nofile() and bt_nofilename().
Files:	    src/buffer.c, src/proto/buffer.pro, src/evalfunc.c, src/ex_cmds.c,
            src/ex_docmd.c, src/fileio.c, src/popupmnu.c, src/quickfix.c

Patch 8.1.1548
Problem:    Popup_dialog() is not implemented.
Solution:   Implement popup_dialog() and popup_filter_yesno().
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/evalfunc.c,
            src/structs.h, src/globals.h, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt

Patch 8.1.1549 (after 8.1.1547)
Problem:    Quickfix test fails.
Solution:   Negate result of bt_quickfix().
Files:	    src/quickfix.c

Patch 8.1.1550
Problem:    When a popup has left padding text may be cut off.
Solution:   Add the border and padding when computing the size.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1551
Problem:    Warning for shadowing popup_dragwin. (Dominique Pelle)
Solution:   Add missing change.
Files:	    src/ui.c

Patch 8.1.1552
Problem:    Cursor position is wrong after sign column appears or disappears.
            (Yegappan Lakshmanan)
Solution:   Call changed_line_abv_curs() instead of changed_cline_bef_curs().
Files:	    src/sign.c, src/testdir/test_signs.vim,
            src/testdir/dumps/Test_sign_cursor_01.dump,
            src/testdir/dumps/Test_sign_cursor_02.dump

Patch 8.1.1553
Problem:    Not easy to change the text in a popup window.
Solution:   Add popup_settext(). (Ben Jackson, closes #4549)
            Also display a space for an empty popup.
Files:	    runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro,
            src/testdir/dumps/Test_popup_settext_01.dump,
            src/testdir/dumps/Test_popup_settext_02.dump,
            src/testdir/dumps/Test_popup_settext_03.dump,
            src/testdir/dumps/Test_popup_settext_04.dump,
            src/testdir/dumps/Test_popup_settext_05.dump,
            src/testdir/dumps/Test_popup_settext_06.dump,
            src/testdir/test_popupwin.vim

Patch 8.1.1554 (after 8.1.1539)
Problem:    Docs and tests for :const can be improved.
Solution:   Improve documentation, add a few more tests. (Ryuichi Hayashida,
            closes #4551)
Files:	    runtime/doc/eval.txt, src/testdir/test_const.vim

Patch 8.1.1555
Problem:    NOT_IN_POPUP_WINDOW is confusing. (Andy Massimino)
Solution:   Rename to ERROR_IF_POPUP_WINDOW().
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/macros.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/window.c

Patch 8.1.1556
Problem:    The command displayed to show a failing screenshot does not include
            the "testdir" directory.
Solution:   Prefix the directory name so that it can be copy-pasted.
Files:	    src/testdir/screendump.vim

Patch 8.1.1557
Problem:    Compiler warning for unused variables in tiny version. (Tony
            Mechelynck)
Solution:   Add #ifdef.
Files:	    src/option.c

Patch 8.1.1558
Problem:    Popup_menu() and popup_filter_menu() are not implemented yet.
Solution:   Implement the functions. Fix that centering didn't take the border
            and padding into account.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/evalfunc.c, src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_menu_03.dump,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump

Patch 8.1.1559
Problem:    Popup window title property not implemented yet.
Solution:   Implement the title property.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/structs.h
            src/window.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_title.dump

Patch 8.1.1560
Problem:    Popup window hidden option not implemented yet.
Solution:   Implement the hidden option.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1561
Problem:    Popup_setoptions() is not implemented yet.
Solution:   Implement popup_setoptions().  Also add more fields to
            popup_getoptions().
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/dict.c, src/proto/dict.pro, src/evalfunc.c,
            src/testdir/test_popupwin.vim, src/testdir/runtest.vim

Patch 8.1.1562
Problem:    Popup window not always redrawn after popup_setoptions().
Solution:   Force a redraw.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_23.dump

Patch 8.1.1563
Problem:    Crash when using closures.
Solution:   Set reference in varlist of funccal when running the garbage
            collector. (Ozaki Kiichi, closes #4554, closes #4547)
Files:	    src/testdir/test_vimscript.vim, src/userfunc.c

Patch 8.1.1564
Problem:    Sign column takes up space.  (Adam Stankiewicz)
Solution:   Optionally put signs in the number column. (Yegappan Lakshmanan,
            closes #4555, closes #4515)
Files:	    runtime/doc/options.txt, src/option.c, src/screen.c,
            src/testdir/test_signs.vim

Patch 8.1.1565
Problem:    MS-Windows: no sound support.
Solution:   Add sound support for MS-Windows. (Yasuhiro Matsumoto, Ken Takata,
            closes #4522)
Files:	    runtime/doc/eval.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/sound.c, src/testdir/test_sound.vim

Patch 8.1.1566
Problem:    Error message when terminal closes while it is not in the current
            tab.
Solution:   Also set "do_set_w_closing" when using the special autocommand
            window. (closes #4552)
Files:	    src/terminal.c

Patch 8.1.1567
Problem:    Localtime_r() does not respond to $TZ changes.
Solution:   If $TZ changes then call tzset(). (Tom Ryder)
Files:	    src/auto/configure, src/config.h.in, src/configure.ac,
            src/evalfunc.c, src/memline.c, src/proto/memline.pro,
            src/testdir/test_functions.vim, src/undo.c

Patch 8.1.1568 (after 8.1.1567)
Problem:    Strftime() test fails on MS-Windows.
Solution:   Skip the check for using the $TZ environment variable.
Files:	    src/testdir/test_functions.vim

Patch 8.1.1569
Problem:    Cannot build with signs but without diff feature.
Solution:   Move #ifdef. (Tom Ryder)
Files:	    src/screen.c

Patch 8.1.1570
Problem:    Icon signs not displayed properly in the number column.
Solution:   Display them properly. (Yegappan Lakshmanan, closes #4559)
Files:	    src/gui.c, src/screen.c, src/testdir/test_signs.vim

Patch 8.1.1571
Problem:    textprop highlight starts too early if just after a tab.
Solution:   Check if still drawing a previous character. (closes #4558)
Files:	    src/screen.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_tab.dump

Patch 8.1.1572 (after 8.1.1569)
Problem:    Compiler warnings with tiny build. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/screen.c

Patch 8.1.1573 (after 8.1.1571)
Problem:    Textprop test fails if screenshots do not work.
Solution:   Add check for screenshots working.
Files:	    src/testdir/test_textprop.vim

Patch 8.1.1574
Problem:    Tabpage option not yet implemented for popup window.
Solution:   Implement tabpage option, also for popup_getoptions().
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1575
Problem:    Callbacks may be garbage collected.
Solution:   Set reference in callbacks. (Ozaki Kiichi, closes #4564)
Files:	    src/buffer.c, src/channel.c, src/eval.c, src/ex_cmds2.c,
            src/popupwin.c, src/proto/buffer.pro, src/proto/popupwin.pro,
            src/terminal.c, src/testdir/test_listener.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_prompt_buffer.vim,
            src/userfunc.c

Patch 8.1.1576
Problem:    Compiler warning for unused argument.
Solution:   Add "UNUSED" annotation. (Dominique Pelle, closes #4570)
Files:	    src/ui.c

Patch 8.1.1577
Problem:    Command line redrawn for +arabic without Arabic characters.
            (Dominique Pelle)
Solution:   Check if there actually are any Arabic characters.  Do redraw
            after displaying incsearch. (closes #4569)
Files:	    src/ex_getln.c

Patch 8.1.1578
Problem:    MS-Windows: pathdef.c should depend on build options.
Solution:   Generate pathdef.c in the object directory.  Fix dependencies.
            (Ken Takata, closes #4565)
Files:	    .gitignore, .hgignore, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.1579
Problem:    Dict and list could be GC'ed while displaying error in a timer.
            (Yasuhiro Matsumoto)
Solution:   Block garbage collection when executing a timer.  Add
            test_garbagecollect_soon(). Add "no_wait_return" to
            test_override(). (closes #4571)
Files:	    src/dict.c, src/testdir/test_timers.vim, src/evalfunc.c,
            runtime/doc/eval.txt

Patch 8.1.1580
Problem:    Cannot make part of a popup transparent.
Solution:   Add the "mask" option.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/screen.c,
            src/structs.h, src/window.c, src/ui.c, src/vim.h, src/globals.h,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump

Patch 8.1.1581
Problem:    Shared functions for testing are disorganised.
Solution:   Group functions in script files. (Ozaki Kiichi, closes #4573)
Files:	    Filelist, src/testdir/screendump.vim, src/testdir/shared.vim,
            src/testdir/term_util.vim, src/testdir/test_mksession.vim,
            src/testdir/test_suspend.vim, src/testdir/test_terminal.vim,
            src/testdir/test_timers.vim, src/testdir/view_util.vim

Patch 8.1.1582
Problem:    Cannot build with +textprop but without +timers.
Solution:   Add #ifdef. (Ola Söder, closes #4574)
Files:	    src/popupwin.c

Patch 8.1.1583
Problem:    Set_ref_in_list() only sets ref in items.
Solution:   Rename to set_ref_in_list_items() to avoid confusion.
Files:	    src/eval.c, src/proto/eval.pro, src/if_lua.c, src/popupwin.c,
            src/userfunc.c, src/if_py_both.h

Patch 8.1.1584
Problem:    The evalfunc.c file is getting too big.
Solution:   Move channel and job related functions to channel.c.
Files:	    src/channel.c, src/evalfunc.c, src/proto/channel.pro

Patch 8.1.1585
Problem:    :let-heredoc does not trim enough.
Solution:   Trim indent from the contents based on the indent of the first
            line.  Use let-heredoc in more tests.
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_balloon.vim,
            src/testdir/test_cindent.vim, src/testdir/test_const.vim,
            src/testdir/test_debugger.vim, src/testdir/test_functions.vim,
            src/testdir/test_goto.vim, src/testdir/test_gui.vim,
            src/testdir/test_highlight.vim, src/testdir/test_join.vim,
            src/testdir/test_let.vim, src/testdir/test_memory_usage.vim,
            src/testdir/test_messages.vim,
            src/testdir/test_mksession_utf8.vim, src/testdir/test_normal.vim,
            src/testdir/test_popup.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_profile.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1586
Problem:    Error number used in two places.
Solution:   Renumber one. (Ken Takata)
Files:	    runtime/doc/popup.txt, src/popupwin.c

Patch 8.1.1587
Problem:    Redraw problem when sign icons in the number column.
Solution:   Clear and redraw when changing related options.  Right align the
            sign icon in the GUI. (Yegappan Lakshmanan, closes #4578)
Files:	    src/gui.c, src/option.c

Patch 8.1.1588
Problem:    In :let-heredoc line continuation is recognized.
Solution:   Do not consume line continuation. (Ozaki Kiichi, closes #4580)
Files:	    src/autocmd.c, src/digraph.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds.h, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/normal.c, src/ops.c, src/proto/autocmd.pro,
            src/proto/ex_cmds2.pro, src/proto/ex_docmd.pro,
            src/proto/ex_getln.pro, src/proto/userfunc.pro,
            src/testdir/test_let.vim, src/testdir/test_startup.vim,
            src/userfunc.c

Patch 8.1.1589
Problem:    Popup window does not indicate scroll position.
Solution:   Add a scrollbar.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/structs.h,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_4.dump

Patch 8.1.1590
Problem:    Popup window test fails.
Solution:   Add "scrollbar" to expected result.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1591
Problem:    On error garbage collection may free memory in use.
Solution:   Reset may_garbage_collect when evaluating expression mapping.
            Add tests. (Ozaki Kiichi, closes #4579)
Files:	    src/ex_cmds2.c, src/getchar.c, src/testdir/test_mapping.vim,
            src/testdir/test_timers.vim, src/testdir/test_vimscript.vim

Patch 8.1.1592
Problem:    May start file dialog while exiting.
Solution:   Ignore the "browse" modifier when exiting. (Ozaki Kiichi,
            closes #4582)
Files:	    src/ex_cmds.c, src/terminal.c

Patch 8.1.1593
Problem:    Filetype not detected for C++ header files without extension.
Solution:   Recognize the file by the Emacs file mode. (Dmitry Ilyin,
            closes #4593)
Files:	    runtime/scripts.vim, src/testdir/test_filetype.vim

Patch 8.1.1594
Problem:    May still start file dialog while exiting.
Solution:   Ignore the "browse" modifier in another place when exiting.
            (Ozaki Kiichi, closes #4582)
Files:	    src/ex_cmds.c

Patch 8.1.1595
Problem:    MS-Windows with VIMDLL: colors wrong in the GUI.
Solution:   Do not set the terminal colors when not using the GUI. (Ken
            Takata, closes #4588)
Files:	    src/syntax.c

Patch 8.1.1596
Problem:    When resizing the screen may draw popup in wrong position. (Masato
            Nishihata)
Solution:   Check the popup is not outside of the screen. (fixes #4592)
Files:	    src/popupwin.c

Patch 8.1.1597
Problem:    Cannot scroll a popup window with the mouse.
Solution:   If the popup window has a scrollbar let the mouse scroll wheel
            scroll the window.
Files:	    runtime/doc/popup.txt, src/normal.c, src/popupwin.c, src/screen.c,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump,
            src/testdir/dumps/Test_popupwin_scroll_7.dump

Patch 8.1.1598
Problem:    Update to test file missing.
Solution:   Update the popup window test file.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1599
Problem:    Compiler warning for uninitialized variable. (Tony Mechelynck)
Solution:   Add a dummy assignment.
Files:	    src/popupwin.c, src/normal.c

Patch 8.1.1600
Problem:    Cannot specify highlighting for popup window scrollbar.
Solution:   Add "scrollbarhighlight" and "thumbhighlight" options.
Files:	    src/popupwin.c, src/structs.h, src/window.c,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump,
            src/testdir/dumps/Test_popupwin_scroll_7.dump

Patch 8.1.1601
Problem:    Missing changes to popup window test file.
Solution:   Add those changes.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1602
Problem:    Popup window cannot overflow on the left or right.
Solution:   Only set the "fixed" option when it is in the dict. Set w_leftcol
            to allow for the popup overflowing on the left and use it when
            applying the mask.
Files:	    src/popupwin.c

Patch 8.1.1603
Problem:    Crash when using unknown highlighting in text property.
Solution:   Check for zero highlight ID.
Files:	    src/screen.c, src/testdir/test_textprop.vim

Patch 8.1.1604
Problem:    Popup window scroll test is flaky.
Solution:   Add a delay between scroll events.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1605
Problem:    Vim may delay processing messages on a json channel. (Pontus
            Leitzler)
Solution:   Try parsing json when checking if there is readahead.
Files:	    src/channel.c

Patch 8.1.1606
Problem:    On a narrow screen ":hi" output is confusing.
Solution:   Insert a space between highlight group name and "xxx". (Masato
            Nishihaga, closes #4599)
Files:	    src/syntax.c, src/testdir/test_highlight.vim

Patch 8.1.1607
Problem:    Popup window scrollbar does not respond to click.
Solution:   Mouse click in scrollbar scrolls by one line.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/ui.c,
            src/normal.c, runtime/doc/popup.txt,
            src/testdir/dumps/Test_popupwin_scroll_8.dump,
            src/testdir/dumps/Test_popupwin_scroll_9.dump

Patch 8.1.1608
Problem:    The evalfunc.c file is too big.
Solution:   Move sign functionality to sign.c.
Files:	    src/evalfunc.c, src/proto/evalfunc.pro, src/sign.c,
            src/proto/sign.pro

Patch 8.1.1609
Problem:    The user cannot easily close a popup window.
Solution:   Add the "close" property. (mostly by Masato Nishihata,
            closes #4601)
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/structs.h, src/testdir/dumps/Test_popupwin_close_01.dump,
            src/testdir/dumps/Test_popupwin_close_02.dump,
            src/testdir/dumps/Test_popupwin_close_03.dump,
            src/testdir/test_popupwin.vim, src/ui.c

Patch 8.1.1610
Problem:    There is no way to add or load a buffer without side effects.
Solution:   Add the bufadd() and bufload() functions.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim

Patch 8.1.1611
Problem:    Bufadd() reuses existing buffer without a name.
Solution:   When the name is empty always create a new buffer.
Files:	    src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.1.1612
Problem:    Cannot show an existing buffer in a popup window.
Solution:   Support buffer number argument in popup_create().
Files:	    src/buffer.c, src/proto/buffer.pro, src/evalfunc.c,
            src/popupwin.c, src/vim.h, src/normal.c, src/screen.c, src/ui.c,
            src/window.c, src/testdir/test_popupwin.vim, runtime/doc/popup.txt

Patch 8.1.1613
Problem:    Popup window test fails with Athena and Motif.
Solution:   Compute the highlight attribute when the GUI is not active.
Files:	    src/syntax.c

Patch 8.1.1614
Problem:    'numberwidth' can only go up to 10.
Solution:   Allow up to 20. (Charlie Stanton, closes #4584)
Files:	    runtime/doc/options.txt, src/option.c, src/screen.c,
            src/testdir/gen_opt_test.vim, src/testdir/test_options.vim

Patch 8.1.1615
Problem:    Crash when passing buffer number to popup_create(). (Yasuhiro
            Matsumoto)
Solution:   Initialize the window properly.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1616
Problem:    Build failure with gcc on Amiga.
Solution:   Add missing header includes. (Ola Söder, closes #4603)
Files:	    src/os_amiga.h

Patch 8.1.1617
Problem:    No test for popup window with mask and position fixed.
Solution:   Add a couple of screenshots.  Fix detected problems.
Files:	    src/popupwin.c, src/structs.h, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump

Patch 8.1.1618
Problem:    Amiga-like systems quickly run out of stack.
Solution:   Reserve a Megabyte stack. (Ola Söder, closes #4608)
Files:	    src/os_amiga.c

Patch 8.1.1619
Problem:    Tests are not run with GUI on Travis.
Solution:   Add a testgui job. (Ozaki Kiichi, closes #4609)
Files:	    .travis.yml, src/testdir/test_highlight.vim,
            src/testdir/test_mapping.vim, src/testdir/test_timers.vim

Patch 8.1.1620
Problem:    No test for popup window with border and mask.
Solution:   Add this popup window, fix problems.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump

Patch 8.1.1621
Problem:    Amiga: time.h included twice.
Solution:   Remove include from evalfunc.c, move outside of #ifdef in
            os_amiga.h. (Ola Söder, closes #4607)
Files:	    src/evalfunc.c, src/os_amiga.h

Patch 8.1.1622
Problem:    Wrong width if displaying a lot of lines in a popup window.
Solution:   Accurately compute the line overflow.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_firstline.dump

Patch 8.1.1623
Problem:    Display wrong with signs in narrow number column.
Solution:   Increase the numbercolumn width if needed. (Yegappan Lakshmanan,
            closes #4606)
Files:	    src/option.c, src/screen.c, src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1624
Problem:    When testing in the GUI may try to run gvim in a terminal.
Solution:   Add the -v argument. (Yee Cheng Chin, closes #4605)  Don't skip
            tests that work now.
Files:	    src/testdir/shared.vim, src/testdir/term_util.vim,
            src/testdir/test_mapping.vim, src/testdir/test_timers.vim

Patch 8.1.1625
Problem:    Script line numbers are not exactly right.
Solution:   Handle heredoc and continuation lines better. (Ozaki Kiichi,
            closes #4611, closes #4511)
Files:	    src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/testdir/test_vimscript.vim, src/userfunc.c

Patch 8.1.1626
Problem:    No test for closing a popup window with a modified buffer.
Solution:   Add a test.  Add "popups" to getbufinfo().
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1627
Problem:    Header file contains mixed comment style.
Solution:   Use // style comments.
Files:	    src/structs.h

Patch 8.1.1628
Problem:    Popup window functions not in list of functions.
Solution:   Add popup window functions to the list of functions.  Reorganise
            the popup window help.
Files:	    runtime/doc/eval.txt, runtime/doc/popup.txt,
            runtime/doc/usr_41.txt

Patch 8.1.1629
Problem:    Terminal function help is in the wrong file.
Solution:   Move the function details to terminal.txt.
Files:	    runtime/doc/eval.txt, runtime/doc/terminal.txt

Patch 8.1.1630
Problem:    Various small problems.
Solution:   Various small improvements.
Files:	    src/gui_beval.c, src/list.c, src/menu.c, src/message.c,
            src/misc2.c, src/testdir/test_terminal.vim, src/os_vms_conf.h,
            src/testdir/Make_vms.mms

Patch 8.1.1631
Problem:    Displaying signs is inefficient.
Solution:   Avoid making multiple calls to get information about a placed
            sign. (Yegappan Lakshmanan, closes #4586)
Files:	    src/proto/sign.pro, src/screen.c, src/sign.c, src/structs.h

Patch 8.1.1632
Problem:    Build with EXITFREE but without +arabic fails.
Solution:   Rename the function and adjust #ifdefs. (closes #4613)
Files:	    src/ex_getln.c, src/proto/ex_getln.pro, src/misc2.c

Patch 8.1.1633
Problem:    Cannot generate prototypes with X11 but without GUI.
Solution:   Include X11/Intrinsic.h.
Files:	    src/gui.h

Patch 8.1.1634
Problem:    Terminal test fails when term_getansicolors() is missing.
            Diff test fails without +rightleft.  (Dominique Pelle)
Solution:   Check if term_getansicolors() is supported. (closes #4597)
Files:	    src/testdir/test_terminal.vim, src/testdir/test_diffmode.vim

Patch 8.1.1635
Problem:    Warnings for unused variables in small version. (John Marriott)
Solution:   Adjust #ifdefs.
Files:	    src/screen.c

Patch 8.1.1636
Problem:    Crash when popup has fitting scrollbar. (Trygve Aaberge)
Solution:   Don't divide by zero if the scrollbar just fits. (closes #4615)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1637
Problem:    After running tests and clean the XfakeHOME directory remains.
Solution:   Use "rm -rf". (Hirohito Higashi)
Files:	    src/testdir/Makefile, src/testdir/Make_amiga.mak

Patch 8.1.1638
Problem:    Running tests leaves some files behind.
Solution:   Delete the files. (Ozaki Kiichi, closes #4617)
Files:	    src/testdir/test_functions.vim, src/testdir/test_popupwin.vim

Patch 8.1.1639
Problem:    Changing an autoload name into a script file name is inefficient.
Solution:   Remember the last replaced #. (Ozaki Kiichi, closes #4618)
Files:	    src/eval.c

Patch 8.1.1640
Problem:    The CursorHold autocommand takes down a balloon. (Paul Jolly)
Solution:   Ignore the CursorHold pseudo-key.
Files:	    src/getchar.c, src/testdir/test_balloon.vim,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_01a.dump

Patch 8.1.1641
Problem:    Garbage collection may run at a wrong moment. (Trygve Aaberge)
Solution:   Postpone garbage collection while parsing messages. (closes #4620)
Files:	    src/misc2.c

Patch 8.1.1642 (after 8.1.0374)
Problem:    May use uninitialized variable. (Patrick Palka)
Solution:   Initialize variables earlier. (closes #4623)
Files:	    src/screen.c, src/testdir/test_number.vim

Patch 8.1.1643
Problem:    Sign placement is wrong when 'foldcolumn' is set.
Solution:   Adjust the column computation. (Yee Cheng Chin, closes #4627)
Files:	    src/gui.c

Patch 8.1.1644
Problem:    Sound test does not work on Travis.
Solution:   Use "sg" command to enable audio. (Ozaki Kiichi, closes #4624)
Files:	    .travis.yml

Patch 8.1.1645
Problem:    Cannot use a popup window for a balloon.
Solution:   Add popup_beval().  Add the "mousemoved" property.  Add the
            screenpos() function.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/move.c,
            src/proto/move.pro, src/beval.c, src/proto/beval.pro,
            src/evalfunc.c, src/popupmnu.c, src/normal.c,
            src/testdir/test_popupwin.vim, src/testdir/test_cursor_func.vim,
            runtime/doc/popup.txt, runtime/doc/eval.txt,
            runtime/doc/usr_41.txt,
            src/testdir/dumps/Test_popupwin_beval_1.dump,
            src/testdir/dumps/Test_popupwin_beval_2.dump,
            src/testdir/dumps/Test_popupwin_beval_3.dump

Patch 8.1.1646 (after 8.1.1645)
Problem:    build failure
Solution:   Add changes to structure.
Files:	    src/structs.h

Patch 8.1.1647
Problem:    Build error with GTK and hangulinput feature, im_get_status()
            defined twice. (Dominique Pelle)
Solution:   Adjust im_get_status(). (closes #4628)
Files:	    src/hangulin.c, src/mbyte.c

Patch 8.1.1648
Problem:    MS-Windows: build error with normal features.
Solution:   Adjust #ifdef for find_word_under_cursor().
Files:	    src/beval.c, src/proto/beval.pro

Patch 8.1.1649
Problem:    Illegal memory access when closing popup window.
Solution:   Get w_next before closing the window.
Files:	    src/popupwin.c

Patch 8.1.1650
Problem:    Warning for using uninitialized variable. (Tony Mechelynck)
Solution:   Simplify the code by always using the mouse coordinates.
Files:	    src/beval.c

Patch 8.1.1651
Problem:    Suspend test is flaky on some systems.
Solution:   Wait for the shell prompt to show. (Yee Cheng Chin, closes #4632)
Files:	    src/testdir/test_suspend.vim

Patch 8.1.1652
Problem:    GUI: popup window doesn't close on mouse movement. (Paul Jolly)
Solution:   Generate mouse-move events when a popup window is visible.
Files:	    src/gui.c, src/globals.h

Patch 8.1.1653
Problem:    Ubsan warns for possibly passing NULL pointer.
Solution:   Skip code when length is zero. (Dominique Pelle, closes #4631)
Files:	    src/channel.c

Patch 8.1.1654
Problem:    GUI: screen updates from 'balloonexpr' are not displayed.
Solution:   Update the screen if needed.  Also avoid the cursor being
            displayed in the wrong position.
Files:	    src/beval.c

Patch 8.1.1655
Problem:    Popup window border drawn wrong with multibyte char. (Marcin
            Szamotulski)
Solution:   Correct check in mb_fix_col(). (closes #4635)
Files:	    src/mbyte.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_24.dump

Patch 8.1.1656
Problem:    Popup window width is wrong when using Tabs. (Paul Jolly)
Solution:   Count tabs correctly. (closes #4637)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_11.dump

Patch 8.1.1657
Problem:    Terminal: screen updates from 'balloonexpr' are not displayed.
Solution:   Update the screen if needed.  Fix the word position for
            "mousemoved".
Files:	    src/beval.c, src/proto/beval.pro, src/popupwin.c, src/normal.c,
            src/proto/normal.pro

Patch 8.1.1658
Problem:    Debug statements included in patch.
Solution:   Remove the debug statements.
Files:	    src/normal.c, src/popupwin.c

Patch 8.1.1659
Problem:    Popup window "mousemoved" values not correct.
Solution:   Convert text column to mouse column.
Files:	    src/popupwin.c, runtime/doc/popup.txt

Patch 8.1.1660
Problem:    Assert_fails() does not fail inside try/catch.
Solution:   Set trylevel to zero. (Ozaki Kiichi, closes #4639)
Files:	    src/eval.c, src/testdir/test_assert.vim

Patch 8.1.1661
Problem:    Cannot build with +textprop but without +balloon_eval.
Solution:   Adjust #ifdefs. (closes #4645)
Files:	    src/proto.h

Patch 8.1.1662
Problem:    Cannot build uninstal.exe with some version of MinGW.
Solution:   Add -lole32. (Rene Nyffenegger, closes #4646)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.1663
Problem:    Compiler warning for using size_t.
Solution:   Add type cast. (Mike Williams)
Files:	    src/popupwin.c

Patch 8.1.1664
Problem:    GUI resize may cause changing Rows at a bad time. (Dominique
            Pelle)
Solution:   Postpone resizing while updating the screen.
