Problem:    Vim9: double free after unpacking a list.
Solution:   Make a copy of the value instead of moving it. (closes #9968)
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim

Patch 8.2.4588
Problem:    Mapping with key code after other matching mapping does not work.
Solution:   Change ">" to ">=". (closes #9903)
Files:      src/getchar.c, src/testdir/test_termcodes.vim

Patch 8.2.4589
Problem:    Cannot index the g: dictionary.
Solution:   Recognize using "g:[key]". (closes #9969)
Files:      src/ex_docmd.c, src/eval.c, src/vim9compile.c,
            src/testdir/test_vim9_assign.vim

Patch 8.2.4590
Problem:    Vim9: range type check has wrong offset.
Solution:   Adjust offset for CHECKTYPE.  Remove other type check.
Files:      src/vim9compile.c, src/vim9execute.c,
            src/testdir/test_vim9_assign.vim

Patch 8.2.4591
Problem:    Cursor line not updated when a callback moves the cursor.
Solution:   Check if the cursor moved. (closes #9970)
Files:      src/main.c, src/drawscreen.c, src/proto/drawscreen.pro,
            src/testdir/test_cursorline.vim,
            src/testdir/dumps/Test_cursorline_callback_1.dump

Patch 8.2.4592
Problem:    Search continues after giving E1204.
Solution:   Return failure after giving E1204. (closes #9972)
Files:      src/regexp_nfa.c

Patch 8.2.4593
Problem:    Unnecessary call to redraw_later().
Solution:   Remove the call to redraw_later() in op_yank(). (closes #9971)
Files:      src/register.c

Patch 8.2.4594
Problem:    Need to write script to a file to be able to source them.
Solution:   Make ":source" use lines from the current buffer. (Yegappan
            Lakshmanan et al., closes #9967)
Files:      runtime/doc/repeat.txt, runtime/doc/todo.txt, src/alloc.c,
            src/digraph.c, src/eval.c, src/ex_cmds.h, src/scriptfile.c,
            src/proto/scriptfile.pro, src/vim9script.c,
            src/testdir/test_source.vim

Patch 8.2.4595
Problem:    X11: using --remote-wait may keep the CPU busy.
Solution:   Set the timeout for select() on every call. (Jacopo Secchiero,
            closes #9973)
Files:      src/if_xcmdsrv.c

Patch 8.2.4596
Problem:    Installing tutor binary may fail.
Solution:   Fix the dependency. (Sergei Trofimovich, closes #9978)
Files:      src/Makefile

Patch 8.2.4597
Problem:    LuaV_debug() not covered by tests.
Solution:   Add a test. (Dominique Pellé, closes #9980)
Files:      src/testdir/test_lua.vim

Patch 8.2.4598
Problem:    Profile completion test sometimes fails.
Solution:   Delete the .res file before running tests.
Files:      src/testdir/runtest.vim

Patch 8.2.4599
Problem:    GTK: get assertion errors when scrolling a split window.
Solution:   Use GDK_IS_DRAWABLE() on the scrollbar window. (closes #9982)
Files:      src/gui_gtk.c

Patch 8.2.4600
Problem:    Vim9: not enough test coverage for executing :def function.
Solution:   Add a few more tests.  Fix inconsistencies.
Files:      src/vim9execute.c, src/evalvars.c, src/proto/evalvars.pro,
            src/testdir/test_listdict.vim, src/testdir/test_vim9_assign.vim,
            src/testdir/test_vim9_cmd.vim

Patch 8.2.4601
Problem:    Vim9: not enough test coverage for executing :def function.
Solution:   Add a few more tests.
Files:      src/testdir/test_vim9_script.vim, src/testdir/test_vim9_func.vim,
            src/testdir/test_vim9_cmd.vim

Patch 8.2.4602
Problem:    Vim9: not enough test coverage for executing :def function.
Solution:   Add a few more tests.  Fix uncovered problem.  Remove dead code.
Files:      src/vim9execute.c, src/vim9.h, src/vim9instr.c,
            src/proto/vim9instr.pro, src/vim9compile.c,
            src/testdir/test_vim9_script.vim, src/testdir/test_vim9_expr.vim

Patch 8.2.4603
Problem:    Sourcing buffer lines is too complicated.
Solution:   Simplify the code. Make it possible to source Vim9 script lines.
            (Yegappan Lakshmanan, closes #9974)
Files:      runtime/doc/repeat.txt, src/ex_docmd.c, src/proto/scriptfile.pro,
            src/scriptfile.c, src/structs.h, src/testdir/test_source.vim

Patch 8.2.4604
Problem:    Error for redefining a script item may be confusing.
Solution:   Put quotes around the name.
Files:      src/errors.h

Patch 8.2.4605
Problem:    Error for arguments of remote_expr() even when the +clientserver
            feature is not included.
Solution:   Move #ifdef.
Files:      src/clientserver.c

Patch 8.2.4606 (after 8.2.4605)
Problem:    Test fails because of changed error message.
Solution:   Update the expected error message
Files:      src/testdir/test_vim9_import.vim

Patch 8.2.4607
Problem:    Sourcing buffer lines may lead to errors for conflicts.
Solution:   Add the ++clear argument. (Yegappan Lakshmanan, closes #9991)
Files:      runtime/doc/repeat.txt, src/scriptfile.c, src/vim9script.c,
            src/proto/vim9script.pro, src/testdir/test_source.vim

Patch 8.2.4608
Problem:    getcompletion() does not work properly when 'wildoptions'
            contains "fuzzy".
Solution:   Do not use addstar(). (Yegappan Lakshmanan, closes #9992,
            closes #9986)
Files:      runtime/doc/builtin.txt, src/cmdexpand.c,
            src/testdir/test_cmdline.vim

Patch 8.2.4609
Problem:    :unhide does not check for failing to close a window.
Solution:   When closing a window fails continue with the next one.  Do not
            try closing the autocmd window. (closes #9984)
Files:      src/buffer.c, src/window.c, src/proto/window.pro,
            src/testdir/test_autocmd.vim

Patch 8.2.4610
Problem:    Some conditions are always true.
Solution:   Remove the useless conditions. (closes #9993)
Files:      src/clientserver.c, src/drawline.c, src/drawscreen.c,
            src/ex_cmds.c, src/fileio.c, src/message.c, src/misc2.c,
            src/ops.c, src/sign.c, src/spell.c, src/vim9cmds.c, src/window.c

Patch 8.2.4611
Problem:    Typos in tests; one lua line not covered by test.
Solution:   Fix typos. Add test case. (Dominique Pellé, closes #9994)
Files:      src/testdir/test_breakindent.vim, src/testdir/test_crypt.vim,
            src/testdir/test_cursorline.vim, src/testdir/test_digraph.vim,
            src/testdir/test_gui.vim, src/testdir/test_lua.vim,
            src/testdir/test_regexp_latin.vim, src/testdir/test_signals.vim,
            src/testdir/test_spell.vim, src/testdir/test_statusline.vim,
            src/testdir/test_vim9_disassemble.vim,
            src/testdir/test_vim9_expr.vim, src/testdir/test_vimscript.vim

Patch 8.2.4612
Problem:    Vim9: cannot use a recursive call in a nested function. (Sergey
            Vlasov)
Solution:   Define the funcref before compiling the function. (closes #9989)
Files:      src/vim9compile.c, src/vim9instr.c, src/proto/vim9instr.pro,
            src/vim9expr.c, src/testdir/test_vim9_func.vim

Patch 8.2.4613
Problem:    Return type of swapfile_unchanged() is wrong.
Solution:   Use "int". (closes #10000  Yeah!)
Files:      src/memline.c

Patch 8.2.4614
Problem:    Redrawing too much when 'cursorline' is set and jumping around.
Solution:   Rely on win_update() to redraw the current and previous cursor
            line, do not mark lines as modified. (closes #9996)
Files:      src/drawline.c, src/drawscreen.c, src/move.c, src/proto/move.pro,
            src/option.c

Patch 8.2.4615
Problem:    Mapping with escaped bar does not work in :def function. (Sergey
            Vlasov)
Solution:   Do not remove the backslash. (closes #10002)
Files:      src/ex_docmd.c, src/proto/ex_docmd.pro, src/syntax.c,
            src/vim9cmds.c, src/testdir/test_vim9_cmd.vim

Patch 8.2.4616
Problem:    Vim9: Declarations in a {} block of a user command do not use Vim9
            rules if defined in a legacy script. (Yegappan Lakshmanan)
Solution:   Pretend the script is Vim9 script.
Files:      src/usercmd.c, src/testdir/test_usercommands.vim

Patch 8.2.4617
Problem:    No completion for :scriptnames.
Solution:   Implement :scriptnames completion. (Yegappan Lakshmanan,
            closes #10005)
Files:      runtime/doc/builtin.txt, src/cmdexpand.c, src/ex_cmds.h,
            src/scriptfile.c, src/usercmd.c, src/vim.h,
            src/testdir/test_cmdline.vim, src/testdir/test_quickfix.vim

Patch 8.2.4618
Problem:    Command line completion does not recognize single letter commands.
Solution:   Use the condition from find_ex_command().
Files:      src/ex_docmd.c

Patch 8.2.4619
Problem:    Mapping is cancelled when mouse moves and popup is visible.
Solution:   Only generate mouse moved events when a popup may use them.
            (closes #10004)
Files:      src/gui.c, src/globals.h, src/popupwin.c

Patch 8.2.4620 (after 8.2.4618)
Problem:    Two letter substitute commands don't work. (Yegappan Lakshmanan)
Solution:   Invert condition.
Files:      src/ex_docmd.c

Patch 8.2.4621
Problem:    Crash when using the tabline right-click menu.
Solution:   Use XtPointer for XmNuserData. (closes #10009)
Files:      src/gui_motif.c

Patch 8.2.4622
Problem:    Vim9: Crash with :execute and :finish. (Sergey Vlasov)
Solution:   Check for NULL. (closes #10011)
Files:      src/eval.c, src/testdir/test_vim9_script.vim

Patch 8.2.4623
Problem:    Coverity warns for using uninitialized field.
Solution:   Initialize the field to zero.
Files:      src/ex_docmd.c

Patch 8.2.4624
Problem:    Old Coverity warning for resource leak.
Solution:   Close the file if memory allocation fails.
Files:      src/diff.c

Patch 8.2.4625
Problem:    Old Coverity warning for resource leak.
Solution:   Call FreeWild() if expanding matches did not fail.
Files:      src/help.c

Patch 8.2.4626
Problem:    Visual area not fully updated when removing sign in Visual mode
            while scrolling.
Solution:   Adjust check for topline. (closes #10017)
Files:      src/drawscreen.c, src/testdir/test_display.vim,
            src/testdir/dumps/Test_display_scroll_update_visual.dump

Patch 8.2.4627
Problem:    flatten() does not use maxdepth correctly.
Solution:   Use a recursive implementation. (closes #10020)
Files:      src/list.c, src/testdir/test_flatten.vim

Patch 8.2.4628
Problem:    Not enough testing for 2/3 letter substitute commands.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #10019)
Files:      src/testdir/test_cmdline.vim, src/testdir/test_substitute.vim

Patch 8.2.4629
Problem:    flattennew() makes a deep copy unnecessarily.
Solution:   Use a shallow copy. (issue #10012)
Files:      src/list.c

Patch 8.2.4630
Problem:    'cursorline' not always updated with 'cursorlineopt' is
            "screenline".
Solution:   Call check_redraw_cursorline() more often. (closes #10013)
Files:      src/normal.c, src/edit.c, src/testdir/test_cursorline.vim,
            src/testdir/dumps/Test_cursorline_screenline_1.dump,
            src/testdir/dumps/Test_cursorline_screenline_2.dump

Patch 8.2.4631
Problem:    Crash when switching window in BufWipeout autocommand.
Solution:   Put any buffer in the window to avoid it being NULL.
            (closes #10024)
Files:      src/window.c, src/buffer.c, src/testdir/test_autocmd.vim

Patch 8.2.4632
Problem:    Using freed memory in flatten().
Solution:   Clear typval after recursing into list.
Files:      src/list.c

Patch 8.2.4633
Problem:    Visual range does not work before command modifiers.
Solution:   Move Visual range to after command modifiers.
Files:      src/ex_docmd.c, src/testdir/test_source.vim

Patch 8.2.4634
Problem:    Vim9: cannot initialize a variable to null_list.
Solution:   Give negative count to NEWLIST. (closes #10027)
            Also fix inconsistencies in comparing with null values.
Files:      src/vim9instr.c, src/proto/vim9instr.pro, src/vim9.h,
            src/vim9compile.c, src/vim9expr.c, src/vim9execute.c,
            src/evalvars.c, src/typval.c, src/testdir/test_vim9_expr.vim,
            src/testdir/test_vim9_builtin.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.4635 (after 8.2.4634)
Problem:    Tests using null list or dict fail.
Solution:   Only use the new rules for Vim9 script.
Files:      src/evalvars.c

Patch 8.2.4636 (after 8.2.4633)
Problem:    Not using Visual range.
Solution:   Put the command pointer back to the range.
Files:      src/ex_docmd.c

Patch 8.2.4637
Problem:    Warning for using uninitialized variable. (Tony Mechelynck)
Solution:   Initialize it.
Files:      src/ex_docmd.c

Patch 8.2.4638
Problem:    Superfluous check if a redraw is needed for 'cursorline'.
Solution:   Remove check_redraw_cursorline(). (closes #10030, closes #10029)
Files:      src/drawscreen.c, src/proto/drawscreen.pro, src/edit.c,
            src/main.c, src/normal.c, src/move.c,
            src/testdir/dumps/Test_cursorcolumn_callback_1.dump,
            src/testdir/dumps/Test_relativenumber_callback_1.dump,
            src/testdir/test_highlight.vim, src/testdir/test_number.vim

Patch 8.2.4639
Problem:    Not sufficient parenthesis in preprocessor macros.
Solution:   Add more parenthesis. (closes #10031)
Files:      src/globals.h, src/gui.h, src/if_py_both.h, src/macros.h,
            src/option.h, src/regexp.h, src/spell.h, src/structs.h, src/vim.h,
            src/vim9.h

Patch 8.2.4640
Problem:    Some boolean options use "long" instead of "int".
Solution:   Adjust the type. (James McCoy, closes #10033)
Files:      src/option.h

Patch 8.2.4641
Problem:    May mark the wrong window for redrawing.
Solution:   Use redraw_win_later(). (closes #10032)
Files:      src/move.c

Patch 8.2.4642
Problem:    Vim9: in :def function script var cannot be null.
Solution:   Only initialize a script variable when not set to a null value.
            (closes #10034)
Files:      src/vim9execute.c, src/vim9type.c, src/globals.h, src/evalvars.c,
            src/vim.h, src/vim9script.c, src/testdir/test_vim9_expr.vim

Patch 8.2.4643
Problem:    Vim9: variable may be locked unintentionally.
Solution:   Clear "v_lock". (closes #10036)
Files:      src/vim9execute.c, src/testdir/test_vim9_builtin.vim

Patch 8.2.4644
Problem:    Redrawing too often when 'relativenumber' is set.
Solution:   Only redraw when the cursor line changed. (Lewis Russell,
            closes #10040)
Files:      src/change.c, src/drawscreen.c, src/structs.h

Patch 8.2.4645
Problem:    'shortmess' changed when session does not store options.
Solution:   Save and restore 'shortmess' if needed. (James Cherti,
            closes #10037)
Files:      src/session.c, src/testdir/test_mksession.vim

Patch 8.2.4646
Problem:    Using buffer line after it has been freed in old regexp engine.
Solution:   After getting mark get the line again.
Files:      src/regexp_bt.c, src/testdir/test_regexp_latin.vim

Patch 8.2.4647
Problem:    "source" can read past end of copied line.
Solution:   Add a terminating NUL.
Files:      src/scriptfile.c, src/testdir/test_source.vim

Patch 8.2.4648
Problem:    Handling LSP messages is a bit slow.
Solution:   Included support for LSP messages. (Yegappan Lakshmanan,
            closes #10025)
Files:      runtime/doc/channel.txt, src/channel.c, src/job.c, src/json.c,
            src/proto/json.pro, src/structs.h, src/testdir/test_channel.vim,
            src/testdir/test_channel_lsp.py

Patch 8.2.4649
Problem:    Various formatting problems.
Solution:   Improve the code formatting.
Files:      src/mark.c, src/quickfix.c, src/regexp_nfa.c, src/register.c,
            src/testdir/test_filechanged.vim, src/gui_athena.c,
            src/gui_motif.c, src/os_unix.c

Patch 8.2.4650
Problem:    "import autoload" only works with using 'runtimepath'.
Solution:   Also support a relative and absolute file name.
Files:      runtime/doc/vim9.txt, src/structs.h, src/scriptfile.c,
            src/proto/scriptfile.pro, src/vim9script.c, src/vim9expr.c,
            src/vim9.h, src/vim9execute.c, src/vim9instr.c,
            src/proto/vim9instr.pro, src/vim.h, src/userfunc.c,
            src/proto/userfunc.pro, src/testdir/test_vim9_import.vim,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.4651 (after 8.2.4650)
Problem:    Test fails because path differs.
Solution:   Only compare the tail of the path.
Files:      src/testdir/test_vim9_disassemble.vim

Patch 8.2.4652 (after 8.2.4650)
Problem:    Leaking memory if assignment fails.
Solution:   Clear assigned value on failure.
Files:      src/vim9execute.c

Patch 8.2.4653
Problem:    "import autoload" does not check the file name.
Solution:   Give an error if the file is not readable. (closes #10049)
Files:      src/filepath.c, src/proto/filepath.pro, src/errors.h,
            src/ex_cmds.c, src/ex_docmd.c, src/spellfile.c,
            src/testdir/test_vim9_import.vim

Patch 8.2.4654 (after 8.2.4653)
Problem:    Missing changes for import check.
Solution:   Add missing changes.
Files:      src/vim9script.c

Patch 8.2.4655
Problem:    Command line completion popup menu positioned wrong when using a
            terminal window.
Solution:   Position the popup menu differently when editing the command line.
            (Yegappan Lakshmanan, closes #10050, closes #10035)
Files:      src/popupmenu.c, src/testdir/test_cmdline.vim,
            src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_wildmenu_pum_term_01.dump

Patch 8.2.4656
Problem:    Vim9: can't use items from "import autoload" with autoload
            directory name.
Solution:   Let sn_autoload_prefix overrule sn_import_autoload.
            (closes #10054)
Files:      src/structs.h, src/vim9instr.c, src/vim9expr.c, src/vim9script.c,
            src/testdir/test_vim9_import.vim

Patch 8.2.4657
Problem:    Errors for functions are sometimes hard to read.
Solution:   Use printable_func_name() in more places.
Files:      src/vim9execute.c, src/userfunc.c, src/proto/userfunc.pro,
            src/vim9expr.c, src/eval.c, src/vim9instr.c, src/vim9type.c,
            src/testdir/test_vim9_expr.vim

Patch 8.2.4658
Problem:    Org-mode files are not recognized.
Solution:   Add patterns to recognize "org" files. (closes #10046)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4659
Problem:    Invalid memory access when using printable function name.
Solution:   Adjust copied name length.
Files:      src/userfunc.c

Patch 8.2.4660
Problem:    Cursorcolumn is sometimes not correct.
Solution:   Recompute the cursor column when entering Insert mode and the
            cursor is on a character wider than a screen cell. (closes #10057)
Files:      src/edit.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_cursorcolumn_insert_on_tab_1.dump,
            src/testdir/dumps/Test_cursorcolumn_insert_on_tab_2.dump

Patch 8.2.4661
Problem:    Coverity warning for using uninitialized variable.
Solution:   Initialize variable to NULL.
Files:      src/vim9expr.c

Patch 8.2.4662
Problem:    No error for using out of range list index.
Solution:   Check list index at script level like in compiled function.
            (closes #10051)
Files:      src/vim.h, src/evalvars.c, src/list.c, src/proto/list.pro,
            src/eval.c, src/vim9execute.c, src/testdir/test_vim9_assign.vim

Patch 8.2.4663
Problem:    Occasional crash when running the GUI tests.
Solution:   Check that the line index is not too high. (closes #8681)
Files:      src/screen.c

Patch 8.2.4664
Problem:    Elvish files are not recognized.
Solution:   Recognize .elv files. (Bruno Roque, closes #10058)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4665
Problem:    Popup with "minwidth" and scrollbar not updated properly.
Solution:   Adjust the computation if the window width. (closes #10061)
Files:      src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_7.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_8.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_9.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_10.dump,
            src/testdir/dumps/Test_popupwin_drag_minwidth_1.dump,
            src/testdir/dumps/Test_popupwin_drag_minwidth_2.dump,
            src/testdir/dumps/Test_popupwin_drag_minwidth_3.dump

Patch 8.2.4666
Problem:    Vim9: assignment not recognized in skipped block.
Solution:   When skipping assume identifier exists. (closes #10059)
Files:      src/vim9compile.c, src/proto/vim9compile.pro, src/vim9cmds.c,
            src/testdir/test_vim9_cmd.vim, src/testdir/test_vim9_script.vim

Patch 8.2.4667
Problem:    expandcmd() fails on an error.
Solution:   On failure return the command unmodified. (Yegappan Lakshmanan,
            closes #10063)
Files:      runtime/doc/builtin.txt, src/evalfunc.c,
            src/testdir/test_expand.vim

Patch 8.2.4668
Problem:    Buffer allocation failures insufficiently tested.
Solution:   Add tests for memory allocation failures. (Yegappan Lakshmanan,
            closes #10064)
Files:      src/alloc.h, src/buffer.c, src/popupwin.c, src/window.c,
            src/testdir/test_buffer.vim, src/testdir/test_swap.vim

Patch 8.2.4669
Problem:    In compiled code len('string') is not inlined.
Solution:   Compute the length at compile time if possible. (closes #10065)
Files:      src/evalfunc.c, src/proto/evalfunc.pro, src/vim9expr.c,
            src/testdir/test_vim9_disassemble.vim

Patch 8.2.4670
Problem:    Memory allocation failures for new tab page not tested.
Solution:   Add tests with failing memory allocation. (Yegappan Lakshmanan,
            closes #10067)
Files:      src/alloc.h, src/blob.c, src/buffer.c, src/window.c,
            src/testdir/test_blob.vim, src/testdir/test_buffer.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_window_cmd.vim

Patch 8.2.4671
Problem:    'wildignorecase' is sometimes not used for glob().
Solution:   Also use 'wildignorecase' when there are no wildcards.
            (closes #10066, closes #8350)
Files:      src/filepath.c, src/testdir/test_functions.vim

Patch 8.2.4672
Problem:    Using :normal with Ex mode may make :substitute hang.
Solution:   When getting an empty line behave like 'q' was typed.
            (closes #10070)
Files:      src/ex_cmds.c, src/testdir/test_normal.vim

Patch 8.2.4673
Problem:    Redrawing a vertically split window is slow when using CTRL-F and
            CTRL-B.
Solution:   When deciding on USE_REDRAW bail out if scrolling more than three
            lines. (issue #8002)
Files:      src/screen.c

Patch 8.2.4674
Problem:    Cannot force getting MouseMove events.
Solution:   Add the 'mousemoveevent' option with implementation for the GUI.
            (Ernie Rael, closes #10044)
Files:      runtime/doc/gui.txt, runtime/doc/options.txt,
            runtime/doc/testing.txt, src/gui.c, src/option.h,
            src/optiondefs.h, src/testing.c, src/testdir/test_gui.vim

Patch 8.2.4675
Problem:    No error for missing expression after :elseif. (Ernie Rael)
Solution:   Check for missing expression. (closes #10068)
Files:      src/ex_eval.c, src/testdir/test_vim9_script.vim

Patch 8.2.4676 (after 8.2.4675)
Problem:    Test fails with different error.
Solution:   Add argument to :elseif.
Files:      src/testdir/test_vimscript.vim

Patch 8.2.4677
Problem:    The Athena GUI support is outdated.
Solution:   Remove the Athena GUI code.
Files:      Filelist, src/Makefile, src/proto.h, src/clipboard.c,
            src/gui_athena.c, src/proto/gui_athena.pro, src/gui_at_sb.c,
            src/gui_at_sb.h, src/gui_at_fs.c, src/gui_motif.c, src/evalfunc.c,
            src/gui.c, src/gui_beval.c, src/gui_x11.c, src/if_mzsch.c,
            src/main.c, src/menu.c, src/mouse.c, src/version.c, src/feature.h,
            src/gui.h, src/structs.h, src/vim.h, src/testdir/gui_init.vim,
            src/testdir/setup_gui.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_edit.vim, src/testdir/test_gui.vim,
            src/testdir/test_highlight.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_startup.vim, runtime/doc/gui.txt,
            runtime/doc/gui_x11.txt

Patch 8.2.4678
Problem:    Vim9: not all code is tested.
Solution:   Add a few more tests.
Files:      src/vim9execute.c, src/testdir/test_vim9_script.vim,
            src/testdir/test_vim9_import.vim, src/testdir/test_vim9_cmd.vim

Patch 8.2.4679
Problem:    Cannot have expandcmd() give an error message for mistakes.
Solution:   Add an optional argument to give errors. Fix memory leak when
            expanding files fails. (Yegappan Lakshmanan, closes #10071)
Files:      runtime/doc/builtin.txt, src/evalfunc.c, src/filepath.c,
            src/testdir/test_expand.vim, src/testdir/test_vim9_builtin.vim

Patch 8.2.4680
Problem:    Build failure without +postscript.
Solution:   Use another error message.
Files:      src/vim9execute.c, src/testdir/test_vim9_import.vim

Patch 8.2.4681
Problem:    Build fails with a combination of features.
Solution:   Remove #ifdef for alloc_clear_id(). (John Marriott)
Files:      src/alloc.c

Patch 8.2.4682
Problem:    Vim9: can use :unlockvar for const variable. (Ernie Rael)
Solution:   Check whether the variable is a const.
Files:      src/ex_docmd.c, src/evalvars.c, src/vim9script.c,
            src/proto/vim9script.pro, src/eval.c, src/userfunc.c,
            src/testdir/test_vim9_cmd.vim

Patch 8.2.4683
Problem:    Verbose check with dict_find() to see if a key is present.
Solution:   Add dict_has_key(). (Yegappan Lakshmanan, closes #10074)
Files:      src/channel.c, src/dict.c, src/evalwindow.c, src/filepath.c,
            src/highlight.c, src/json.c, src/match.c, src/popupwin.c,
            src/proto/dict.pro, src/quickfix.c, src/search.c, src/sign.c,
            src/tag.c, src/terminal.c, src/testing.c, src/textprop.c,
            src/time.c

Patch 8.2.4684
Problem:    Cannot open a channel on a Unix domain socket.
Solution:   Add Unix domain socket support. (closes #10062)
Files:      runtime/doc/channel.txt, src/channel.c, src/testdir/check.vim,
            src/testdir/shared.vim, src/testdir/test_channel.py,
            src/testdir/test_channel.vim, src/testdir/test_channel_unix.py,
            src/testdir/test_cmdline.vim

Patch 8.2.4685
Problem:    When a swap file is found for a popup there is no dialog and the
            buffer is loaded anyway.
Solution:   Silently load the buffer read-only. (closes #10073)
Files:      runtime/doc/popup.txt, src/memline.c, src/popupwin.c, src/vim.h,
            src/buffer.c, src/testdir/test_popupwin.vim

Patch 8.2.4686
Problem:    Configure doesn't find the Motif library with Cygwin.
Solution:   Check for libXm.dll.a. (Kelvin Lee, closes #10077)
Files:      src/configure.ac, src/auto/configure

Patch 8.2.4687
Problem:    "vimgrep /\%v/ *" may cause a crash.
Solution:   When compiling the pattern with the old engine fails, restore the
            regprog of the new engine instead of leaving it NULL.
            (closes #10079)
Files:      src/regexp.c

Patch 8.2.4688
Problem:    New regexp engine does not give an error for "\%v".
Solution:   Check for a value argument. (issue #10079)
Files:      src/regexp_nfa.c, src/errors.h, src/regexp_bt.c,
            src/testdir/test_regexp_latin.vim

Patch 8.2.4689
Problem:    Using <Cmd> in a mapping does not work for mouse keys in Insert
            mode. (Sergey Vlasov)
Solution:   When reading the <Cmd> argument do not use the stuff buffer.
            (closes #10080)
Files:      src/getchar.c

Patch 8.2.4690
Problem:    Channel tests fail on MS-Windows.
Solution:   Check if the AF_UNIX attribute exists. (closes #10083)
Files:      src/testdir/test_channel.py, src/testdir/test_channel_unix.py

Patch 8.2.4691 (after 8.2.4689)
Problem:    Solution for <Cmd> in a mapping causes trouble.
Solution:   Use another solution: put back CTRL-O after reading the <Cmd>
            sequence.
Files:      src/getchar.c

Patch 8.2.4692
Problem:    No test for what 8.2.4691 fixes.
Solution:   Add a test.  Use a more generic solution. (closes #10090)
Files:      src/getchar.c, src/mouse.c, src/testdir/test_mapping.vim

Patch 8.2.4693 (after 8.2.4688)
Problem:    new regexp does not accept pattern "\%>0v".
Solution:   Do accept digit zero.
Files:      src/regexp_bt.c, src/regexp_nfa.c,
            src/testdir/test_regexp_latin.vim

Patch 8.2.4694
Problem:    Avoidance of #elif causes more preproc nesting.
Solution:   Use #elif where it is useful. (Ozaki Kiichi, closes #10081)
Files:      src/option.c, src/optiondefs.h, src/optionstr.c, src/version.c

Patch 8.2.4695
Problem:    JSON encoding could be faster.
Solution:   Optimize encoding JSON strings. (closes #10086)
Files:      src/json.c, src/testdir/test_json.vim

Patch 8.2.4696
Problem:    delete() with "rf" argument does not report a failure.
Solution:   Return -1 if the directory could not be removed. (closes #10078)
Files:      src/fileio.c, src/testdir/test_functions.vim

Patch 8.2.4697
Problem:    Vim9: crash when adding a duplicate key to a dictionary.
Solution:   Clear the stack item when it has been moved into the dictionary.
            (closes #10087)
Files:      src/vim9execute.c, src/testdir/test_vim9_expr.vim

Patch 8.2.4698
Problem:    Vim9: script variable has no flag that it was set.
Solution:   Add a flag that it was set, to avoid giving it a value when used.
            (closes #10088)
Files:      src/structs.h, src/vim9script.c, src/vim9execute.c,
            src/evalvars.c, src/testdir/test_vim9_assign.vim,
            src/testdir/test_vim9_builtin.vim

Patch 8.2.4699
Problem:    Hard to reproduce hang when reading from a channel.
Solution:   Check for readahead before starting to wait. (closes #10093,
            closes #7781, closes #6364)
Files:      src/channel.c

Patch 8.2.4700
Problem:    Buffer remains active if a WinClosed event throws an exception.
Solution:   Ignore aborting() when closing the buffer. (closes #10097)
Files:      src/window.c, src/testdir/test_autocmd.vim

Patch 8.2.4701
Problem:    Kuka Robot Language files not recognized.
Solution:   Recognize *.src and *.dat files. (Patrick Meiser-Knosowski,
            closes #10096)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim,
            runtime/autoload/dist/ft.vim

Patch 8.2.4702
Problem:    C++ scope labels are hard-coded.
Solution:   Add 'cinscopedecls' to define the labels. (Rom Praschan,
            closes #10109)
Files:      runtime/doc/indent.txt, runtime/doc/options.txt,
            runtime/doc/quickref.txt, runtime/optwin.vim, src/buffer.c,
            src/cindent.c, src/option.c, src/option.h, src/optiondefs.h,
            src/optionstr.c, src/structs.h, src/testdir/test_cindent.vim

Patch 8.2.4703 (after 8.2.4702)
Problem:    Memory leak in handling 'cinscopedecls'.
Solution:   Free the memory before returning.
Files:      src/cindent.c

Patch 8.2.4704
Problem:    Using "else" after return or break increases indent.
Solution:   Remove "else" and reduce indent. (Goc Dundar, closes #10099)
Files:      src/fileio.c, src/memline.c, src/option.c, src/syntax.c

Patch 8.2.4705
Problem:    reg_executing may not be cleared.
Solution:   Reset reg_executing later. (closes #10111, closes #10110)
Files:      src/ex_docmd.c, src/getchar.c, src/globals.h, src/structs.h,
            src/testdir/test_registers.vim

Patch 8.2.4706
Problem:    Buffer remains active if a WinClosed event throws an exception
            when there are multiple tabpages.
Solution:   Ignore aborting() when closing the buffer. (closes #10101)
Files:      src/window.c, src/testdir/test_autocmd.vim

Patch 8.2.4707
Problem:    Redrawing could be a bit more efficient.
Solution:   Optimize redrawing. (closes #10105)
Files:      src/change.c, src/edit.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_cursorcolumn_insert_on_tab_3.dump

Patch 8.2.4708
Problem:    PHP test files are not recognized.
Solution:   Add the *.phpt pattern. (Julien Voisin, closes #10112)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4709
Problem:    After :redraw the statusline highlight might be used.
Solution:   Clear the screen attribute after redrawing the screen.
            (closes #10108)
Files:      src/ex_docmd.c

Patch 8.2.4710
Problem:    Smart indenting does not work after completion.
Solution:   Set "can_si". (Christian Brabandt, closes #10113, closes #558)
Files:      src/edit.c, src/testdir/test_ins_complete.vim

Patch 8.2.4711
Problem:    When 'insermode' is set :edit from <Cmd> mapping misbehaves.
Solution:   Don't set "need_start_insertmode" when already in Insert mode.
            (closes #10116)
Files:      src/ex_cmds.c, src/testdir/test_edit.vim

Patch 8.2.4712
Problem:    Only get profiling information after exiting.
Solution:   Add "profile dump" and "profile stop". (Marco Hinz, Yegappan
            Lakshmanan, closes #10107)
Files:      runtime/doc/repeat.txt, src/profiler.c,
            src/testdir/test_profile.vim

Patch 8.2.4713
Problem:    Plugins cannot track text scrolling.
Solution:   Add the WinScrolled event. (closes #10102)
Files:      runtime/doc/autocmd.txt, src/autocmd.c, src/proto/autocmd.pro,
            src/edit.c, src/gui.c, src/main.c, src/structs.h, src/vim.h,
            src/window.c, src/proto/window.pro, src/testdir/test_autocmd.vim

Patch 8.2.4714
Problem:    Using g:filetype_dat and g:filetype_src not tested.
Solution:   Add a test. (Patrick Meiser-Knosowski, closes #10117)
Files:      src/testdir/test_filetype.vim

Patch 8.2.4715
Problem:    Vagrantfile not recognized.
Solution:   Recognize Vagrantfile as ruby. (Julien Voisin, closes #10119)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4716
Problem:    Memory allocation failure not tested when defining a function.
Solution:   Add a test. (Yegappan Lakshmanan, closes #10127)
Files:      src/alloc.c, src/alloc.h, src/proto/alloc.pro, src/userfunc.c,
            src/testdir/test_user_func.vim, src/testdir/test_vim9_func.vim

Patch 8.2.4717
Problem:    For TextYankPost v:event does not contain information about the
            operation being inclusive or not.
Solution:   Add "inclusive" to v:event. (Justin M. Keyes, Yegappan Lakshmanan,
            closes #10125)
Files:      runtime/doc/autocmd.txt, src/register.c,
            src/testdir/test_autocmd.vim

Patch 8.2.4718
Problem:    @@@ in the last line sometimes drawn in the wrong place.
Solution:   Make sure the column is valid. (closes #10130)
Files:      src/drawscreen.c, src/screen.c, src/testdir/test_display.vim
            src/testdir/dumps/Test_display_lastline_1.dump,
            src/testdir/dumps/Test_display_lastline_2.dump,
            src/testdir/dumps/Test_display_lastline_3.dump,
            src/testdir/dumps/Test_display_lastline_4.dump

Patch 8.2.4719
Problem:    ">" marker sometimes not displayed in the jumplist.
Solution:   If the buffer no longer exists show "-invalid-". (Christian
            Brabandt, closes #10131, closes #10100)
Files:      runtime/doc/motion.txt, src/mark.c, src/testdir/Make_all.mak,
            src/testdir/test_alot.vim, src/testdir/test_jumplist.vim,
            src/testdir/test_jumps.vim

Patch 8.2.4720
Problem:    ABB Rapid files are not recognized properly.
Solution:   Add checks for ABB Rapid files. (Patrick Meiser-Knosowski,
            closes #10104)
Files:      runtime/autoload/dist/ft.vim, runtime/doc/filetype.txt,
            runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4721
Problem:    Cooklang files are not recognized.
Solution:   recognize *.cook files. (Goc Dundar, closes #10120)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4722
Problem:    When a recording is ended with a mapped key that key is also
            recorded.
Solution:   Remember the previous last_recorded_len. (closes #10122)
Files:      src/getchar.c, src/testdir/test_registers.vim

Patch 8.2.4723
Problem:    The ModeChanged autocmd event is inefficient.
Solution:   Avoid allocating memory. (closes #10134)  Rename
            trigger_modechanged() to may_trigger_modechanged().
Files:      src/misc1.c, src/proto/misc1.pro, src/edit.c, src/ex_docmd.c,
            src/ex_getln.c, src/insexpand.c, src/normal.c, src/terminal.c,
            src/autocmd.c

Patch 8.2.4724
Problem:    Current instance of last search pattern not easily spotted.
Solution:   Add CurSearch highlighting. (closes #10133)
Files:      runtime/doc/options.txt, runtime/doc/syntax.txt, src/highlight.c,
            src/match.c, src/normal.c, src/optiondefs.h, src/structs.h,
            src/vim.h, src/normal.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_hlsearch_cursearch_multiple_line.dump,
            src/testdir/dumps/Test_hlsearch_cursearch_single_line_1.dump,
            src/testdir/dumps/Test_hlsearch_cursearch_single_line_2.dump,
            src/testdir/dumps/Test_hlsearch_cursearch_single_line_3.dump

Patch 8.2.4725 (after 8.2.4724)
Problem:    Unused variable in tiny build.
Solution:   Add #ifdef.
Files:      src/normal.c

Patch 8.2.4726
Problem:    Cannot use expand() to get the script name.
Solution:   Support expand('<script>'). (closes #10121)
Files:      runtime/doc/cmdline.txt, src/errors.h, src/ex_docmd.c,
            src/scriptfile.c, src/vim.h, src/testdir/test_expand.vim

Patch 8.2.4727
Problem:    Unused code.
Solution:   Remove code and add #ifdefs. (Dominique Pellé, closes #10136)
Files:      runtime/doc/editing.txt, runtime/doc/eval.txt,
            runtime/doc/vim9.txt, src/errors.h, src/option.c, src/search.c,
            src/proto/search.pro

Patch 8.2.4728
Problem:    No test that v:event cannot be modified.
Solution:   Add a test. (closes #10139)
Files:      src/testdir/test_autocmd.vim

Patch 8.2.4729
Problem:    HEEx and Surface templates do not need a separate filetype.
Solution:   Use Eelixir for the similar filetypes. (Aaron Tinio, closes #10124)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4730
Problem:    MS-Windows GUI: cannot use CTRL-/.
Solution:   Handle the WM_KEYUP event. (Yasuhiro Matsumoto, closes #10141)
Files:      src/gui_w32.c

Patch 8.2.4731
Problem:    The changelist index is not remembered per buffer.
Solution:   Keep the changelist index per window and buffer. (closes #10135,
            closes #2173)
Files:      src/buffer.c, src/evalfunc.c, src/structs.h,
            src/testdir/test_changelist.vim

Patch 8.2.4732
Problem:    Duplicate code to free fuzzy matches.
Solution:   Bring back fuzmatch_str_free().
Files:      src/search.c, src/proto/search.pro, src/cmdexpand.c

Patch 8.2.4733 (after 8.2.4729)
Problem:    HEEx and Surface do need a separate filetype.
Solution:   Revert 8.2.4729. (closes #10147)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.2.4734
Problem:    getcharpos() may change a mark position.
Solution:   Copy the mark position. (closes #10148)
Files:      src/eval.c, src/testdir/test_cursor_func.vim

Patch 8.2.4735
Problem:    Quickfix tests can be a bit hard to read.
Solution:   Use heredoc instead of strings and line continuation. (Yegappan
            Lakshmanan, closes #10145)
Files:      src/testdir/test_quickfix.vim

Patch 8.2.4736
Problem:    Build problem for Cygwin with Motif.
Solution:   Undefine ControlMask. (Kelvin Lee, closes #10152)
Files:      src/mbyte.c

Patch 8.2.4737
Problem:    // in JavaScript string recognized as comment.
Solution:   Only check for linecomment if 'cindent' is set. (closes #10151)
Files:      src/change.c, src/testdir/test_textformat.vim

Patch 8.2.4738
Problem:    Esc on commandline executes command instead of abandoning it.
Solution:   Save and restore KeyTyped when removing the popup menu.
            (closes #10154)
Files:      src/cmdexpand.c, src/testdir/test_cmdline.vim,
            src/testdir/dumps/Test_wildmenu_with_pum_foldexpr_1.dump,
            src/testdir/dumps/Test_wildmenu_with_pum_foldexpr_2.dump

Patch 8.2.4739
Problem:    Accessing freed memory after WinScrolled autocmd event.
Solution:   Check the window pointer is still valid. (closes #10156)
            Remove the argument from may_trigger_winscrolled().
Files:      src/window.c, src/proto/window.pro, src/edit.c, src/gui.c,
            src/main.c, src/testdir/test_autocmd.vim

Patch 8.2.4740
Problem:    When expand() fails there is no error message.
Solution:   When 'verbose' is set give an error message.
Files:      runtime/doc/builtin.txt, src/evalfunc.c,
            src/testdir/test_expand.vim

Patch 8.2.4741 (after 8.2.4740)
Problem:    Startup test fails.
Solution:   Avoid an error for verbose expansion.  Fix that the "0verbose"
            command modifier doesn't work.
Files:      runtime/syntax/syntax.vim, runtime/syntax/synload.vim,
            src/structs.h, src/ex_docmd.c, src/testdir/test_excmd.vim

Patch 8.2.4742
Problem:    There is no way to start logging very early in startup.
Solution:   Add the --log argument.  Include the date in the start message in
            the log file.  Avoid a duplicate message when forking.  Log an
            executed shell command.
Files:      runtime/doc/starting.txt, runtime/doc/channel.txt,
            src/main.c, src/channel.c, src/os_unix.c, src/os_win32.c,
            src/testdir/test_startup.vim

Patch 8.2.4743
Problem:    Clang 14 is available on CI.
Solution:   Switch from clang 13 to 14. (closes #10157)
Files:      .github/workflows/ci.yml

Patch 8.2.4744
Problem:    A terminal window can't use the bell.
Solution:   Add bell support for the terminal window. (closes #10178)
Files:      runtime/doc/options.txt, src/gui_w32.c, src/option.h,
            src/optionstr.c, src/terminal.c

Patch 8.2.4745 (after 8.2.4744)
Problem:    Using wrong flag for using bell in the terminal.
Solution:   Change to use BO_TERM.
Files:      src/terminal.c, src/misc1.c
