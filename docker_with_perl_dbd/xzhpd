
Patch 8.1.1966
Problem:    Some code in options.c fits better elsewhere.
Solution:   Move functions from options.c to other files. (Yegappan
            Lakshmanan, closes #4889)
Files:	    src/evalfunc.c, src/globals.h, src/indent.c, src/map.c,
            src/option.c, src/proto/map.pro, src/proto/option.pro,
            src/proto/quickfix.pro, src/proto/screen.pro, src/proto/spell.pro,
            src/proto/window.pro, src/quickfix.c, src/screen.c, src/spell.c,
            src/window.c

Patch 8.1.1967
Problem:    Line() only works for the current window.
Solution:   Add an optional argument for the window to use.
Files:	    runtime/eval.txt, src/evalfunc.c, src/testdir/test_popupwin.vim

Patch 8.1.1968
Problem:    Crash when using nested map().
Solution:   Clear the pointer in prepare_vimvar(). (Ozaki Kiichi,
            closes #4890, closes #4891)
Files:	    src/evalvars.c, src/testdir/test_filter_map.vim,
            src/testdir/test_functions.vim

Patch 8.1.1969
Problem:    Popup window filter is used in all modes.
Solution:   Add the "filtermode" property.
Files:	    src/popupwin.c, src/vim.h, src/map.c, src/proto/map.pro,
            src/structs.h, runtime/doc/popup.txt,
            src/testdir/test_popupwin.vim

Patch 8.1.1970
Problem:    Search stat space wrong, no test for 8.1.1965.
Solution:   Fix check for cmd_silent.  Add a test. (Christian Brabandt)
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1971
Problem:    Manually enabling features causes build errors. (John Marriott)
Solution:   Adjust #ifdefs.
Files:	    src/proto.h, src/popupmnu.c, src/buffer.c, src/quickfix.c,
            src/ui.c

Patch 8.1.1972
Problem:    No proper test for getchar().
Solution:   Add a test with special characters.
Files:	    src/testdir/test_functions.vim

Patch 8.1.1973
Problem:    Cannot build without the quickfix feature.
Solution:   Remove #ifdef for qf_info_T.
Files:	    src/structs.h

Patch 8.1.1974
Problem:    Coverity warns for using pointer as array.
Solution:   Call var2fpos() directly instead of using f_line().
Files:	    src/evalfunc.c

Patch 8.1.1975
Problem:    MS-Windows GUI responds slowly to timer.
Solution:   Break out of wait loop when timer was added or input is available.
            (closes #4893)
Files:	    src/gui_w32.c

Patch 8.1.1976
Problem:    Travis log always shows test output.
Solution:   Change script to avoid if/else. (Ozaki Kiichi, closes #4892)
Files:	    .travis.yml

Patch 8.1.1977
Problem:    Terminal debugger plugin may hang.
Solution:   Wait longer when still reading symbols.
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.1978
Problem:    The eval.c file is too big.
Solution:   Move filter() and map() to list.c.
Files:	    src/eval.c, src/proto/eval.pro, src/list.c, src/proto/list.pro,
            src/evalfunc.c

Patch 8.1.1979
Problem:    Code for handling file names is spread out.
Solution:   Move code to new filepath.c file.  Graduate FEAT_MODIFY_FNAME.
Files:	    src/filepath.c, Filelist, src/Make_cyg_ming.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/README.md, src/eval.c, src/evalfunc.c,
            src/ex_docmd.c, src/feature.h, src/findfile.c, src/if_cscope.c,
            src/message.c, src/misc1.c, src/proto.h, src/proto/eval.pro,
            src/proto/evalvars.pro src/proto/filepath.pro,
            src/proto/findfile.pro, src/proto/message.pro, src/regexp.c,
            src/version.c

Patch 8.1.1980
Problem:    Fix for search stat not tested.
Solution:   Add a screenshot test. (Christian Brabandt)
Files:	    src/testdir/test_search_stat.vim,
            src/testdir/dumps/Test_searchstat_1.dump,
            src/testdir/dumps/Test_searchstat_2.dump

Patch 8.1.1981
Problem:    The evalfunc.c file is too big.
Solution:   Move undo functions to undo.c.  Move cmdline functions to
            ex_getln.c.  Move some container functions to list.c.
Files:	    src/evalfunc.c, src/undo.c, src/proto/undo.pro, src/ex_getln.c,
            src/proto/ex_getln.pro, src/list.c, src/proto/list.pro

Patch 8.1.1982
Problem:    More functions can be used as methods.
Solution:   Make popup functions usable as a method.
Files:	    runtime/doc/popup.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1983
Problem:    Compiler nags for uninitialized variable and unused function.
Solution:   Add unnecessary initialization.  Move function inside #ifdef.
Files:	    src/memline.c, src/channel.c

Patch 8.1.1984
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/testdir/test_perl.vim,
            src/testdir/test_prompt_buffer.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_pyx2.vim

Patch 8.1.1985
Problem:    Code for dealing with paths is spread out.
Solution:   Move path related functions from misc1.c to filepath.c.
            Remove NO_EXPANDPATH.
Files:	    src/misc1.c, src/proto/misc1.pro, src/filepath.c,
            src/evalfunc.c, src/globals.h, src/misc2.c, src/os_unix.c,
            src/os_unix.h, src/proto/filepath.pro, src/scriptfile.c,
            src/proto/misc2.pro, src/proto/scriptfile.pro, src/vim.h

Patch 8.1.1986
Problem:    More functions can be used as methods.
Solution:   Make textprop functions usable as a method.
Files:	    runtime/doc/textprop.txt, src/evalfunc.c,
            src/testdir/test_textprop.vim

Patch 8.1.1987
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_clientserver.vim,
            src/testdir/test_eval_stuff.vim, src/testdir/test_functions.vim,
            src/testdir/test_reltime.vim, src/testdir/test_rename.vim

Patch 8.1.1988
Problem:    :startinsert! does not work the same way as "A".
Solution:   Use the same code to move the cursor. (closes #4896)
Files:	    src/ex_docmd.c, src/normal.c, src/proto/normal.pro,
            src/testdir/test_edit.vim

Patch 8.1.1989
Problem:    The evalfunc.c file is still too big.
Solution:   Move f_pathshorten() to filepath.c.  Move f_cscope_connection() to
            if_cscope.c.  Move diff_ functions to diff.c.  Move timer_
            functions to ex_cmds2.c.  move callback functions to evalvars.c.
Files:	    src/evalfunc.c, src/proto/evalfunc.pro, src/filepath.c,
            src/proto/filepath.pro, src/if_cscope.c, src/proto/if_cscope.pro,
            src/diff.c, src/proto/diff.pro, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro, src/evalvars.c, src/proto/evalvars.pro

Patch 8.1.1990
Problem:    Cannot build with eval but without cscope.
Solution:   Always include if_cscope.pro.
Files:	    src/proto.h

Patch 8.1.1991
Problem:    Still cannot build with eval but without cscope.
Solution:   Move f_cscope_connection() outside of #ifdef.
Files:	    src/if_cscope.c

Patch 8.1.1992
Problem:    The search stat moves when wrapping at the end of the buffer.
Solution:   Put the "W" in front instead of at the end.
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1993
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufline.vim, src/testdir/test_charsearch.vim,
            src/testdir/test_clientserver.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_diffmode.vim,
            src/testdir/test_environ.vim, src/testdir/test_functions.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_search.vim,
            src/testdir/test_searchpos.vim, src/testdir/test_utf8.vim

Patch 8.1.1994
Problem:    MS-Windows: cannot build with eval but without cscope
Solution:   Adjust the makefiles to always build if_cscope.obj.
Files:	    src/Make_mvc.mak, src/Make_cyg_ming.mak

Patch 8.1.1995
Problem:    More functions can be used as methods.
Solution:   Make sign functions usable as a method.
Files:	    runtime/doc/sign.txt, src/evalfunc.c, src/testdir/test_signs.vim

Patch 8.1.1996
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_expr.vim,
            src/testdir/test_functions.vim, src/testdir/test_put.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_sha256.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_tagjump.vim,
            src/testdir/test_vartabs.vim

Patch 8.1.1997
Problem:    No redraw after a popup window filter is invoked.
Solution:   Redraw if needed.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim
            src/testdir/dumps/Test_popupwin_menu_filter_5.dump

Patch 8.1.1998
Problem:    Redraw even when no popup window filter was invoked.
Solution:   Only redraw when must_redraw was set to a larger value.
Files:	    src/popupwin.c

Patch 8.1.1999
Problem:    Calling both PlaySoundW() and PlaySoundA().
Solution:   Only use PlaySoundW(). (Dan Thompson, closes #4903)
Files:	    src/sound.c

Patch 8.1.2000
Problem:    Plugin cannot get the current IME status.
Solution:   Add the getimstatus() function. (closes #4904)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/mbyte.c,
            src/proto/mbyte.pro, src/testdir/test_iminsert.vim

Patch 8.1.2001
Problem:    Some source files are too big.
Solution:   Move buffer and window related functions to evalbuffer.c and
            evalwindow.c. (Yegappan Lakshmanan, closes #4898)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/buffer.c, src/channel.c, src/evalbuffer.c, src/evalfunc.c,
            src/evalwindow.c, src/proto.h, src/proto/buffer.pro,
            src/proto/evalbuffer.pro, src/proto/evalfunc.pro,
            src/proto/evalwindow.pro, src/proto/window.pro, src/window.c

Patch 8.1.2002
Problem:    Version number 2000 missing.
Solution:   Add the number in the list of patches.
Files:	    src/version.c

Patch 8.1.2003
Problem:    MS-Windows: code page 65001 is not recognized.
Solution:   Use utf-8 for code page 65001. (Dan Thompson, closes #4902)
Files:	    src/mbyte.c

Patch 8.1.2004
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_breakindent.vim, src/testdir/test_expr.vim,
            src/testdir/test_functions.vim, src/testdir/test_sound.vim,
            src/testdir/test_spell.vim, src/testdir/test_substitute.vim,
            src/testdir/test_swap.vim, src/testdir/test_utf8.vim

Patch 8.1.2005
Problem:    The regexp.c file is too big.
Solution:   Move the backtracking engine to a separate file. (Yegappan
            Lakshmanan, closes #4905)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Makefile,
            src/regexp.c, src/regexp_bt.c

Patch 8.1.2006
Problem:    Build failure with huge features but without channel feature.
Solution:   Add #ifdef. (Dominique Pelle, closes #4906)
Files:	    src/ui.c

Patch 8.1.2007
Problem:    No test for what 8.1.1926 fixes.
Solution:   Add a test case.
Files:	    src/testdir/test_highlight.vim

Patch 8.1.2008
Problem:    Error for invalid range when using listener and undo. (Paul Jolly)
Solution:   Do not change the cursor before the lines are restored.
            (closes #4908)
Files:	    src/undo.c, src/testdir/test_listener.vim

Patch 8.1.2009
Problem:    Cursorline highlighting not updated in popup window. (Marko
            Mahnič)
Solution:   Check if the cursor position changed. (closes #4912)
Files:	    src/popupwin.c, src/structs.h, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_cursorline_7.dump

Patch 8.1.2010
Problem:    New file uses old style comments.
Solution:   Change to new style comments. (Yegappan Lakshmanan, closes #4910)
Files:	    src/regexp_bt.c

Patch 8.1.2011
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.  Make the window
            command test faster.
Files:	    runtime/doc/eval.txt, runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_assert.vim, src/testdir/test_gui.vim,
            src/testdir/test_messages.vim, src/testdir/test_options.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_taglist.vim,
            src/testdir/test_termcodes.vim, src/testdir/test_timers.vim,
            src/testdir/test_vimscript.vim, src/testdir/test_viminfo.vim,
            src/testdir/test_window_cmd.vim

Patch 8.1.2012
Problem:    More functions can be used as methods.
Solution:   Make terminal functions usable as a method.  Fix term_getattr().
Files:	    runtime/doc/terminal.txt, src/evalfunc.c, src/terminal.c
            src/testdir/test_mksession.vim, src/testdir/test_terminal.vim

Patch 8.1.2013
Problem:    More functions can be used as methods.
Solution:   Make various functions usable as a method.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_cursor_func.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_functions.vim,
            src/testdir/test_listchars.vim, src/testdir/test_timers.vim,
            src/testdir/test_undo.vim, src/testdir/test_window_cmd.vim,
            src/testdir/test_window_id.vim

Patch 8.1.2014
Problem:    Terminal altscreen test fails sometimes.
Solution:   Use WaitFor().
Files:	    src/testdir/test_terminal.vim

Patch 8.1.2015
Problem:    Terminal altscreen test still fails sometimes.
Solution:   Write the escape sequence in a file.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.2016
Problem:    Terminal altscreen test now fails on MS-Windows.
Solution:   Skip the test on MS-Windows
Files:	    src/testdir/test_terminal.vim

Patch 8.1.2017
Problem:    Cannot execute commands after closing the cmdline window.
Solution:   Also trigger BufEnter and WinEnter. (closes #4762)
Files:	    runtime/doc/autocmd.txt, runtime/doc/cmdline.txt, src/ex_getln.c,
            src/testdir/test_cmdline.vim

Patch 8.1.2018
Problem:    Using freed memory when out of memory and displaying message.
Solution:   Make a copy of the message first.
Files:	    src/main.c, src/message.c, src/normal.c

Patch 8.1.2019
Problem:    'cursorline' always highlights the whole line.
Solution:   Add 'cursorlineopt' to specify what is highlighted.
            (Ozaki Kiichi, closes #4693)
Files:	    runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/doc/syntax.txt, runtime/optwin.vim, src/option.c,
            src/option.h, src/screen.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/gen_opt_test.vim,
            src/testdir/test_alot.vim, src/testdir/test_cursorline.vim

Patch 8.1.2020
Problem:    It is not easy to change the window layout.
Solution:   Add win_splitmove(). (Andy Massimino, closes #4561)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/evalwindow.c,
            src/proto/evalwindow.pro, src/testdir/test_window_cmd.vim

Patch 8.1.2021
Problem:    Some global functions can be local to the file.
Solution:   Add "static". (Yegappan Lakshmanan, closes #4917)
Files:	    src/ex_cmds2.c, src/filepath.c, src/hangulin.c, src/mbyte.c,
            src/misc1.c, src/os_unix.c, src/proto/ex_cmds2.pro,
            src/proto/filepath.pro, src/proto/hangulin.pro,
            src/proto/mbyte.pro, src/proto/misc1.pro, src/proto/os_unix.pro,
            src/proto/terminal.pro, src/proto/undo.pro, src/pty.c,
            src/terminal.c, src/undo.c

Patch 8.1.2022
Problem:    The option.c file is too big.
Solution:   Move option definitions to a separate file. (Yegappan Lakshmanan,
            closes #4918)
Files:	    Filelist, src/Make_mvc.mak, src/Make_vms.mms, src/Makefile,
            src/option.c, src/optiondefs.h

Patch 8.1.2023
Problem:    No test for synIDattr() returning "strikethrough".
Solution:   Extend the synIDattr() test. (Jaskaran Singh, closes #4929)
Files:	    src/testdir/test_syn_attr.vim

Patch 8.1.2024
Problem:    Delete call commented out for debugging.
Solution:   Restore the delete call. (Christian Brabandt)
Files:	    src/testdir/test_undo.vim

Patch 8.1.2025
Problem:    MS-Windows: Including shlguid.h causes problems for msys2.
Solution:   Do not include shlguid.h. (closes #4913)
Files:	    src/GvimExt/gvimext.h

Patch 8.1.2026
Problem:    Possibly using uninitialized memory.
Solution:   Check if "dict" is NULL. (closes #4925)
Files:	    src/ops.c

Patch 8.1.2027
Problem:    MS-Windows: problem with ambiwidth characters.
Solution:   handle ambiguous width characters in ConPTY on Windows 10 (1903).
            (Nobuhiro Takasaki, closes #4411)
Files:	    src/Make_mvc.mak, src/Make_cyg_ming.mak, src/libvterm/src/parser.c,
            src/libvterm/src/state.c, src/libvterm/src/termscreen.c,
            src/libvterm/src/unicode.c, src/libvterm/src/vterm_internal.h,
            src/misc2.c, src/os_win32.c, src/proto/misc2.pro,
            src/proto/os_win32.pro

Patch 8.1.2028
Problem:    Options test script does not work.
Solution:   Use optiondefs.h for input.
Files:	    src/testdir/Makefile, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak

Patch 8.1.2029
Problem:    Cannot control 'cursorline' highlighting well.
Solution:   Add "screenline". (Christian Brabandt, closes #4933)
Files:	    runtime/doc/options.txt, src/change.c, src/main.c, src/option.c,
            src/option.h, src/optiondefs.h, src/screen.c, src/structs.h,
            src/highlight.c, src/testdir/dumps/Test_Xcursorline_1.dump,
            src/testdir/dumps/Test_Xcursorline_2.dump,
            src/testdir/dumps/Test_Xcursorline_3.dump,
            src/testdir/dumps/Test_Xcursorline_4.dump,
            src/testdir/dumps/Test_Xcursorline_5.dump,
            src/testdir/dumps/Test_Xcursorline_6.dump,
            src/testdir/dumps/Test_Xcursorline_7.dump,
            src/testdir/dumps/Test_Xcursorline_8.dump,
            src/testdir/dumps/Test_Xcursorline_9.dump,
            src/testdir/dumps/Test_Xcursorline_10.dump,
            src/testdir/dumps/Test_Xcursorline_11.dump,
            src/testdir/dumps/Test_Xcursorline_12.dump,
            src/testdir/dumps/Test_Xcursorline_13.dump,
            src/testdir/dumps/Test_Xcursorline_14.dump,
            src/testdir/dumps/Test_Xcursorline_15.dump,
            src/testdir/dumps/Test_Xcursorline_16.dump,
            src/testdir/dumps/Test_Xcursorline_17.dump,
            src/testdir/dumps/Test_Xcursorline_18.dump,
            src/testdir/gen_opt_test.vim, src/testdir/test_cursorline.vim,
            src/testdir/dumps/Test_cursorline_yank_01.dump,
            src/testdir/dumps/Test_wincolor_01.dump,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.2030
Problem:    Tests fail when build with normal features and terminal.
            (Dominique Pelle)
Solution:   Disable tests that won't work. (closes #4932)
Files:	    src/testdir/test_popupwin.vim, src/testdir/test_terminal.vim

Patch 8.1.2031
Problem:    Cursor position wrong when resizing and using conceal.
Solution:   Set the flags that the cursor position is valid when setting the
            row and column during redrawing. (closes #4931)
Files:	    src/screen.c, src/testdir/test_conceal.vim,
            src/testdir/dumps/Test_conceal_resize_01.dump,
            src/testdir/dumps/Test_conceal_resize_02.dump

Patch 8.1.2032
Problem:    Scrollbar thumb wrong in popup window.
Solution:   Adjust thumb size and position when scrolled.
Files:	    src/popupwin.c, src/testdir/dumps/Test_popupwin_scroll_2.dump

Patch 8.1.2033
Problem:    Cannot build with tiny features.
Solution:   Add #ifdef.
Files:	    src/screen.c

Patch 8.1.2034
Problem:    Dark theme of GTK 3 not supported.
Solution:   Add the "d" flag in 'guioptions'. (Jonathan Conder, closes #4934)
Files:	    runtime/doc/options.txt, src/feature.h, src/gui.c,
            src/gui_gtk_x11.c, src/option.h, src/proto/gui_gtk_x11.pro,
            src/testdir/test_gui.vim

Patch 8.1.2035
Problem:    Recognizing octal numbers is confusing.
Solution:   Introduce scriptversion 4: do not use octal and allow for single
            quote inside numbers.
Files:	    runtime/doc/eval.txt, src/vim.h, src/eval.c, src/scriptfile.c,
            src/evalfunc.c, src/testdir/test_eval_stuff.vim,
            src/testdir/test_functions.vim

Patch 8.1.2036 (after 8.1.2035)
Problem:    The str2nr() tests fail.
Solution:   Add missing part of patch.
Files:	    src/charset.c

Patch 8.1.2037
Problem:    Can call win_gotoid() in cmdline window.
Solution:   Disallow switching windows. (Yasuhiro Matsumoto, closes #4940)
Files:	    src/evalwindow.c, src/testdir/test_cmdline.vim

Patch 8.1.2038
Problem:    has('vimscript-4') is always 0.
Solution:   Add "vimscript-4" to the feature table. (Naruhiko Nishino,
            closes #4941)
Files:	    src/evalfunc.c, src/testdir/test_eval_stuff.vim

Patch 8.1.2039
Problem:    Character from 'showbreak' does not use 'wincolor'. (Nick Jensen)
Solution:   Mix with 'wincolor'. (closes #4938)
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_showbreak.dump

Patch 8.1.2040
Problem:    No highlighting of current line in quickfix window.
Solution:   Combine with line_attr.
Files:	    src/screen.c, src/testdir/test_quickfix.vim,
            src/testdir/dumps/Test_quickfix_cwindow_1.dump,
            src/testdir/dumps/Test_quickfix_cwindow_2.dump

Patch 8.1.2041 (after 8.1.2040)
Problem:    No test for diff mode with syntax highlighting.
Solution:   Add a test case.
Files:	    src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_syntax_1.dump

Patch 8.1.2042
Problem:    The evalfunc.c file is too big.
Solution:   Move getchar() and parse_queued_messages() to getchar.c.
Files:	    src/getchar.c, src/proto/getchar.pro, src/evalfunc.c, src/misc2.c,
            src/proto/misc2.pro

Patch 8.1.2043
Problem:    Not sufficient testing for quoted numbers.
Solution:   Add a few more test cases.
Files:	    src/testdir/test_functions.vim, src/testdir/test_eval_stuff.vim

Patch 8.1.2044
Problem:    No easy way to process postponed work. (Paul Jolly)
Solution:   Add the SafeState autocommand event.
Files:	    runtime/doc/autocmd.txt, src/main.c, src/proto/main.pro,
            src/vim.h, src/autocmd.c, src/channel.c, src/edit.c,
            src/ex_getln.c

Patch 8.1.2045
Problem:    The option.c file is too big.
Solution:   Split off the code dealing with strings. (Yegappan Lakshmanan,
            closes #4937)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/option.c, src/option.h, src/optiondefs.h, src/optionstr.c,
            src/ops.c, src/os_unix.c, src/proto.h, src/proto/option.pro,
            src/proto/optionstr.pro

Patch 8.1.2046
Problem:    SafeState may be triggered at the wrong moment.
Solution:   Move it up higher to after where messages are processed.  Add a
            SafeStateAgain event to trigger there.
Files:	    runtime/doc/autocmd.txt, src/main.c, src/proto/main.pro,
            src/getchar.c, src/channel.c, src/autocmd.c, src/vim.h

Patch 8.1.2047
Problem:    Cannot check the current state.
Solution:   Add the state() function.
Files:	    runtime/doc/eval.txt, src/misc1.c, src/proto/misc1.pro,
            src/evalfunc.c, src/proto/evalfunc.pro, src/main.c,
            src/proto/main.pro, src/channel.c, src/proto/channel.pro,
            src/userfunc.c, src/proto/userfunc.pro

Patch 8.1.2048
Problem:    Not clear why SafeState and SafeStateAgain are not triggered.
Solution:   Add log statements.
Files:	    src/getchar.c, src/main.c, src/proto/main.pro

Patch 8.1.2049 (after 8.1.2048)
Problem:    Cannot build tiny version.
Solution:   Add #ifdefs.
Files:	    src/main.c

Patch 8.1.2050
Problem:    Popup window test fails in some configurations. (James McCoy)
Solution:   Clear the command line.
Files:	    src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_10.dump

Patch 8.1.2051
Problem:    Double-click test is a bit flaky.
Solution:   Correct entry in list of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.2052
Problem:    Using "x" before a closed fold may delete that fold.
Solution:   Do not translate 'x' do "dl". (Christian Brabandt, closes #4927)
Files:	    src/normal.c, src/testdir/test_fold.vim

Patch 8.1.2053
Problem:    SafeStateAgain not triggered if callback uses feedkeys().
Solution:   Check for safe state in the input loop.  Make log messages easier
            to find. Add 'S' flag to state().
Files:	    src/main.c, src/proto/main.pro, src/getchar.c,
            runtime/doc/eval.txt

Patch 8.1.2054
Problem:    Compiler test for Perl may fail.
Solution:   Accept any error line number. (James McCoy, closes #4944)
Files:	    src/testdir/test_compiler.vim

Patch 8.1.2055
Problem:    Not easy to jump to function line from profile.
Solution:   Use "file:99" instead of "file line 99" so that "gf" works.
            (Daniel Hahler, closes #4951)
Files:	    src/profiler.c, src/testdir/test_profile.vim

Patch 8.1.2056
Problem:    "make test" for indent files doesn't cause make to fail.
Solution:   Exit the script with ":cquit". (Daniel Hahler, closes #4949)
Files:	    runtime/indent/testdir/runtest.vim, .gitignore

Patch 8.1.2057
Problem:    The screen.c file is much too big.
Solution:   Split it in three parts. (Yegappan Lakshmanan, closes #4943)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/drawline.c, src/drawscreen.c, src/globals.h, src/proto.h,
            src/proto/drawline.pro, src/proto/drawscreen.pro,
            src/proto/screen.pro, src/screen.c, src/vim.h

Patch 8.1.2058
Problem:    Function for ex command is named inconsistently.
Solution:   Rename do_marks() to ex_marks().
Files:	    src/mark.c, src/proto/mark.pro, src/ex_cmds.h

Patch 8.1.2059
Problem:    Fix for "x" deleting a fold has side effects.
Solution:   Fix it where the fold is included.
Files:	    src/normal.c

Patch 8.1.2060
Problem:    "precedes" in 'listchars' not used properly.
Solution:   Correctly handle the "precedes" char in list mode for long lines.
            (Zach Wegner, Christian Brabandt, closes #4953)
Files:	    runtime/doc/options.txt, src/drawline.c,
            src/testdir/test_display.vim, src/testdir/view_util.vim

Patch 8.1.2061
Problem:    MS-Windows GUI: ":sh" crashes when trying to use a terminal.
Solution:   Check for a NULL command. (Yasuhiro Matsumoto, closes #4958)
Files:	    src/os_win32.c

Patch 8.1.2062
Problem:    The mouse code is spread out.
Solution:   Move all the mouse code to mouse.c. (Yegappan Lakshmanan,
            closes #4959)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/auto/configure, src/configure.ac, src/edit.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_getln.c, src/insexpand.c,
            src/libvterm/src/termmouse.c, src/libvterm/src/mouse.c,
            src/main.c, src/message.c, src/misc1.c, src/misc2.c, src/mouse.c,
            src/normal.c, src/proto.h, src/proto/edit.pro,
            src/proto/misc1.pro, src/proto/misc2.pro, src/proto/mouse.pro,
            src/proto/normal.pro, src/proto/term.pro, src/proto/ui.pro,
            src/search.c, src/term.c, src/ui.c, src/vim.h, src/window.c

Patch 8.1.2063
Problem:    Some tests fail when +balloon_eval_term is missing but
            _balloon_eval is present. (Dominique Pelle)
Solution:   Check the right feature in the test. (closes #4962)
Files:	    src/testdir/test_popupwin.vim, src/testdir/test_terminal.vim

Patch 8.1.2064
Problem:    MS-Windows: compiler warnings for unused arguments.
Solution:   Add UNUSED. (Yegappan Lakshmanan, closes #4963)
Files:	    src/channel.c, src/ex_docmd.c, src/ex_getln.c, src/fileio.c,
            src/gui_w32.c, src/main.c, src/memline.c, src/os_mswin.c,
            src/os_win32.c, src/terminal.c, src/ui.c, src/undo.c

Patch 8.1.2065
Problem:    Compiler warning building non-GUI with MinGW.
Solution:   Adjust #ifdefs. (Yegappan Lakshmanan, closes #4964)
Files:	    sre/mouse.c

Patch 8.1.2066
Problem:    No tests for state().
Solution:   Add tests.  Clean up some feature checks.  Make "a" flag work.
Files:	    src/testdir/test_functions.vim, src/testdir/test_terminal.vim,
            src/misc1.c

Patch 8.1.2067
Problem:    No tests for SafeState and SafeStateAgain.
Solution:   Add tests.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2068 (after 8.1.2067)
Problem:    Test for SafeState and SafeStateAgain may fail.
Solution:   Accept more possible responses
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2069 (after 8.1.2068)
Problem:    Test for SafeStateAgain may still fail.
Solution:   Send another message to trigger SafeStateAgain.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2070
Problem:    Mouse code is spread out.
Solution:   Move mouse terminal code parsing to mouse.c. (Yegappan Lakshmanan,
            closes #4966)
Files:	    src/mouse.c, src/proto/mouse.pro, src/proto/term.pro, src/term.c

Patch 8.1.2071
Problem:    When 'wincolor' is set text property changes highlighting. (Andy
            Stewart)
Solution:   Fix combining colors. (closes #4968)
Files:	    src/drawline.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_wincolor_01.dump

Patch 8.1.2072
Problem:    "gk" moves to start of line instead of upwards.
Solution:   Fix off-by-one error. (Christian Brabandt, closes #4969)
Files:	    src/normal.c, src/testdir/test_normal.vim

Patch 8.1.2073
Problem:    When editing a buffer 'colorcolumn' may not work.
Solution:   Set the buffer before copying option values. Call
            check_colorcolumn() after copying window options.
Files:	    src/buffer.c, src/option.c, src/proto/option.pro,
            src/proto/indent.pro, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_colorcolumn_1.dump

Patch 8.1.2074
Problem:    Test for SafeState autocommand is a bit flaky.
Solution:   Add to list of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.2075
Problem:    Get many log messages when waiting for a typed character.
Solution:   Do not repeat the repeated messages when nothing happens.
Files:	    src/globals.h, src/channel.c, src/main.c

Patch 8.1.2076
Problem:    Crash when trying to put a terminal buffer in a popup window.
Solution:   Check for NULL buffer.  Do not allow putting a terminal in a popup
            window.
Files:	    src/libvterm/src/termscreen.c, src/terminal.c, src/popupwin.c,
            runtime/doc/popup.txt, src/testdir/test_popupwin.vim

Patch 8.1.2077
Problem:    The ops.c file is too big.
Solution:   Move code for dealing with registers to a new file. (Yegappan
            Lakshmanan, closes #4982)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms src/Makefile, src/README.md,
            src/ops.c, src/proto.h, src/proto/ops.pro, src/proto/register.pro,
            src/register.c, src/structs.h

Patch 8.1.2078
Problem:    Build error with +textprop but without +terminal. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/popupwin.c

Patch 8.1.2079
Problem:    Popup window test fails without +terminal.
Solution:   Check for the +terminal feature.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.2080
Problem:    The terminal API is limited and can't be disabled.
Solution:   Add term_setapi() to set the function prefix. (Ozaki Kiichi,
            closes #2907)
Files:	    runtime/doc/eval.txt, runtime/doc/terminal.txt, src/channel.c,
            src/evalfunc.c, src/proto/terminal.pro, src/structs.h,
            src/terminal.c, src/testdir/term_util.vim,
            src/testdir/test_terminal.vim

Patch 8.1.2081
Problem:    The spell.c file is too big.
Solution:   Move the code for spell suggestions to a separate file. (Yegappan
            Lakshmanan, closes #4988)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/proto.h, src/proto/spell.pro, src/proto/spellsuggest.pro,
            src/spell.c, src/spell.h, src/spellsuggest.c

Patch 8.1.2082
Problem:    Some files have a weird name to fit in 8.3 characters.
Solution:   Use a nicer names.
Files:	    Filelist, Makefile, src/popupmnu.c, src/popupmenu.c,
            src/proto/popupmnu.pro, src/proto/popupmenu.pro,
            src/Make_cyg_ming.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_vms.mms, src/Makefile, src/proto.h, src/README.md,
            src/uninstal.c, src/uninstall.c, uninstal.txt, uninstall.txt,
            nsis/gvim.nsi, src/INSTALLpc.txt, src/dosinst.c, src/dosinst.h

Patch 8.1.2083
Problem:    Multi-byte chars do not work properly with "%.*S" in printf().
Solution:   Use mb_ptr2cells(). Daniel Hahler, closes #4989)
Files:	    src/testdir/test_expr.vim, src/message.c

Patch 8.1.2084
Problem:    Amiga: cannot get the user name.
Solution:   Use getpwuid() if available. (Ola Söder, closes #4985)
Files:	    src/os_amiga.c, src/os_amiga.h

Patch 8.1.2085
Problem:    MS-Windows: draw error moving cursor over double-cell character.
Solution:   Move the cursor to the left edge if needed. (Nobuhiro Takasaki,
            closes #4986)
Files:	    src/os_win32.c

Patch 8.1.2086 (after 8.1.2082)
Problem:    Missing a few changes for the renamed files.
Solution:   Rename in a few more places. (Ken Takata)
Files:	    nsis/README.txt, runtime/doc/gui_w32.txt, runtime/doc/usr_90.txt,
            src/GvimExt/GvimExt.reg, src/GvimExt/README.txt,
            src/proto/popupmenu.pro, src/proto/popupmnu.pro

Patch 8.1.2087
Problem:    Cannot easily select one test function to execute.
Solution:   Support the $TEST_FILTER environment variable. (Ozaki Kiichi,
            closes #2695)
Files:	    src/Makefile, src/testdir/runtest.vim, src/testdir/summarize.vim

Patch 8.1.2088
Problem:    Renamed libvterm mouse.c file not in distributed file list.
Solution:   Rename the file in the file list.
Files:	    Filelist

Patch 8.1.2089 (after 8.1.2087)
Problem:    Do not get a hint that $TEST_FILTER was active.
Solution:   Mention $TEST_FILTER if no functions were executed.
Files:	    src/testdir/runtest.vim

Patch 8.1.2090
Problem:    Not clear why channel log file ends.
Solution:   Add a "closing" line.
Files:	    src/channel.c

Patch 8.1.2091
Problem:    Double free when memory allocation fails. (Zu-Ming Jiang)
Solution:   Use VIM_CLEAR() instead of vim_free(). (closes #4991)
Files:	    src/getchar.c

Patch 8.1.2092
Problem:    MS-Windows: redirect in system() does not work.
Solution:   Handle 'shellxescape' and 'shellxquote' better. (Yasuhiro
            Matsumoto, closes #2054)
Files:	    src/ex_cmds.c, src/misc2.c, src/testdir/test_system.vim

Patch 8.1.2093
Problem:    MS-Windows: system() test fails.
Solution:   Expect CR when using systemlist().
Files:	    src/testdir/test_system.vim

Patch 8.1.2094
Problem:    The fileio.c file is too big.
Solution:   Move buf_write() to bufwrite.c. (Yegappan Lakshmanan,
            closes #4990)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/bufwrite.c, src/fileio.c, src/option.c, src/proto.h,
            src/proto/bufwrite.pro, src/proto/fileio.pro, src/structs.h

Patch 8.1.2095
Problem:    Leaking memory when getting item from dict.
Solution:   Also free the key when not evaluating.
Files:	    src/dict.c

Patch 8.1.2096
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_COMMENTS.
Files:	    src/feature.h, src/buffer.c, src/change.c, src/edit.c,
            src/evalfunc.c, src/fold.c, src/insexpand.c, src/misc1.c,
            src/normal.c, src/ops.c, src/option.c, src/optionstr.c,
            src/search.c, src/version.c, src/globals.h, src/option.h,
            src/optiondefs.h, src/structs.h, runtime/doc/change.txt,
            runtime/doc/options.txt, runtime/doc/various.txt

Patch 8.1.2097
Problem:    :mksession is not sufficiently tested.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #4992)
Files:	    src/testdir/test_mksession.vim

Patch 8.1.2098 (after 8.1.2097)
Problem:    mksession test fails on MS-Windows.
Solution:   Skip testing with backslashes on MS-Windows.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.2099
Problem:    state() test fails on some Mac systems.
Solution:   Increase the wait time. (closes #4983)
Files:	    src/testdir/test_functions.vim

Patch 8.1.2100
Problem:    :mksession is not sufficiently tested.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #4993)
Files:	    src/testdir/test_mksession.vim

Patch 8.1.2101
Problem:    write_session_file() often defined but not used.
Solution:   Adjust the #ifdef. (Yegappan Lakshmanan, closes #4998)
Files:	    src/session.c

Patch 8.1.2102
Problem:    Can't build with GTK and FEAT_GUI_GNOME. (Tony Mechelynck)
Solution:   Adjust the #ifdef. (Yegappan Lakshmanan)
Files:	    src/session.c

Patch 8.1.2103
Problem:    wrong error message if "termdebugger" is not executable.
Solution:   Check if "termdebugger" is executable and give a clear error
            message. (Ozaki Kiichi, closes #5000)  Fix indents.
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.2104
Problem:    The normal.c file is too big.
Solution:   Move do_pending_operator() to ops.c. (Yegappan Lakshmanan,
            closes #4999).
Files:	    src/normal.c, src/ops.c, src/proto/normal.pro, src/proto/ops.pro,
            src/globals.h

Patch 8.1.2105
Problem:    MS-Windows: system() may crash.
Solution:   Do not use "itmp" when it is NULL. (Yasuhiro Matsumoto,
            closes #5005)
Files:	    src/ex_cmds.c

Patch 8.1.2106
Problem:    No tests for dragging the mouse beyond the window.
Solution:   Add a test. (Dominique Pelle, closes #5004)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2107
Problem:    Various memory leaks reported by asan.
Solution:   Free the memory. (Ozaki Kiichi, closes #5003)
Files:	    src/buffer.c, src/change.c, src/eval.c, src/evalfunc.c,
            src/option.c, src/popupwin.c, src/proto/change.pro,
            src/scriptfile.c, src/terminal.c, src/testdir/test_method.vim

Patch 8.1.2108
Problem:    Cannot close the cmdline window from CmdWinEnter. (George Brown)
Solution:   Reset cmdwin_result earlier. (Christian Brabandt, closes #4980)
Files:	    src/ex_getln.c, src/testdir/test_autocmd.vim

Patch 8.1.2109
Problem:    popup_getoptions() hangs with tab-local popup.
Solution:   Correct pointer name. (Marko Mahnič, closes #5006)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.2110
Problem:    CTRL-C closes two popups instead of one.
Solution:   Reset got_int when the filter consumed the key.
Files:	    src/getchar.c, src/testdir/test_popupwin.vim

Patch 8.1.2111
Problem:    Viminfo file not sufficiently tested.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #5009)
Files:	    src/testdir/test_viminfo.vim

Patch 8.1.2112
Problem:    Build number for ConPTY is outdated.
Solution:   Update to new build number. (Nobuhiro Takasaki, closes #5014)
Files:	    src/os_win32.c

Patch 8.1.2113
Problem:    ":help expr-!~?" only works after searching.
Solution:   Escape "~" after "expr-". (closes #5015)
Files:	    src/ex_cmds.c, src/testdir/test_help.vim

Patch 8.1.2114
Problem:    When a popup is closed with CTRL-C the callback aborts.
Solution:   Reset got_int when invoking the callback. (closes #5008)
Files:	    src/popupwin.c

Patch 8.1.2115
Problem:    MS-Windows: shell commands fail if &shell contains a space.
Solution:   Use quotes instead of escaping. (closes #4920)
Files:	    src/option.c, src/os_win32.c, src/testdir/test_startup.vim,
            src/testdir/test_system.vim, src/vimrun.c,

Patch 8.1.2116
Problem:    No check for out of memory.
Solution:   Check for NULL pointer.
Files:	    src/option.c

Patch 8.1.2117
Problem:    CursorLine highlight used while 'cursorline' is off.
Solution:   Check 'cursorline' is set. (closes #5017)
Files:	    src/drawline.c, src/testdir/test_cursorline.vim

Patch 8.1.2118
Problem:    Termcodes test fails when $TERM is "dumb".
Solution:   Skip the test. (James McCoy, closes #5019)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2119
Problem:    memory access error for empty string when 'encoding' is a single
            byte encoding.
Solution:   Check for empty string when getting the length. (Dominique Pelle,
            closes #5021, closes #5007)
Files:	    src/macros.h

Patch 8.1.2120
Problem:    Some MB_ macros are more complicated than necessary. (Dominique
            Pelle)
